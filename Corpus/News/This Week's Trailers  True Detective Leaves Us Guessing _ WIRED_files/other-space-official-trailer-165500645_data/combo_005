YUI.add("td-applet-video-playlist-model",function(e){"use strict";var t=window.App&&window.App.Cache&&window.App.Cache.globals&&window.App.Cache.globals.pageParams&&window.App.Cache.globals.pageParams.pageType;e.namespace("TD.Applet").VideoPlaylistModel=e.Base.create("TDAppletVideoPlaylistModel",e.Model,[e.Af.Sync],{resource:"ChannelStore",readonly:!0,consolidate:!1,idAttribute:"video-playlist",syncContext:{config:{xhr:"/_td_api"}},load:function(n,r){var i=this,s=n&&n.VideoplayerUtil,o;s&&s.isFeatureEnabled("xhrBatches")&&(o=function(){n&&n.cacheVideos&&s.cacheVideos(i),typeof r=="function"&&r.apply(null,arguments)},t&&!n.page_type&&(n.page_type=t),e.TD.Applet.VideoPlaylistModel.superclass.load.call(i,n,o))},setApiURL:function(e){var t=this;t.syncContext&&(t.syncContext.config=t.syncContext.config||{},t.syncContext.config.xhr=e)}},{ATTRS:{}})},"@VERSION@",{requires:["model","af-sync"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("event-simulate",function(e,t){(function(){function v(t,n,a,f,l,c,h,p,d,v,m){t||e.error("simulateKeyEvent(): Invalid target.");if(i(n)){n=n.toLowerCase();switch(n){case"textevent":n="keypress";break;case"keyup":case"keydown":case"keypress":break;default:e.error("simulateKeyEvent(): Event type '"+n+"' not supported.")}}else e.error("simulateKeyEvent(): Event type must be a string.");s(a)||(a=!0),s(f)||(f=!0),o(l)||(l=e.config.win),s(c)||(c=!1),s(h)||(h=!1),s(p)||(p=!1),s(d)||(d=!1),u(v)||(v=0),u(m)||(m=0);var g=null;if(r(e.config.doc.createEvent)){try{g=e.config.doc.createEvent("KeyEvents"),g.initKeyEvent(n,a,f,l,c,h,p,d,v,m)}catch(y){try{g=e.config.doc.createEvent("Events")}catch(b){g=e.config.doc.createEvent("UIEvents")}finally{g.initEvent(n,a,f),g.view=l,g.altKey=h,g.ctrlKey=c,g.shiftKey=p,g.metaKey=d,g.keyCode=v,g.charCode=m}}t.dispatchEvent(g)}else o(e.config.doc.createEventObject)?(g=e.config.doc.createEventObject(),g.bubbles=a,g.cancelable=f,g.view=l,g.ctrlKey=c,g.altKey=h,g.shiftKey=p,g.metaKey=d,g.keyCode=m>0?m:v,t.fireEvent("on"+n,g)):e.error("simulateKeyEvent(): No event simulation framework present.")}function m(t,n,l,c,h,p,d,v,m,g,y,b,w,E,S,x){t||e.error("simulateMouseEvent(): Invalid target."),i(n)?!a[n.toLowerCase()]&&!f[n]&&e.error("simulateMouseEvent(): Event type '"+n+"' not supported."):e.error("simulateMouseEvent(): Event type must be a string."),s(l)||(l=!0),s(c)||(c=n!=="mousemove"),o(h)||(h=e.config.win),u(p)||(p=1),u(d)||(d=0),u(v)||(v=0),u(m)||(m=0),u(g)||(g=0),s(y)||(y=!1),s(b)||(b=!1),s(w)||(w=!1),s(E)||(E=!1),u(S)||(S=0),x=x||null;var T=null;if(r(e.config.doc.createEvent))T=e.config.doc.createEvent("MouseEvents"),T.initMouseEvent?T.initMouseEvent(n,l,c,h,p,d,v,m,g,y,b,w,E,S,x):(T=e.config.doc.createEvent("UIEvents"),T.initEvent(n,l,c),T.view=h,T.detail=p,T.screenX=d,T.screenY=v,T.clientX=m,T.clientY=g,T.ctrlKey=y,T.altKey=b,T.metaKey=E,T.shiftKey=w,T.button=S,T.relatedTarget=x),x&&!T.relatedTarget&&(n==="mouseout"?T.toElement=x:n==="mouseover"&&(T.fromElement=x)),t.dispatchEvent(T);else if(o(e.config.doc.createEventObject)){T=e.config.doc.createEventObject(),T.bubbles=l,T.cancelable=c,T.view=h,T.detail=p,T.screenX=d,T.screenY=v,T.clientX=m,T.clientY=g,T.ctrlKey=y,T.altKey=b,T.metaKey=E,T.shiftKey=w;switch(S){case 0:T.button=1;break;case 1:T.button=4;break;case 2:break;default:T.button=0}T.relatedTarget=x,t.fireEvent("on"+n,T)}else e.error("simulateMouseEvent(): No event simulation framework present.")}function g(t,n,a,f,l,p){t||e.error("simulateUIEvent(): Invalid target."),i(n)?(n=n.toLowerCase(),c[n]||e.error("simulateUIEvent(): Event type '"+n+"' not supported.")):e.error("simulateUIEvent(): Event type must be a string.");var d=null;s(a)||(a=n in h),s(f)||(f=n==="submit"),o(l)||(l=e.config.win),u(p)||(p=1),r(e.config.doc.createEvent)?(d=e.config.doc.createEvent("UIEvents"),d.initUIEvent(n,a,f,l,p),t.dispatchEvent(d)):o(e.config.doc.createEventObject)?(d=e.config.doc.createEventObject(),d.bubbles=a,d.cancelable=f,d.view=l,d.detail=p,t.fireEvent("on"+n,d)):e.error("simulateUIEvent(): No event simulation framework present.")}function y(t,n,r,i,s,o,u,a,f,l,c,h,p,v,m,g){var y;(!e.UA.ios||e.UA.ios<2)&&e.error("simulateGestureEvent(): Native gesture DOM eventframe is not available in this platform."),t||e.error("simulateGestureEvent(): Invalid target."),e.Lang.isString(n)?(n=n.toLowerCase(),d[n]||e.error("simulateTouchEvent(): Event type '"+n+"' not supported.")):e.error("simulateGestureEvent(): Event type must be a string."),e.Lang.isBoolean(r)||(r=!0),e.Lang.isBoolean(i)||(i=!0),e.Lang.isObject(s)||(s=e.config.win),e.Lang.isNumber(o)||(o=2),e.Lang.isNumber(u)||(u=0),e.Lang.isNumber(a)||(a=0),e.Lang.isNumber(f)||(f=0),e.Lang.isNumber(l)||(l=0),e.Lang.isBoolean(c)||(c=!1),e.Lang.isBoolean(h)||(h=!1),e.Lang.isBoolean(p)||(p=!1),e.Lang.isBoolean(v)||(v=!1),e.Lang.isNumber(m)||(m=1),e.Lang.isNumber(g)||(g=0),y=e.config.doc.createEvent("GestureEvent"),y.initGestureEvent(n,r,i,s,o,u,a,f,l,c,h,p,v,t,m,g),t.dispatchEvent(y)}function b(t,n,r,i,s,o,u,a,f,l,c,h,d,v,m,g,y,b,w){var E;t||e.error("simulateTouchEvent(): Invalid target."),e.Lang.isString(n)?(n=n.toLowerCase(),p[n]||e.error("simulateTouchEvent(): Event type '"+n+"' not supported.")):e.error("simulateTouchEvent(): Event type must be a string."),n==="touchstart"||n==="touchmove"?m.length===0&&e.error("simulateTouchEvent(): No touch object in touches"):n==="touchend"&&y.length===0&&e.error("simulateTouchEvent(): No touch object in changedTouches"),e.Lang.isBoolean(r)||(r=!0),e.Lang.isBoolean(i)||(i=n!=="touchcancel"),e.Lang.isObject(s)||(s=e.config.win),e.Lang.isNumber(o)||(o=1),e.Lang.isNumber(u)||(u=0),e.Lang.isNumber(a)||(a=0),e.Lang.isNumber(f)||(f=0),e.Lang.isNumber(l)||(l=0),e.Lang.isBoolean(c)||(c=!1),e.Lang.isBoolean(h)||(h=!1),e.Lang.isBoolean(d)||(d=!1),e.Lang.isBoolean(v)||(v=!1),e.Lang.isNumber(b)||(b=1),e.Lang.isNumber(w)||(w=0),e.Lang.isFunction(e.config.doc.createEvent)?(e.UA.android?e.UA.android<4?(E=e.config.doc.createEvent("MouseEvents"),E.initMouseEvent(n,r,i,s,o,u,a,f,l,c,h,d,v,0,t),E.touches=m,E.targetTouches=g,E.changedTouches=y):(E=e.config.doc.createEvent("TouchEvent"),E.initTouchEvent(m,g,y,n,s,u,a,f,l,c,h,d,v)):e.UA.ios?e.UA.ios>=2?(E=e.config.doc.createEvent("TouchEvent"),E.initTouchEvent(n,r,i,s,o,u,a,f,l,c,h,d,v,m,g,y,b,w)):e.error("simulateTouchEvent(): No touch event simulation framework present for iOS, "+e.UA.ios+"."):e.error("simulateTouchEvent(): Not supported agent yet, "+e.UA.userAgent),t.dispatchEvent(E)):e.error("simulateTouchEvent(): No event simulation framework present.")}var t=e.Lang,n=e.config.win,r=t.isFunction,i=t.isString,s=t.isBoolean,o=t.isObject,u=t.isNumber,a={click:1,dblclick:1,mouseover:1,mouseout:1,mousedown:1,mouseup:1,mousemove:1,contextmenu:1},f=n&&n.PointerEvent?{pointerover:1,pointerout:1,pointerdown:1,pointerup:1,pointermove:1}:{MSPointerOver:1,MSPointerOut:1,MSPointerDown:1,MSPointerUp:1,MSPointerMove:1},l={keydown:1,keyup:1,keypress:1},c={submit:1,blur
:1,change:1,focus:1,resize:1,scroll:1,select:1},h={scroll:1,resize:1,reset:1,submit:1,change:1,select:1,error:1,abort:1},p={touchstart:1,touchmove:1,touchend:1,touchcancel:1},d={gesturestart:1,gesturechange:1,gestureend:1};e.mix(h,a),e.mix(h,l),e.mix(h,p),e.Event.simulate=function(t,n,r){r=r||{},a[n]||f[n]?m(t,n,r.bubbles,r.cancelable,r.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,r.relatedTarget):l[n]?v(t,n,r.bubbles,r.cancelable,r.view,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode):c[n]?g(t,n,r.bubbles,r.cancelable,r.view,r.detail):p[n]?e.config.win&&"ontouchstart"in e.config.win&&!e.UA.phantomjs&&!(e.UA.chrome&&e.UA.chrome<6)?b(t,n,r.bubbles,r.cancelable,r.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.touches,r.targetTouches,r.changedTouches,r.scale,r.rotation):e.error("simulate(): Event '"+n+"' can't be simulated. Use gesture-simulate module instead."):e.UA.ios&&e.UA.ios>=2&&d[n]?y(t,n,r.bubbles,r.cancelable,r.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.scale,r.rotation):e.error("simulate(): Event '"+n+"' can't be simulated.")}})()},"3.18.1",{requires:["event-base"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("async-queue",function(e,t){e.AsyncQueue=function(){this._init(),this.add.apply(this,arguments)};var n=e.AsyncQueue,r="execute",i="shift",s="promote",o="remove",u=e.Lang.isObject,a=e.Lang.isFunction;n.defaults=e.mix({autoContinue:!0,iterations:1,timeout:10,until:function(){return this.iterations|=0,this.iterations<=0}},e.config.queueDefaults||{}),e.extend(n,e.EventTarget,{_running:!1,_init:function(){e.EventTarget.call(this,{prefix:"queue",emitFacade:!0}),this._q=[],this.defaults={},this._initEvents()},_initEvents:function(){this.publish({execute:{defaultFn:this._defExecFn,emitFacade:!0},shift:{defaultFn:this._defShiftFn,emitFacade:!0},add:{defaultFn:this._defAddFn,emitFacade:!0},promote:{defaultFn:this._defPromoteFn,emitFacade:!0},remove:{defaultFn:this._defRemoveFn,emitFacade:!0}})},next:function(){var e;while(this._q.length){e=this._q[0]=this._prepare(this._q[0]);if(!e||!e.until())break;this.fire(i,{callback:e}),e=null}return e||null},_defShiftFn:function(e){this.indexOf(e.callback)===0&&this._q.shift()},_prepare:function(t){if(a(t)&&t._prepared)return t;var r=e.merge(n.defaults,{context:this,args:[],_prepared:!0},this.defaults,a(t)?{fn:t}:t),i=e.bind(function(){i._running||i.iterations--,a(i.fn)&&i.fn.apply(i.context||e,e.Array(i.args))},this);return e.mix(i,r)},run:function(){var e,t=!0;if(this._executing)return this._running=!0,this;for(e=this.next();e&&!this.isRunning();e=this.next()){t=e.timeout<0?this._execute(e):this._schedule(e);if(!t)break}return e||this.fire("complete"),this},_execute:function(e){this._running=e._running=!0,this._executing=e,e.iterations--,this.fire(r,{callback:e});var t=this._running&&e.autoContinue;return this._running=e._running=!1,this._executing=!1,t},_schedule:function(t){return this._running=e.later(t.timeout,this,function(){this._execute(t)&&this.run()}),!1},isRunning:function(){return!!this._running},_defExecFn:function(e){e.callback()},add:function(){return this.fire("add",{callbacks:e.Array(arguments,0,!0)}),this},_defAddFn:function(t){var n=this._q,r=[];e.Array.each(t.callbacks,function(e){u(e)&&(n.push(e),r.push(e))}),t.added=r},pause:function(){return this._running&&u(this._running)&&this._running.cancel(),this._running=!1,this},stop:function(){return this._q=[],this._running&&u(this._running)&&(this._running.cancel(),this._running=!1),this._executing||this.run(),this},indexOf:function(e){var t=0,n=this._q.length,r;for(;t<n;++t){r=this._q[t];if(r===e||r.id===e)return t}return-1},getCallback:function(e){var t=this.indexOf(e);return t>-1?this._q[t]:null},promote:function(e){var t={callback:e},n;return this.isRunning()?n=this.after(i,function(){this.fire(s,t),n.detach()},this):this.fire(s,t),this},_defPromoteFn:function(e){var t=this.indexOf(e.callback),n=t>-1?this._q.splice(t,1)[0]:null;e.promoted=n,n&&this._q.unshift(n)},remove:function(e){var t={callback:e},n;return this.isRunning()?n=this.after(i,function(){this.fire(o,t),n.detach()},this):this.fire(o,t),this},_defRemoveFn:function(e){var t=this.indexOf(e.callback);e.removed=t>-1?this._q.splice(t,1)[0]:null},size:function(){return this.isRunning()||this.next(),this._q.length}})},"3.18.1",{requires:["event-custom"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("gesture-simulate",function(e,t){function T(n){n||e.error(t+": invalid target node"),this.node=n,this.target=e.Node.getDOMNode(n);var r=this.node.getXY(),i=this._getDims();a=r[0]+i[0]/2,f=r[1]+i[1]/2}var t="gesture-simulate",n=e.config.win&&"ontouchstart"in e.config.win&&!e.UA.phantomjs&&!(e.UA.chrome&&e.UA.chrome<6),r={tap:1,doubletap:1,press:1,move:1,flick:1,pinch:1,rotate:1},i={touchstart:1,touchmove:1,touchend:1,touchcancel:1},s=e.config.doc,o,u=20,a,f,l={HOLD_TAP:10,DELAY_TAP:10,HOLD_PRESS:3e3,MIN_HOLD_PRESS:1e3,MAX_HOLD_PRESS:6e4,DISTANCE_MOVE:200,DURATION_MOVE:1e3,MAX_DURATION_MOVE:5e3,MIN_VELOCITY_FLICK:1.3,DISTANCE_FLICK:200,DURATION_FLICK:1e3,MAX_DURATION_FLICK:5e3,DURATION_PINCH:1e3},c="touchstart",h="touchmove",p="touchend",d="gesturestart",v="gesturechange",m="gestureend",g="mouseup",y="mousemove",b="mousedown",w="click",E="dblclick",S="x",x="y";T.prototype={_toRadian:function(e){return e*(Math.PI/180)},_getDims:function(){var e,t,n;return this.target.getBoundingClientRect?(e=this.target.getBoundingClientRect(),"height"in e?n=e.height:n=Math.abs(e.bottom-e.top),"width"in e?t=e.width:t=Math.abs(e.right-e.left)):(e=this.node.get("region"),t=e.width,n=e.height),[t,n]},_calculateDefaultPoint:function(t){var n;return!e.Lang.isArray(t)||t.length===0?t=[a,f]:(t.length==1&&(n=this._getDims[1],t[1]=n/2),t[0]=this.node.getX()+t[0],t[1]=this.node.getY()+t[1]),t},rotate:function(n,r,i,s,o,u,a){var f,l=i,c=s;if(!e.Lang.isNumber(l)||!e.Lang.isNumber(c)||l<0||c<0)f=this.target.offsetWidth<this.target.offsetHeight?this.target.offsetWidth/4:this.target.offsetHeight/4,l=f,c=f;e.Lang.isNumber(a)||e.error(t+"Invalid rotation detected."),this.pinch(n,r,l,c,o,u,a)},pinch:function(n,r,i,s,o,a,f){var g,y,b=u,w,E=0,S=i,x=s,T,N,C,k,L,A,O,M,_,D={start:[],end:[]},P={start:[],end:[]},H,B;r=this._calculateDefaultPoint(r),(!e.Lang.isNumber(S)||!e.Lang.isNumber(x)||S<0||x<0)&&e.error(t+"Invalid startRadius and endRadius detected.");if(!e.Lang.isNumber(o)||o<=0)o=l.DURATION_PINCH;if(!e.Lang.isNumber(a))a=0;else{a%=360;while(a<0)a+=360}e.Lang.isNumber(f)||(f=0),e.AsyncQueue.defaults.timeout=b,g=new e.AsyncQueue,N=r[0],C=r[1],O=a,M=a+f,D.start=[N+S*Math.sin(this._toRadian(O)),C-S*Math.cos(this._toRadian(O))],D.end=[N+x*Math.sin(this._toRadian(M)),C-x*Math.cos(this._toRadian(M))],P.start=[N-S*Math.sin(this._toRadian(O)),C+S*Math.cos(this._toRadian(O))],P.end=[N-x*Math.sin(this._toRadian(M)),C+x*Math.cos(this._toRadian(M))],k=1,L=s/i,g.add({fn:function(){var t,n,r,i;t={pageX:D.start[0],pageY:D.start[1],clientX:D.start[0],clientY:D.start[1]},n={pageX:P.start[0],pageY:P.start[1],clientX:P.start[0],clientY:P.start[1]},i=this._createTouchList([e.merge({identifier:E++},t),e.merge({identifier:E++},n)]),r={pageX:(D.start[0]+P.start[0])/2,pageY:(D.start[0]+P.start[1])/2,clientX:(D.start[0]+P.start[0])/2,clientY:(D.start[0]+P.start[1])/2},this._simulateEvent(this.target,c,e.merge({touches:i,targetTouches:i,changedTouches:i,scale:k,rotation:O},r)),e.UA.ios>=2&&this._simulateEvent(this.target,d,e.merge({scale:k,rotation:O},r))},timeout:0,context:this}),H=Math.floor(o/b),T=(x-S)/H,A=(L-k)/H,_=(M-O)/H,B=function(t){var n=S+T*t,r=N+n*Math.sin(this._toRadian(O+_*t)),i=C-n*Math.cos(this._toRadian(O+_*t)),s=N-n*Math.sin(this._toRadian(O+_*t)),o=C+n*Math.cos(this._toRadian(O+_*t)),u=(r+s)/2,a=(i+o)/2,f,l,c,p;f={pageX:r,pageY:i,clientX:r,clientY:i},l={pageX:s,pageY:o,clientX:s,clientY:o},p=this._createTouchList([e.merge({identifier:E++},f),e.merge({identifier:E++},l)]),c={pageX:u,pageY:a,clientX:u,clientY:a},this._simulateEvent(this.target,h,e.merge({touches:p,targetTouches:p,changedTouches:p,scale:k+A*t,rotation:O+_*t},c)),e.UA.ios>=2&&this._simulateEvent(this.target,v,e.merge({scale:k+A*t,rotation:O+_*t},c))};for(y=0;y<H;y++)g.add({fn:B,args:[y],context:this});g.add({fn:function(){var t=this._getEmptyTouchList(),n,r,i,s;n={pageX:D.end[0],pageY:D.end[1],clientX:D.end[0],clientY:D.end[1]},r={pageX:P.end[0],pageY:P.end[1],clientX:P.end[0],clientY:P.end[1]},s=this._createTouchList([e.merge({identifier:E++},n),e.merge({identifier:E++},r)]),i={pageX:(D.end[0]+P.end[0])/2,pageY:(D.end[0]+P.end[1])/2,clientX:(D.end[0]+P.end[0])/2,clientY:(D.end[0]+P.end[1])/2},e.UA.ios>=2&&this._simulateEvent(this.target,m,e.merge({scale:L,rotation:M},i)),this._simulateEvent(this.target,p,e.merge({touches:t,targetTouches:t,changedTouches:s,scale:L,rotation:M},i))},context:this}),n&&e.Lang.isFunction(n)&&g.add({fn:n,context:this.node}),g.run()},tap:function(t,r,i,s,o){var u=new e.AsyncQueue,a=this._getEmptyTouchList(),f,h,d,v,m;r=this._calculateDefaultPoint(r);if(!e.Lang.isNumber(i)||i<1)i=1;e.Lang.isNumber(s)||(s=l.HOLD_TAP),e.Lang.isNumber(o)||(o=l.DELAY_TAP),h={pageX:r[0],pageY:r[1],clientX:r[0],clientY:r[1]},f=this._createTouchList([e.merge({identifier:0},h)]),v=function(){this._simulateEvent(this.target,c,e.merge({touches:f,targetTouches:f,changedTouches:f},h))},m=function(){this._simulateEvent(this.target,p,e.merge({touches:a,targetTouches:a,changedTouches:f},h))};for(d=0;d<i;d++)u.add({fn:v,context:this,timeout:d===0?0:o}),u.add({fn:m,context:this,timeout:s});i>1&&!n&&u.add({fn:function(){this._simulateEvent(this.target,E,h)},context:this}),t&&e.Lang.isFunction(t)&&u.add({fn:t,context:this.node}),u.run()},flick:function(n,r,i,s,o){var u;r=this._calculateDefaultPoint(r),e.Lang.isString(i)?(i=i.toLowerCase(),i!==S&&i!==x&&e.error(t+"(flick): Only x or y axis allowed")):i=S,e.Lang.isNumber(s)||(s=l.DISTANCE_FLICK),e.Lang.isNumber(o)?o>l.MAX_DURATION_FLICK&&(o=l.MAX_DURATION_FLICK):o=l.DURATION_FLICK,Math.abs(s)/o<l.MIN_VELOCITY_FLICK&&(o=Math.abs(s)/l.MIN_VELOCITY_FLICK),u={start:e.clone(r),end:[i===S?r[0]+s:r[0],i===x?r[1]+s:r[1]]},this._move(n,u,o)},move:function(t,n,r){var i;e.Lang.isObject(n)?(e.Lang.isArray(n.point)?n.point=this._calculateDefaultPoint(n.point):n.point=this._calculateDefaultPoint([]),e.Lang.isNumber(n.xdist)||(n.xdist=l.DISTANCE_MOVE),e.Lang.isNumber(n.ydist)||(n.ydist=0)):n={point:this._calculateDefaultPoint([]),xdist:l.
DISTANCE_MOVE,ydist:0},e.Lang.isNumber(r)?r>l.MAX_DURATION_MOVE&&(r=l.MAX_DURATION_MOVE):r=l.DURATION_MOVE,i={start:e.clone(n.point),end:[n.point[0]+n.xdist,n.point[1]+n.ydist]},this._move(t,i,r)},_move:function(t,n,r){var i,s,o=u,d,v,m,g=0,y;e.Lang.isNumber(r)?r>l.MAX_DURATION_MOVE&&(r=l.MAX_DURATION_MOVE):r=l.DURATION_MOVE,e.Lang.isObject(n)?(e.Lang.isArray(n.start)||(n.start=[a,f]),e.Lang.isArray(n.end)||(n.end=[a+l.DISTANCE_MOVE,f])):n={start:[a,f],end:[a+l.DISTANCE_MOVE,f]},e.AsyncQueue.defaults.timeout=o,i=new e.AsyncQueue,i.add({fn:function(){var t={pageX:n.start[0],pageY:n.start[1],clientX:n.start[0],clientY:n.start[1]},r=this._createTouchList([e.merge({identifier:g++},t)]);this._simulateEvent(this.target,c,e.merge({touches:r,targetTouches:r,changedTouches:r},t))},timeout:0,context:this}),d=Math.floor(r/o),v=(n.end[0]-n.start[0])/d,m=(n.end[1]-n.start[1])/d,y=function(t){var r=n.start[0]+v*t,i=n.start[1]+m*t,s={pageX:r,pageY:i,clientX:r,clientY:i},o=this._createTouchList([e.merge({identifier:g++},s)]);this._simulateEvent(this.target,h,e.merge({touches:o,targetTouches:o,changedTouches:o},s))};for(s=0;s<d;s++)i.add({fn:y,args:[s],context:this});i.add({fn:function(){var t={pageX:n.end[0],pageY:n.end[1],clientX:n.end[0],clientY:n.end[1]},r=this._createTouchList([e.merge({identifier:g},t)]);this._simulateEvent(this.target,h,e.merge({touches:r,targetTouches:r,changedTouches:r},t))},timeout:0,context:this}),i.add({fn:function(){var t={pageX:n.end[0],pageY:n.end[1],clientX:n.end[0],clientY:n.end[1]},r=this._getEmptyTouchList(),i=this._createTouchList([e.merge({identifier:g},t)]);this._simulateEvent(this.target,p,e.merge({touches:r,targetTouches:r,changedTouches:i},t))},context:this}),t&&e.Lang.isFunction(t)&&i.add({fn:t,context:this.node}),i.run()},_getEmptyTouchList:function(){return o||(o=this._createTouchList([])),o},_createTouchList:function(n){var r=[],i,o=this;return!!n&&e.Lang.isArray(n)?e.UA.android&&e.UA.android>=4||e.UA.ios&&e.UA.ios>=2?(e.each(n,function(t){t.identifier||(t.identifier=0),t.pageX||(t.pageX=0),t.pageY||(t.pageY=0),t.screenX||(t.screenX=0),t.screenY||(t.screenY=0),r.push(s.createTouch(e.config.win,o.target,t.identifier,t.pageX,t.pageY,t.screenX,t.screenY))}),i=s.createTouchList.apply(s,r)):e.UA.ios&&e.UA.ios<2?e.error(t+": No touch event simulation framework present."):(i=[],e.each(n,function(e){e.identifier||(e.identifier=0),e.clientX||(e.clientX=0),e.clientY||(e.clientY=0),e.pageX||(e.pageX=0),e.pageY||(e.pageY=0),e.screenX||(e.screenX=0),e.screenY||(e.screenY=0),i.push({target:o.target,identifier:e.identifier,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,screenX:e.screenX,screenY:e.screenY})}),i.item=function(e){return i[e]}):e.error(t+": Invalid touchPoints passed"),i},_simulateEvent:function(t,r,s){var o;i[r]?n?e.Event.simulate(t,r,s):this._isSingleTouch(s.touches,s.targetTouches,s.changedTouches)?(r={touchstart:b,touchmove:y,touchend:g}[r],s.button=0,s.relatedTarget=null,o=r===g?s.changedTouches:s.touches,s=e.mix(s,{screenX:o.item(0).screenX,screenY:o.item(0).screenY,clientX:o.item(0).clientX,clientY:o.item(0).clientY},!0),e.Event.simulate(t,r,s),r==g&&e.Event.simulate(t,w,s)):e.error("_simulateEvent(): Event '"+r+"' has multi touch objects that can't be simulated in your platform."):e.Event.simulate(t,r,s)},_isSingleTouch:function(e,t,n){return e&&e.length<=1&&t&&t.length<=1&&n&&n.length<=1}},e.GestureSimulation=T,e.GestureSimulation.defaults=l,e.GestureSimulation.GESTURES=r,e.Event.simulateGesture=function(n,i,s,o){n=e.one(n);var u=new e.GestureSimulation(n);i=i.toLowerCase(),!o&&e.Lang.isFunction(s)&&(o=s,s={}),s=s||{};if(r[i])switch(i){case"tap":u.tap(o,s.point,s.times,s.hold,s.delay);break;case"doubletap":u.tap(o,s.point,2);break;case"press":e.Lang.isNumber(s.hold)?s.hold<l.MIN_HOLD_PRESS?s.hold=l.MIN_HOLD_PRESS:s.hold>l.MAX_HOLD_PRESS&&(s.hold=l.MAX_HOLD_PRESS):s.hold=l.HOLD_PRESS,u.tap(o,s.point,1,s.hold);break;case"move":u.move(o,s.path,s.duration);break;case"flick":u.flick(o,s.point,s.axis,s.distance,s.duration);break;case"pinch":u.pinch(o,s.center,s.r1,s.r2,s.duration,s.start,s.rotation);break;case"rotate":u.rotate(o,s.center,s.r1,s.r2,s.duration,s.start,s.rotation)}else e.error(t+": Not a supported gesture simulation: "+i)}},"3.18.1",{requires:["async-queue","event-simulate","node-screen"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("node-event-simulate",function(e,t){e.Node.prototype.simulate=function(t,n){e.Event.simulate(e.Node.getDOMNode(this),t,n)},e.Node.prototype.simulateGesture=function(t,n,r){e.Event.simulateGesture(this,t,n,r)}},"3.18.1",{requires:["node-base","event-simulate","gesture-simulate"]});
YUI.add("td-applet-videoplayer-nextscroll",function(e){"use strict";var t="active",n="<div></div>",r="height",i="px",s="region",o="scrollTop",u="top",a="bar-v",f="width",l=5;e.namespace("TD.Applet").VideoPlayerNextscroll=function(t){var r=this,i=t||{},s;i.delayEnter=i.delayEnter||150,i.delayLeave=i.delayLeave||1e3,i.toggleScrollbar=i.toggleScrollbar||!1,i.scrollBarBuffer=i.addScrollBarBuffer&&l||0,r.config=i,r.doc=e.one(e.config.doc),r.bb=e.one(i.boundingBox),r.cb=e.one(i.contentBox),i.height&&r.set("height",i.height),i.width&&r.set("width",i.width),r.hd=r.bb.one(i.header),r.vp=e.one("window"),r.sizer=e.Node.create(n),s=i.scrollbarWd||"Wpx-10",r.wrap=e.Node.create(n).setAttribute("class","wrap Pos-a End-0 Mend-1 T-0 B-0 "+s),r.bar=e.Node.create(n).setAttribute("class","bar Pos-r FastTrans"),r.thumb=e.Node.create(n).setAttribute("class","thumb P-0 Bxz-bb Cur-d Pos-r"),r.shape=e.Node.create(n).setAttribute("class","shape Bdrs-0 FastTrans H-0")},e.namespace("TD.Applet").VideoPlayerNextscroll.prototype={render:function(){var e=this;e.renderUI(),e.bindUI(),e.syncUI()},renderUI:function(){var e=this,t=e.hd?e.hd.get(s).height:0,n=e.cb.get(s).height;e.bb.addClass("yui-nextscroll"),e.cb.addClass("yui-nextscroll-content"),e.hd&&!e.cb.one(e.config.header)&&(e.hd.setStyle("position","absolute"),n>0&&(n-=t,e.cb.setStyles({top:t,height:n}))),e.cb.prepend(e.sizer),e.thumb.prepend(e.shape),e.bar.prepend(e.thumb),e.wrap.prepend(e.bar),e.bb.prepend(e.wrap),e.isRendered=!0,e.showBar(),e.onMouseLeave()},bindUI:function(){var t=this;t.handlers=[t.vp.on("resize",t.syncUI,t),t.bb.on("mouseenter",t.onMouseEnter,t),t.bb.on("mouseleave",t.onMouseLeave,t),t.thumb.on("mousedown",t.onMouseDown,t),t.cb.on("scroll",t.onScroll,t),t.doc.on(["mousewheel","DOMMouseScroll"],e.bind(t.onMousewheel,t)),t.bar.on("click",t.onBarClick,t)]},unbindUI:function(){(new e.EventTarget(this.handlers)).detach()},syncUI:function(e){if(!this.isRendered)return;var t=this,n=t.vp.get(s),a=t.bb.get(s),l=t.cb.get(s),c,h,p;t.hd=t.bb.one(t.config.header),t.cb.prepend(t.sizer),c=t.sizer.get(s),p=l.width-c.width,t.width=a.width,t.cb.setStyle(f,t.width+i),t.bbHt=a.height,t.cbHt=t.cb.get("scrollHeight"),t.hdHt=t.hd?t.hd.get(s).height:0,t.barHt=t.bbHt-t.hdHt-t.config.scrollBarBuffer,t.barTop=a.top+t.hdHt-n.top,t.maxScrollTop=Math.max(t.cbHt-t.bbHt,0),t.minThumbHt=Math.round(Math.min(75,t.barHt/4)),t.thumbHt=Math.round(Math.max(t.minThumbHt,t.barHt/(t.cbHt||1)*t.barHt)),t.maxThumbTop=t.barHt-t.thumbHt,e&&e.scrollToTop&&t.cb.set(o,0),t.hd&&!t.cb.one(t.config.header)&&(h=t.bbHt-t.hdHt,t.cb.setStyles({top:t.hdHt,height:h})),t.maxScrollTop>0?(t.bar.setStyle(u,t.hdHt+i),t.bar.setStyle(r,t.barHt+i),t.thumb.setStyle(r,t.thumbHt+i),t.synchScrollbar(),t.showBar()):t.hideBar()},synchScrollbar:function(){var e=this;if(e.maxScrollTop<=0)return;e.isDragging?(e.thumbTop=parseInt(e.thumb.getStyle(u),10),e.cb.set(o,Math.round(e.thumbTop/e.maxThumbTop*e.maxScrollTop))):(e.thumbTop=Math.round(e.cb.get(o)/e.maxScrollTop*e.maxThumbTop),e.thumb.setStyle(u,e.thumbTop+i))},onScroll:function(){var e=this;if(e.maxScrollTop<=0)return;e.showBar(),e.synchScrollbar(),e.isMouseOver||e.onMouseLeave()},onMousewheel:function(e){var t=this,n=t.cb.get(o),r=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),i=t.cb&&(t.cb.one(" > ul")||t.cb.one("> div")),s,u,a;if(!i)return!0;s=i&&i.get("region").height||0;if(s===0)return!0;u=r===1&&n<=0,a=r===-1&&n===s-t.bb.get("region").height;if(t.bb.contains(e.target)){if(!u&&!a)return!0;e.preventDefault()}},onMouseEnter:function(){var t=this;t.isMouseOver=!0,t.mouseTimer&&t.mouseTimer.cancel(),t.maxScrollTop>0&&t.config.toggleScrollbar&&(t.mouseTimer=e.later(t.config.delayEnter,t,"showBar"))},onMouseLeave:function(){var t=this;t.isMouseOver=!1,t.mouseTimer&&t.mouseTimer.cancel(),t.config.toggleScrollbar&&(t.mouseTimer=e.later(t.config.delayLeave,t,"hideBar"))},showBar:function(){this.bar.addClass(a)},hideBar:function(){this.isDragging||this.bar.removeClass(a)},onMouseDown:function(e){var n=this,r=n.thumb;n.maxScrollTop>0&&(n.lastY=e.clientY,n.isDragging=!0,r.addClass(t),r.move=n.doc.on("mousemove",n.onMouseMove,n),r.up=n.doc.on("mouseup",n.onMouseUp,n),e.halt())},onMouseMove:function(t){var n=this,r=t.clientY-n.lastY,s=n.thumbTop+r;if(e.UA.ie&&e.UA.ie<9&&t.button===0){n.onMouseUp(t);return}s=Math.max(s,0),s=Math.min(s,n.maxThumbTop),n.thumbTop=s,n.thumb.setStyle(u,s+i),n.synchScrollbar(),n.lastY+=r,t.halt()},onMouseUp:function(e){var n=this,r=n.thumb,i=n.bb.get(s),o=e.pageX>=i.left&&e.pageX<=i.right&&e.pageY>=i.top;r.move.detach(),r.up.detach(),n.isDragging=!1,r.removeClass(t),o||n.onMouseLeave(),e.halt()},onBarClick:function(e){var t=this,n=e.clientY<t.barTop+t.thumbTop,r=e.clientY>t.barTop+t.thumbTop+t.thumbHt,i=n?-t.barHt:r?t.barHt:0;i&&(t.cb.set(o,t.cb.get(o)+i),t.synchScrollbar())},set:function(t,n){var r=this;r[t]=n,r.bb.setStyle(t,e.Lang.isNumber(n)?n+i:n)},destroy:function(){var t=this;t.unbindUI(),(new e.NodeList([t.sizer,t.shape,t.thumb,t.bar,t.wrap])).remove(),t.bb.removeClass("yui-nextscroll").setStyles({height:"",width:""}),t.cb.removeClass("yui-nextscroll-content"),t.hd&&t.hd.setStyle("position",""),t.isRendered=!1},scrollToTop:function(){var e=this;e.cb.set(o,0),e.syncUI()}}},"@VERSION@",{requires:["node-base","event-mouseenter"]});
YUI.add("td-applet-videoplayer-templates-title",function(e,t){dust.cache=dust.cache||{},dust.cache[t]=function(){return function(){function e(e,n){return e.notexists(n.get("yahoo_media_live_video"),n,{block:t},null).write("\n").reference(n.get("title"),n,"h",["s"]).write("\n")}function t(e,t){return e.section(t.get("name"),t,{block:n},null).write("\n").notexists(t.get("name"),t,{block:u},null)}function n(e,t){return e.helper("ne",t,{block:r},{key:s,value:o})}function r(e,t){return e.section(t.get("artist_name"),t,{block:i},null)}function i(e,t){return e.reference(t.getPath(!0,[]),t,"h",["s"]).write(" - ")}function s(e,t){return e.reference(t.get("name"),t,"h")}function o(e,t){return e.reference(t.get("artist_name"),t,"h")}function u(e,t){return e.section(t.get("artist_name"),t,{block:a},null)}function a(e,t){return e.reference(t.getPath(!0,[]),t,"h",["s"]).write(" - ")}return dust.register("td-applet-videoplayer-templates-title",e),e}()}(),dust.cache["td-applet-videoplayer:title.dust"]=dust.cache["td-applet-videoplayer:title"]=dust.cache[t],e.Template._cache=e.Template._cache||{},e.Template._cache["td-applet-videoplayer/templates/title"]=function(e,n){e=e||{},dust.render(t,e,n)}},"@VERSION@",{requires:["template-base","dust"]});
YUI.add("td-applet-videoplayer-templates-video",function(e,t){dust.cache=dust.cache||{},dust.cache[t]=function(){return function(){function e(e,n){return e.section(n.get("videos"),n,{block:t},null)}function t(e,t){return e.write("\n").write('<li class="Grid Trigger Pos-r Py-4 pl-item" data-uuid="').reference(t.get("id"),t,"h").write('" data-idx="').section(t.get("startIdx"),t,{"else":n,block:i},null).write('">').write("\n    ").write('<a href="').section(t.getPath(!1,["config","useVanityPath"]),t,{"else":u,block:a},null).write('" class="rapidnofollow" ').helper("rapid_data_attr",t,{},{"rapid-base":t.get("instrument")}).write(' data-alias="').reference(t.get("url_alias"),t,"h").write('" title="').reference(t.get("title"),t,"h",["s"]).write('">').write("\n        ").write('<div class="Grid-U Wpx-24 Va-m Fz-xs Ta-c pl-order">').write("\n            ").write('<p class="playlist-order">').section(t.get("startIdx"),t,{"else":f,block:c},null).write("</p>").write("\n            ").write('<i class="Icon Fz-3xs C-1">&#xe05c;</i>').write("\n        ").write("</div>").write("\n        ").write('<div class="Grid-U-1-3  Pos-r Ov-h Va-m intrinsic-ratio pl-img">').write("\n                ").section(t.get("ondemand"),t,{"else":d,block:g},null).write("\n                ").section(t.get("duration"),t,{block:w},null).write("\n                ").write('<span class="current pl-marker Pos-a T-0 B-0 Start-0 End-0 C-1 Fz-xs Py-4 Px-6 smooth Tt-u Ta-c">').helper("intlMessage",t,{},{_key:"NOW_WATCHING"}).write("</span>").write("\n                ").write('<span class="next pl-marker Pos-a C-1 Fz-2xs Py-4 Px-6 smooth Tt-u">').helper("intlMessage",t,{},{_key:"UP_NEXT"}).write("</span>").write("\n\n        ").write("</div>").write("\n        ").write('<div class="Grid-U Pstart-8 pl-info">').write("\n            ").write('<p class="pl-title LineClamp Fz-s Mt-0 Mb-2">').partial("td-applet-videoplayer:title",t,null).write("</p>").write("\n            ").section(t.get("mode"),t,{block:x},null).write("\n            ").write('<p class="Dn pl-desc">').reference(t.get("description"),t,"h").write("</p>").write("\n        ").write("</div>").write("\n    ").write("</a>").write("\n").write("</li>").write("\n")}function n(e,t){return e.helper("idx",t,{block:r},null)}function r(e,t){return e.reference(t.getPath(!0,[]),t,"h")}function i(e,t){return e.helper("math",t,{},{key:s,method:"add",operand:o})}function s(e,t){return e.reference(t.get("$idx"),t,"h")}function o(e,t){return e.reference(t.get("startIdx"),t,"h")}function u(e,t){return e.reference(t.get("share_link"),t,"h")}function a(e,t){return e.reference(t.get("vanity_url"),t,"h")}function f(e,t){return e.helper("math",t,{},{key:l,method:"add",operand:"1"})}function l(e,t){return e.reference(t.get("$idx"),t,"h")}function c(e,t){return e.helper("math",t,{},{key:h,method:"add",operand:p})}function h(e,t){return e.reference(t.get("$idx"),t,"h")}function p(e,t){return e.reference(t.get("startIdxPlusOne"),t,"h")}function d(e,t){return e.write("\n                    ").helper("img",t,{},{src:v,"class":"W-100",defer:"0",alt:m}).write("\n                ")}function v(e,t){return e.reference(t.getPath(!1,["thumbnails","1","url"]),t,"h")}function m(e,t){return e.reference(t.get("title"),t,"h")}function g(e,t){return e.write("\n                    ").helper("img",t,{},{src:y,"class":"W-100",defer:"0",alt:b,ondemand:"1"}).write("\n                ")}function y(e,t){return e.reference(t.getPath(!1,["thumbnails","1","url"]),t,"h")}function b(e,t){return e.reference(t.get("title"),t,"h")}function w(e,t){return e.write("\n                    ").helper("ne",t,{block:E},{key:S,value:"0"}).write("\n                ")}function E(e,t){return e.write("\n                        ").write('<p class="Fz-xs duration Pos-a B-0 End-0 Py-2 Px-4 M-0">').helper("duration",t,{},{val:t.get("duration")}).write(" </p>").write("\n                    ")}function S(e,t){return e.reference(t.get("duration"),t,"h")}function x(e,t){return e.helper("eq",t,{block:T},{key:C,value:"embedtron"})}function T(e,t){return e.write("\n                ").section(t.get("view_count"),t,{block:N},null).write("\n            ")}function N(e,t){return e.write("\n                    ").write('<p class="pl-vc Fz-xs My-0">').reference(t.get("view_count"),t,"h").write(" views</p>").write("\n                ")}function C(e,t){return e.reference(t.get("mode"),t,"h")}return dust.register("td-applet-videoplayer-templates-video",e),e}()}(),dust.cache["td-applet-videoplayer:video.dust"]=dust.cache["td-applet-videoplayer:video"]=dust.cache[t],e.Template._cache=e.Template._cache||{},e.Template._cache["td-applet-videoplayer/templates/video"]=function(e,n){e=e||{},dust.render(t,e,n)}},"@VERSION@",{requires:["template-base","dust","td-applet-videoplayer-templates-title"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("event-hover",function(e,t){var n=e.Lang.isFunction,r=function(){},i={processArgs:function(e){var t=n(e[2])?2:3;return n(e[t])?e.splice(t,1)[0]:r},on:function(e,t,n,r){var i=t.args?t.args.slice():[];i.unshift(null),t._detach=e[r?"delegate":"on"]({mouseenter:function(e){e.phase="over",n.fire(e)},mouseleave:function(e){var n=t.context||this;i[0]=e,e.type="hover",e.phase="out",t._extra.apply(n,i)}},r)},detach:function(e,t,n){t._detach.detach()}};i.delegate=i.on,i.detachDelegate=i.detach,e.Event.define("hover",i)},"3.18.1",{requires:["event-mouseenter"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("timers",function(e,t){function i(e){return s}function s(e){this.capacity=this.snap(e),this.length=0,this.front=0,this.initialize()}function o(e,t,n,r,i){for(var s=0;s<i;++s)n[s+r]=e[s+t]}function u(e){return e>>>=0,e-=1,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e+1}function v(){while(a.length>0){var e=a.shift();try{e.call()}catch(t){if(d)throw l(),t;setTimeout(function(){throw t},0)}}f=!1}function y(e){d&&p.domain&&(e=p.domain.bind(e)),a.push(e),f||(l(),f=!0)}function b(e){var t;return b._asynchronizer(function(){t||e()}),{cancel:function(){t=1}}}var n={},r=e.config.global;"use strict",n.exports=s,s.prototype.push=function(e){var t=this.length;this.capacity<=t&&this.grow(this.snap(this.capacity*this.growFactor));var n=this.front+t&this.capacity-1;this[n]=e,this.length=t+1},s.prototype.shift=function(){var e=this.front,t=this[e];return this[e]=void 0,this.front=e+1&this.capacity-1,this.length--,t},s.prototype.grow=function(e){var t=this.front,n=this.capacity,r=new Array(n),i=this.length;o(this,0,r,0,n),this.capacity=e,this.initialize(),this.front=0;if(t+i<=n)o(r,t,this,0,i);else{var s=i-(t+i&n-1);o(r,t,this,0,s),o(r,0,this,s,i-s)}},s.prototype.initialize=function(){var e=this.capacity;for(var t=0;t<e;++t)this[t]=void 0},s.prototype.snap=function(e){return typeof e!="number"?this.minCapacity:u(Math.min(this.maxCapacity,Math.max(this.minCapacity,e)))},s.prototype.maxCapacity=1<<30|0,s.prototype.minCapacity=16,s.prototype.growFactor=8,"use strict";var s=i("./queue"),a=new s(1024),f=!1,l=void 0,c=typeof setImmediate=="function",h,p=r.process,d=!!p&&{}.toString.call(p)==="[object process]";if(d)l=function(){var e=p.domain;e&&(h=h||(1,i)("domain"),h.active=p.domain=null),f&&c?setImmediate(v):p.nextTick(v),e&&(h.active=p.domain=e)};else if(c)l=function(){setImmediate(v)};else if(typeof MessageChannel!="undefined"){var m=new MessageChannel;m.port1.onmessage=function(){l=g,m.port1.onmessage=v,v()};var g=function(){m.port2.postMessage(0)};l=function(){setTimeout(v,0),g()}}else l=function(){setTimeout(v,0)};n.exports=y,b._asynchronizer=y,b._impl="asap",e.soon=b},"3.18.1",{requires:["yui-base"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("promise",function(e,t){function i(e){if(!(this instanceof i))return new i(e);var t=new i.Resolver(this);this._resolver=t;try{e.call(this,function(e){t.resolve(e)},function(e){t.reject(e)})}catch(n){t.reject(n)}}function s(e){this._callbacks=[],this._errbacks=[],this.promise=e,this._status="pending",this._result=null}var n=e.Lang,r=[].slice;e.mix(i.prototype,{then:function(e,t){var n=this.constructor,r=this._resolver;return new n(function(n,s){r._addCallbacks(typeof e=="function"?i._wrap(n,s,e):n,typeof t=="function"?i._wrap(n,s,t):s)})},"catch":function(e){return this.then(undefined,e)},getStatus:function(){return this._resolver.getStatus()}}),i._wrap=function(e,t,n){return function(r){var i;try{i=n(r)}catch(s){t(s);return}e(i)}},i.isPromise=function(e){var t;try{t=e.then}catch(n){}return typeof t=="function"},i.resolve=function(e){return i.isPromise(e)&&e.constructor===this?e:new this(function(t){t(e)})},i.reject=function(e){return new this(function(t,n){n(e)})},i.all=function(e){var t=this;return new t(function(r,i){function f(e){return function(t){a[e]=t,s--,s||r(a)}}if(!n.isArray(e)){i(new TypeError("Promise.all expects an array of values or promises"));return}var s=e.length,o=0,u=e.length,a=[];if(u<1)return r(a);for(;o<u;o++)t.resolve(e[o]).then(f(o),i)})},i.race=function(e){var t=this;return new t(function(r,i){if(!n.isArray(e)){i(new TypeError("Promise.race expects an array of values or promises"));return}for(var s=0,o=e.length;s<o;s++)t.resolve(e[s]).then(r,i)})},e.Promise=i,e.mix(s.prototype,{fulfill:function(e){this._status==="pending"&&(this._result=e,this._status="fulfilled"),this._status==="fulfilled"&&(this._notify(this._callbacks,this._result),this._callbacks=[],this._errbacks=null)},reject:function(e){this._status==="pending"&&(this._result=e,this._status="rejected"),this._status==="rejected"&&(this._notify(this._errbacks,this._result),this._callbacks=null,this._errbacks=[])},resolve:function(e){var t=this;i.isPromise(e)?e.then(function(e){t.resolve(e)},function(e){t.reject(e)}):this.fulfill(e)},then:function(e,t){return this.promise.then(e,t)},_addCallbacks:function(e,t){var n=this._callbacks,r=this._errbacks,i=this._status,s=this._result;n&&typeof e=="function"&&n.push(e),r&&typeof t=="function"&&r.push(t),i==="fulfilled"?this.fulfill(s):i==="rejected"&&this.reject(s)},getStatus:function(){return this._status},_notify:function(t,n){t.length&&e.soon(function(){var e,r;for(e=0,r=t.length;e<r;++e)t[e](n)})}},!0),e.Promise.Resolver=s,e.when=function(e,t,n){return e=i.resolve(e),t||n?e.then(t,n):e},e.batch=function(){return i.all(r.call(arguments))}},"3.18.1",{requires:["timers"]});
YUI.add("mjata-model-store",function(e,t){"use strict";function f(e){return e&&e.name&&e.id}function l(e){return e&&n.items&&n.items[e.name]||u}function c(e){var t=l(e),n,r;return!t||!t._constructor?u:(n=t._constructor.prototype.idAttribute||i,r=e[n]||e.id,r&&t.instances&&t.instances[r]||u)}function h(e){return e?{name:e.constructor.NAME,id:e.get(i)||e.idAttribute&&e.get(e.idAttribute)}:u}var n,r="alias",i="id",s=!0,o=!1,u=null,a=e.config.win;a.Mjata=a.Mjata||{},n=a.Mjata.ModelStore=a.Mjata.ModelStore||{items:{},aliases:{}},e.namespace("Mjata").ModelStore={register:function(t){if(!e.Lang.isFunction(t)||!t.NAME)return o;var r=t.NAME;return n.items[r]?o:(n.items[r]={_constructor:t,instances:{}},s)},alias:function(t,i,a){if(!t||!i)return o;a=e.merge({replace:s,remove:o},a);var f=this,l=f.getByAlias(t);return l===i?s:l&&!a.replace?o:(l&&a.replace&&f.unalias(t,{remove:a.remove,silent:s}),f.add(i,a)?(n.aliases[t]=i,i.onceAfter("destroy",function(){f.unalias(t)}),a.silent||f.fire(r,{alias:t,prevInstance:l?h(l):u,newInstance:h(i)}),s):o)},unalias:function(t,i){if(!t)return o;var a=this,f=n.aliases,l=f[t];return l?(i=e.merge({remove:s,silent:o},i),i.remove&&a.remove(l),delete f[t],i.silent||a.fire(r,{alias:t,prevInstance:h(l),newInstance:u}),s):o},getByAlias:function(e){return e&&n.aliases[e]||u},promiseAlias:function(t){var n=this;return new e.Promise(function(e,i){if(!t)return i("invalid alias");var s=n.getByAlias(t);if(s)return e(s);n.on(r,function(n){n.alias===t&&(s=c(n.newInstance),s&&e(s))})})},get:function(t,n,r){if(!f(t))return u;r=e.merge({create:s},r);var o=l(t),a,c,h;return!o||!o._constructor?u:(a=o._constructor.prototype.idAttribute||i,c=t[a]||t.id,c?(n=e.merge(n,{id:c}),h=o.instances,h&&h[c]?(h[c].setAttrs(n),h[c]):r.create?this.create(t,n,{add:s}):u):u)},create:function(t,n,r){if(!f(t))return u;r=e.merge({add:s,replace:s},r);var o=l(t),a,c,h;return!o||!o._constructor?u:(a=o._constructor.prototype.idAttribute||i,c=t[a]||t.id,c?(n=e.merge(n,{id:c}),h=new o._constructor(n),r.add&&this.add(h,{replace:r.replace}),h):u)},add:function(t,n){if(!t)return o;n=e.merge({replace:o},n);var r=h(t),u=c(r),a,f,p;if(u&&u===t)return s;if(u&&!n.replace)return o;a=l(r);if(!a){f=this.register(t.constructor);if(!f)return o;a=l(r)}return a.instances[r.id]=t,t.onceAfter("destroy",e.bind(function(){this.remove(t)},this)),t.addTarget(this),p=a._constructor.prototype.idAttribute||i,t.after(p+"Change",function(t){var n=t.target,r=l(h(n));r&&(r.instances[t.newVal]=n,delete r.instances[t.prevVal])}),s},remove:function(t,n){if(!t)return o;n=e.merge({destroy:o},n);var r=h(t),i=l(r),u=i&&i.instances,a=r&&r.id;return!u||u[a]!==t?o:(t.removeTarget(this),n.destroy&&t.destroy(),delete u[a],s)}},e.augment(e.Mjata.ModelStore,e.EventTarget,s,null,{emitFacade:s,prefix:"ModelStore"}),e.Mjata.ModelStore.publish(r,{preventable:o})},"@VERSION@",{requires:["event-custom","promise"]});
YUI.add("mjata-template",function(e){"use strict";var t={},n=function(){},r=e.Object;t.dust={hasTemplate:function(e){return!!(dust&&dust.cache&&dust.cache[e])},render:function(e,t,n,i){if(!this.hasTemplate(e)){i("missing template: "+e);return}if(n&&r.size(n)>0){var s=dust.makeBase(n);dust.render(e,s.push(t),i)}else dust.render(e,t,i)}},e.namespace("Mjata").Template={render:function(e,i,s,o){o=o||n;var u;r.some(t,function(t){return t.hasTemplate(e)?(u=t,!0):!1}),u?u.render(e,i,s,o):o("Missing engine: "+e)}}},"@VERSION@",{requires:["dust"]});
YUI.add("mjata-bind-model2dom",function(e){"use strict";function g(e,t){return e&&e._node&&e.empty().setHTML(t)}function y(t,n){var r=t._node,i=e.Node.create(n);r.parentNode.replaceChild(i._node,r),t._node=i._node}function b(e,t){var n=e&&t&&a(e.getData)&&e.getData(t);return n&&u.strParseKV(n)||{}}function w(e){var t,r,i;return e._isYUIModel?t="data-model":e._isYUIModelList&&(t="data-list"),r=e.constructor.NAME,i=e.get&&e.get("id"),!t||!r||!i?n:"["+t+'="'+r+"@"+i+'"]'}function E(e,t,n){if(!e)return;var r;switch(e.get("tagName")){case"A":e.set("href",n);break;case"IMG":e.set("src",n);break;case"INPUT":r=e.get("type"),"radio"===r||"checkbox"===r?n===e.get("value")?e.setAttribute("checked","checked"):e.removeAttribute("checked"):e.set("value",n);break;case"SELECT":e.set("value",n);break;default:e.setHTML(n)}}function S(t,n,r){var i=[];return t&&n&&t.all("[data-attr]").each(function(s){var o=s.getData("attr"),f=o.split("."),l=f.shift(),c=f.join("."),h,p;e.Object.owns(n,l)&&(h=c?u.objGet(n[l].prevVal,c):n[l].prevVal,p=c?u.objGet(n[l].newVal,c):n[l].newVal,u.objEqual(h,p)||(a(r)&&r(s,o,h,p),i.push(s)))}),i}function x(t,n){var r=n&&n["class"];t&&t.length&&r&&(t=e.all(t),t.addClass("SlowTrans").addClass(r),window.setTimeout(function(){try{t.removeClass(r)}catch(e){}},500))}function T(t){if(t._transaction&&t._transaction._mjatabind_processed)return;t._transaction&&(t._transaction._mjatabind_processed=!0);var n=e.Object.some(t.changed,function(e){return!u.objEqual(e.prevVal,e.newVal)});if(!n)return;var r=t.target,i=r.get("id"),s=v[i];s?v[i].changed=e.merge(s.changed,t.changed):v[i]={changed:t.changed,target:t.target},m||N()}function N(){m=window.setTimeout(function(){e.each(v,function(e){var n=e.target;o.eachBinding(n,function(i,s){var o=b(s,t),u=b(s,"bindcfg"),a=i.getContext(),f=i.options.callback||d,c;o.change?l(o.change,n.toJSON(),a,function(n,r){if(n){f(n);return}u.replace==="true"?y(s,r):g(s,r),c=S(s,e.changed),x(c,u),f()}):(c=S(s,e.changed,function(r,i,s,o){var u=b(r,t);u.change?l(u.change,n.toJSON([i]),a,function(t,n){if(t){f(t);return}g(r,n),f()}):(E(r,s,o),f())}),x(c,u))})}),m=null,v={}},250)}function C(e){var n=e.target,r=e.model,i,s,u;a(r.get)?s=r.get("id"):(i=n.model.prototype.idAttribute||"id",s=r[i]),u=w(r);if(!u)return;o.eachBinding(n,function(r,i){var s,o=r.options.callback||d;i.all(u).remove(!0),n.isEmpty()&&(s=b(i,t))&&s.placeholder?l(s.placeholder,{},r.getContext(),function(t,n){t||g(i,n),o()}):o()})}function k(e){var n=e.target,r=e.model,i=e.index;o.eachBinding(n,function(s,o){var u=b(o,t);if(!u.add)return;var f=a(r.toJSON)?r.toJSON():r,c=s.options.callback||d;l(u.add,f,s.getContext(),function(t,r){if(t){c(t);return}if(n.size()===1)g(o,r);else{var s=o.get("children").item(i);s?o.insertBefore(r,s):o.append(r)}c()})})}function L(e){var n=e.target;o.eachBinding(n,function(r,i){var s=b(i,t),o=r.options.callback||d,u=r.getContext();if(s.reset){l(s.reset,n.toJSON(),u,function(t,n){if(t){o(t);return}g(i,n),o()});return}if(n.isEmpty()){s.placeholder?l(s.placeholder,{},u,function(t,n){if(t){o(t);return}g(i,n),o()}):(g(i,""),o());return}})}function A(t,n,r){this.key=t,this.node=n||"body",this.options=r||{},this.guid=e.guid()}var t="tmpl",n=null,r=e.Lang,i=e.Mjata,s=i.ModelStore,o,u=i.Util,a=r.isFunction,f=r.isString,l=i.Template.render,c=e.Object.size,h={},p=!1,d=function(){},v={},m;A.prototype={getContext:function(){return a(this.options.ctx)?this.options.ctx.call():this.options.ctx||{}},isValid:function(){return f(this.node)||!!this.node._node},unbind:function(){this.node=n,this.options=n,h[this.key]&&(delete h[this.key][this.guid],c(h[this.key])===0&&delete h[this.key])}},o={_createBindKey:function(e){if(!e)return n;if(f(e))return e;if(a(e))return e.NAME||n;var t=e.constructor.NAME,r;return t?(a(e.get)&&(r=e.get("id")),r?t+"_"+r:t):n},_init:function(){if(p)return;s.after("*:change",T),s.after("*:remove",C),s.after("*:reset",L),s.after("*:add",k),p=!0},bind:function(e,t,r){var i=this._createBindKey(e),s;return i?(h[i]||(h[i]={}),s=new A(i,t,r),h[i][s.guid]=s,this._init(),s):n},unbind:function(){},isBound:function(e){var t=this._getBindings(e);return t&&c(t)>0},_getBindings:function(e){if(!e)return{};var t=this._createBindKey(e),n;return t?h[t]&&c(h[t])>0?h[t]:(n=e.constructor.NAME,n&&h[n]||{}):{}},eachBinding:function(t,r){if(!a(r))return;var i,s=w(t),o=[];if(!s)return;i=this._getBindings(t),e.each(i,function(t){if(t.isValid()){var i=e.one(t.node);i.all(s).each(function(e){r.call(n,t,e)}),i.test(s)&&r.call(n,t,i)}else o.push(t)}),e.each(o,function(e){e.unbind()})}},e.namespace("Mjata.Bind").Model2Dom=o},"@VERSION@",{requires:["mjata-model-store","mjata-template","mjata-util","node-base","node-core"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("cache-base",function(e,t){var n=e.Lang,r=e.Lang.isDate,i=function(){i.superclass.constructor.apply(this,arguments)};e.mix(i,{NAME:"cache",ATTRS:{max:{value:0,setter:"_setMax"},size:{readOnly:!0,getter:"_getSize"},uniqueKeys:{value:!1},expires:{value:0,validator:function(t){return e.Lang.isDate(t)||e.Lang.isNumber(t)&&t>=0}},entries:{readOnly:!0,getter:"_getEntries"}}}),e.extend(i,e.Base,{_entries:null,initializer:function(e){this.publish("add",{defaultFn:this._defAddFn}),this.publish("flush",{defaultFn:this._defFlushFn}),this._entries=[]},destructor:function(){this._entries=[]},_setMax:function(e){var t=this._entries;if(e>0){if(t)while(t.length>e)t.shift()}else e=0,this._entries=[];return e},_getSize:function(){return this._entries.length},_getEntries:function(){return this._entries},_defAddFn:function(e){var t=this._entries,r=e.entry,i=this.get("max"),s;this.get("uniqueKeys")&&(s=this._position(e.entry.request),n.isValue(s)&&t.splice(s,1));while(i&&t.length>=i)t.shift();t[t.length]=r},_defFlushFn:function(e){var t=this._entries,r=e.details[0],i;r&&n.isValue(r.request)?(i=this._position(r.request),n.isValue(i)&&t.splice(i,1)):this._entries=[]},_isMatch:function(e,t){return!t.expires||new Date<t.expires?e===t.request:!1},_position:function(e){var t=this._entries,n=t.length,r=n-1;if(this.get("max")===null||this.get("max")>0)for(;r>=0;r--)if(this._isMatch(e,t[r]))return r;return null},add:function(e,t){var i=this.get("expires");this.get("initialized")&&(this.get("max")===null||this.get("max")>0)&&(n.isValue(e)||n.isNull(e)||n.isUndefined(e))&&this.fire("add",{entry:{request:e,response:t,cached:new Date,expires:r(i)?i:i?new Date((new Date).getTime()+this.get("expires")):null}})},flush:function(e){this.fire("flush",{request:n.isValue(e)?e:null})},retrieve:function(e){var t=this._entries,r=t.length,i=null,s;if(r>0&&(this.get("max")===null||this.get("max")>0)){this.fire("request",{request:e}),s=this._position(e);if(n.isValue(s))return i=t[s],this.fire("retrieve",{entry:i}),s<r-1&&(t.splice(s,1),t[t.length]=i),i}return null}}),e.Cache=i},"3.18.1",{requires:["base"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("cache-offline",function(e,t){function n(){n.superclass.constructor.apply(this,arguments)}var r=null,i=e.JSON;try{r=e.config.win.localStorage}catch(s){}e.mix(n,{NAME:"cacheOffline",ATTRS:{sandbox:{value:"default",writeOnce:"initOnly"},expires:{value:864e5},max:{value:null,readOnly:!0},uniqueKeys:{value:!0,readOnly:!0,setter:function(){return!0}}},flushAll:function(){var e=r,t;if(e)if(e.clear)e.clear();else for(t in e)e.hasOwnProperty(t)&&(e.removeItem(t),delete e[t])}}),e.extend(n,e.Cache,r?{_setMax:function(e){return null},_getSize:function(){var e=0,t=0,n=r.length;for(;t<n;++t)r.key(t).indexOf(this.get("sandbox"))===0&&e++;return e},_getEntries:function(){var e=[],t=0,n=r.length,s=this.get("sandbox");for(;t<n;++t)r.key(t).indexOf(s)===0&&(e[t]=i.parse(r.key(t).substring(s.length)));return e},_defAddFn:function(e){var t=e.entry,n=t.request,s=t.cached,o=t.expires;t.cached=s.getTime(),t.expires=o?o.getTime():o;try{r.setItem(this.get("sandbox")+i.stringify({request:n}),i.stringify(t))}catch(u){this.fire("error",{error:u})}},_defFlushFn:function(e){var t,n=r.length-1;for(;n>-1;--n)t=r.key(n),t.indexOf(this.get("sandbox"))===0&&r.removeItem(t)},retrieve:function(e){this.fire("request",{request:e});var t,n,s;try{s=this.get("sandbox")+i.stringify({request:e});try{t=i.parse(r.getItem(s))}catch(o){}}catch(u){}if(t){t.cached=new Date(t.cached),n=t.expires,n=n?new Date(n):null,t.expires=n;if(this._isMatch(e,t))return this.fire("retrieve",{entry:t}),t}return null}}:{_setMax:function(e){return null}}),e.CacheOffline=n},"3.18.1",{requires:["cache-base","json"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("querystring-parse",function(e,t){var n=e.namespace("QueryString"),r=function(t){return function r(i,s){var o,u,a,f,l;return arguments.length!==2?(i=i.split(t),r(n.unescape(i.shift()),n.unescape(i.join(t)))):(i=i.replace(/^\s+|\s+$/g,""),e.Lang.isString(s)&&(s=s.replace(/^\s+|\s+$/g,""),isNaN(s)||(u=+s,s===u.toString(10)&&(s=u))),o=/(.*)\[([^\]]*)\]$/.exec(i),o?(f=o[2],a=o[1],f?(l={},l[f]=s,r(a,l)):r(a,[s])):(l={},i&&(l[i]=s),l))}},i=function(t,n){return t?e.Lang.isArray(t)?t.concat(n):!e.Lang.isObject(t)||!e.Lang.isObject(n)?[t].concat(n):s(t,n):n},s=function(e,t){for(var n in t)n&&t.hasOwnProperty(n)&&(e[n]=i(e[n],t[n]));return e};n.parse=function(t,n,s){return e.Array.reduce(e.Array.map(t.split(n||"&"),r(s||"=")),{},i)},n.unescape=function(e){return decodeURIComponent(e.replace(/\+/g," "))}},"3.18.1",{requires:["yui-base","array-extras"]});
YUI.add("td-videoplayer-util",function(e){"use strict";var t=window&&window.location.search.indexOf("debug_idx=1")!==-1,n=50,r=[],i={},s=null,o=0;e.namespace("TD.Applet").VideoplayerUtil=function(e){var t=this;t.instance=e&&e.instance},e.TD.Applet.VideoplayerUtil.prototype={fireTestEvent:function(t,n){var r=this;n=n||null,r.isSwitchEnabled("isTestModeEnabled")&&(e.Global.publish(t,{fireOnce:!0,async:!0}),e.Global.fire(t,n))},getShareUrl:function(t,n){var r=this,i=t instanceof e.Node,s,o,u,a,f,l,c;return r.isFeatureEnabled("useCanonicalShareUrl")?i?(o=r.getVideoFromCache(t.getData("uuid")),u=o&&o.canonical_url):u=t&&t.canonical_url:(i?(s=t.one("a"),a=s&&s.getData("alias"),u=s&&s.get("href")):(a=t.url_alias,u=t.canonical_url),f=window.location.host,l=window.location.protocol,c=window.location.pathname,c&&c.indexOf("/video/")===0?u=l+"//"+f+"/video/"+a+".html":r.isFeatureEnabled("useLiveVanityPath")&&n?u=l+"//"+f+"/"+n+"?plVideo="+a:n?u=l+"//"+f+"/"+n+"/"+a+".html":u=l+"//"+f+"/"+a+".html"),u},getEmbedCodeAndShareLink:function(e){if(!e)return;var t=this,n=t.getAppletData(),r=n&&n.intl,i=r&&r.messages&&r.messages.NO_EMBED_RIGHTS||"sorry this video cannot be embedded",s;return s=t.getShareUrl(e)||e.share_link,e.isEmbeddable&&(i='<iframe width="640" height="360" scrolling="no" frameborder="0" src="'+s+'?format=embed" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" '+'allowtransparency="true"></iframe>'),{shareLink:s,embedCode:i}},getVideoFromCache:function(e){var t=null,n,i;if(r)for(n=0,i=r.length;n<i;n++)r[n].id===e&&(t=r[n],n=i);return t},getVideo:function(t,n,r){var i=this,s,o,u;!t;if(r){o=i.getVideoFromCache(t);if(o)r(o);else{u=new e.TD.Applet.VideoPlaylistModel;var a=i.getAppletData();a.apiURL&&(u.syncContext.config.xhr=a.apiURL),s={resourceName:"video_metadata",view:"full",show_channels:1,video_id:t,vanityPath:n||"",cacheVideos:!0,VideoplayerUtil:i},u.load(s,function(e,t){e||!t,r(t)})}}},vpUrlOverride:function(){function i(t){var n=window.location.search.slice(1),r=e.QueryString.parse(n);return r[t]}var t,n,r;return r=i("_vp_src_url"),t=window.document.createElement("a"),t.href=r,n=t.hostname,!n||!n.match(/.*\.yahoo.com$/)&&!n.match(/.*\.yimg.com$/)?null:r},cacheVideos:function(t){if(!t)return;var i,s,o,u;if(e.Lang.isArray(t.videos))t=t.videos;else{if(!(t instanceof e.TD.Applet.VideoPlaylistModel))return;t=t.get("videos")}if(t){u=t.length,o=r.length,o>=n&&(r=r.slice(u,o));for(s=0;s<u;s++)i=t[s],i.id&&r.push(i)}},updateCurVideoIdx:function(e){if(!e)return;var t;e==="increment"?o+=1:(t=parseInt(e.getData("idx"),10),o=t)},getCurVideoIdx:function(){return o},setAppletData:function(e){e&&(i=e)},getAppletData:function(){return i},getResourceName:function(){var e="single_channel";return i&&i.channel_alias&&i.channel_alias==="related-videos"&&(e="related_channel"),e},getApiConfig:function(t){var n=this,r=t||{},s=n.getApiSourceType();return r.resourceName=t.overrideResourceName?t.resourceName:n.getResourceName(),r.VideoplayerUtil=n,r.image_sizes=i&&i.exposed_config&&i.exposed_config.imageSizes,r.query=i&&i.query&&i.query.query,s&&(r.source_type=s),e.merge(i&&i.channel_params,r)},getRapid:function(){return window.YMedia&&window.YMedia.rapid},rapidElmtFromShareType:function(e){switch(e){case"tumblr":return"sh-tbr";case"mtf":return"sh-eml";case"twitter":return"sh-tw";case"facebook":return"sh-fb";default:return null}},rapidBeaconClickFromNode:function(e,t){var n=this,r,i,s,o,u={};r=e.getData("ylk");if(!r)return;t=t||n.getRapid();if(!t)return;i=e.getData("action"),s=e.getData("action-outcome"),o=r.split(";");for(var a=0;a<o.length;a++){var f=o[a].split(":");u[f[0]]=f[1]}u.action=i,t.beaconClick(u.sec,u.slk,u.cpos,u,s)},fireRapidBeacons:function(t){if(!t)return;var n=this.getRapid(),r=t.sec||"cinematron",i=t.slk||"",s=t.outcome||"",o=t.pos||"",u={t1:"a3",t2:"chnl",t3:"main-crsl",elm:"btn"},a=t.rapidAttrs?e.merge(t.rapidAttrs,u):u;n&&n.beaconClick&&n.beaconClick(r,i,o,a,s)},isFeatureEnabled:function(e){var t=i&&i.exposed_config;if(!t||!e)return;return t[e]||t.features&&t.features[e]},isSwitchEnabled:function(e){var t=i&&i.switches;if(!t||!e)return;return t[e]},initLocalCache:function(){s||(s=new e.CacheOffline({sandbox:"td-applet-videoplayer-local-cache",uniqueKeys:!0}))},setItemInLocalCache:function(e,t){var n=this;if(!e||!t)return;n.initLocalCache(),s&&s.add(e,t)},getItemFromLocalCache:function(e){var t=this,n=null;if(!e)return;return t.initLocalCache(),s&&(n=s.retrieve(e)),n},getVideos:function(n,r,i){var s=this,o={count:i.batchCount||10,channel_alias:i.channelAlias,vanityPath:i.vanityPath,cacheVideos:!0,VideoplayerUtil:s};n=e.merge(o,n),i.dataModel.load(s.getApiConfig(n),function(e,s){if(e){r(e);return}var o=s&&s.videos&&s.videos.length,u,a,f;if(o<=0){r(e);return}a=s.videos,s.videos=[],f=s,u={videos:a,channelData:f,startIdx:n.start||0,mode:i.mode,submode:i.submode,config:i.exposedConfig,intl:i.intl,debugIdx:t},r(e,u)})},getApiSourceType:function(){var e;return i&&i.playlist_data&&i.playlist_data["video-playlist"]&&i.playlist_data["video-playlist"].source_type&&(e=i.playlist_data["video-playlist"].source_type),e},isUserSignedInWithPartner:function(t){var n=e&&e.Video&&e.Video.AppUtil,r=t&&n&&n.isSignedInPartner(t);return r}}},"@VERSION@",{requires:["node","cache-offline","querystring"]});
YUI.add("video-applet-player-manager",function(e){"use strict";var t="AppletPlayerManager",n="#ym-player",r="#ym-player2",i=null,s="player-manager:",o="",u=s+"initialize-complete",a=s+"continuous-play-video-changed",f=s+"new-video-started",l=s+"near-video-end",c=s+"video-changed",h=s+"playback-complete",p=s+"ad-start",d=s+"first-playback-started",v=s+"new-playback-started",m=s+"playback-pause",g=s+"player-interacted",y=s+"player-ready",b=s+"player-rendered",w=s+"video-loaded",E=s+"fullscreen-change",S=s+"add-to-playlist",x=s+"get-player-manager",T=s+"prevent-cont-play",N=s+"allow-cont-play",C=s+"same-video-played",k="media:remove-node",L={},A={},O=[],M=[],_=!1,D=null,P=!1,H=!1,B=!0,j={},F=!1,I=typeof window.performance=="object"&&window.performance.timing&&window.performance.timing.navigationStart,q=e.Array,R=e.Lang,U=function(t,n){return e.Global.fire(t,n)},z=function(t,n,r){return e.Global.on(t,n,r)},W=function(t,n,r){return e.Global.once(t,n,r)},X="test:expose-sapi-data",V="test:share-url";e.namespace("Video")[t]=function(e,t){var n=this,r=e||{pageSpaceId:"",comscoreC4:"",expName:"",expType:"",env:"prod",YVAP:{timeout:""}},i,s,o;n.appletData=t,i=typeof window.performance=="object"&&window.performance.timing&&window.performance.timing.navigationStart,i&&(o=document.location.protocol==="https:"?"https://z.analytics.yahoo.com/p.pl":"http://z.analytics.yahoo.com/p.pl",s=["dpid={YWA_DPID}","vp={PLAYER_INT32_GUID}","vpm={MASTERPLAYER_INT32_GUID}","vid={VIDEO_CLIP_ID}","vn={VIDEO_TITLE}","vx=10","cf49="+((new Date).getTime()-i),"cf63="+r.autoplay,"vpl={PLAYER_LOCATION}","cf201="+r.site,"cf202="+r.region,"cf203="+r.lang,"cf208={LICENSE_ID}","vsn={SHOW_NAME}","vss={EVENT_BEGIN}","vse={EVENT_END}","cf58={MEDIA_META_TAGS}","vb={PAGE_TITLE}","vf={PAGE_URL}","ve={PAGE_REFERRER}","rn={RANDOM_VALUE}"],r.beacons=[{urlTemplate:o+"?a=1000115488662&"+s.join("&"),events:[{name:"PLAYER_LOADED"}]}]),n.playerConfig=r},e.Video[t].prototype={videoplayer:null,initialize:function(t){var n=this;n.instance=t&&t.instance,n.vpUtil=t&&t.VideoplayerUtil,t&&t.INSTANCE_PREFIX&&(o=t.INSTANCE_PREFIX),e.Global.publish(w,{broadcast:2,fireOnce:!0}),n.createPlayer(t),n.subscriptions=[],n.addListeners(),e.Video.Metadata&&!n.playerConfig.disableMjata&&n.initMetadataModel(),U(u,{playerManager:n,instance:n.instance}),n.vpUtil&&n.vpUtil.fireTestEvent(X,{mediaItems:t.mediaItems})},createPlayer:function(t){var i=this,s=t.mediaItems&&i.parseItems(t),o=s&&s.length>0&&s[0].id,u=i.playerConfig,a=u.disable_vp_beacons==="1",f=t&&t.ymPlayerNode,l=t.renderTimeout&&parseInt(t.renderTimeout,10)||10,c;u.playlist.mediaItems=s,t.chromeless&&(u.chromeless=!0),e.Array.each(u.playlist.mediaItems,function(e){e.images&&(e.images.large=e.images.thumbnail)}),o&&s&&s.length===1&&(L[o]=s[0],M[o]=s[0]),u.hasOwnProperty("disable_vp_beacons")&&delete u.disable_vp_beacons,c=t.liveplayer?e.one(r):f||e.one(n),i.playerContainer=c,c.setHTML(""),I&&(u.pageLatency={pageReqToPlayerInitTime:(new Date).getTime()-I}),i.videoplayer=new e.VideoPlatform.VideoPlayer(u),setTimeout(function(){i.videoplayer.render(c),U(b,{playerManager:i,instance:i.instance})},l),i.initPlayerEvents(i.videoplayer),a&&(i.videoplayer._metrics=null),U(w,{id:o,instance:i.instance})},addListeners:function(){var e=this,t,n,r;e.playerConfig.continuousPlay&&e.addContPlayListeners(),t=z(S,e.addItemsToPlaylist,e),n=z(x,e.getPlayerManager,e),e.subscriptions.push(t,n),r=W(k,e.cleanupGlobalSubscriptions,e),e._listeners.push(r)},addContPlayListeners:function(){var e=this,t,n;t=z(T,e.preventContinuousPlay,e),n=z(N,e.allowContinuousPlay,e),e.subscriptions.push(t,n)},initMetadataModel:function(){var t=new e.Video.Metadata({id:"VideoMetadata"});e.Mjata.ModelStore.add(t),e.Mjata.Bind.Model2Dom.bind(t,".vp-meta"),i=t},initPlayerEvents:function(t){var n=this,r=[],i,s,o,u,a,f,l,c=["ctrl-Seek","ctrl-Pause","videoScreen"],p;t&&t._instanceConfig&&(a=t._instanceConfig.autoplay,f=t._instanceConfig.mute),e.Global.publish(y,{broadcast:2,fireOnce:!0}),p=e.Global.on("player-manager:pause-all",n.playerControlsPause,n),n._listeners.push(p),a?(o=t.on("adProgress",function(e){n.timedListenerCallback(e,r)},n),i=t.on(["adError","adNone"],function(){o.detach()}),s=t.on("playbackTimeUpdate",function(e){n.timedListenerCallback(e,r)},n),f&&(l=t.on(["adStart","playbackStart"],function(){t.controls.setMute(!0)})),r=[o,i,s,l]):u=t.on(e.VideoPlatform.API_Events.PLAYER_READY,function(){P=!0,U(y,{playerManager:n,instance:n.instance});if(!u)return null;u.detach(),u=null},n),t.on(e.VideoPlatform.API_Events.PLAYER_FULLSCREEN_CHANGE,function(e){U(E,{fullscreen:e.details[0],instance:n.instance})}),t.on(e.VideoPlatform.API_Events.PLAYBACK_COMPLETE,function(){U(h,{instance:n.instance})}),t.on(e.VideoPlatform.API_Events.UI_INTERACT,function(e){var t,r;if(e&&e.srcElement&&c.indexOf(e.srcElement)!==-1){e.srcElement==="ctrl-Seek"&&(F=!0);for(t in j)r=j[t],n.trackAlmostEndOfCurrentVideo(r&&r.params)}U(g,{evt:e,instance:n.instance})}),t.on("playlistPositionChange",n.onPlaylistPositionChanged,n),t.once("playbackStart",function(){B=!1,U(d,{instance:n.instance})}),t.on(e.VideoPlatform.API_Events.PLAYBACK_PAUSE,function(){U(m,{instance:n.instance})})},handleReinit:function(){B=!0},onPlaylistPositionChanged:function(){var e=this,t=e.getCurrentPlaylistItem(),n=e.getNextPlaylistItem(),r=n&&n.id||null,s=!B&&!H,o=e.videoplayer;B=!1,H=!1,e.playbackStarted&&e.playbackStarted.detach(),e.actualPlaybackStarted&&e.actualPlaybackStarted.detach(),e.adStarted=o.on("adStart",function(){U(p,{instance:e.instance}),e.adStarted.detach(),e.adStarted=null}),e.playbackStarted=o.on(["adStart","playbackStart"],function(){U(v,{continuousPlay:s,instance:e.instance}),e.playbackStarted.detach(),e.playbackStarted=null},e),e.actualPlaybackStarted=o.on("playbackStart",function(){var t=e.getCurrentPlaylistItem();U(f,{continuousPlay:s,instance:e.instance,item:t}),F=!1,e.trackAlmostEndOfCurrentVideo(),e.correlatePVs(),e.actualPlaybackStarted.detach(),e.actualPlaybackStarted=null}),i&&e.updateMetadataModel
(t),t.id&&(U(c,{id:t.id,video:t,nextId:r,continuousPlay:s,instance:e.instance}),s&&U(a,{id:t.id,nextId:r,continuousPlay:s,instance:e.instance}))},correlatePVs:function(){var e=this,t=e.getCurrentPlaylistItem(),n=t&&t.id,r=window&&window.YMedia&&window.YMedia.rapid;r&&typeof r.beaconEvent=="function"&&t&&r.beaconEvent("secview",{sec:"video-play",g:n})},trackAlmostEndOfCurrentVideo:function(e){var t=this,n=t.getCurrentPlaylistItemDuration(),r=e&&e.beforeSecs||Math.max(Math.floor(n*.1),30),i=e&&e.timeoutKey||"default",s=j[i],o=s&&s.timeout,u,a;o&&clearTimeout(o),j[i]={params:e},s=j[i];if(F||n===0)return;u=parseInt(t.getTimeRemaining(t.videoplayer),10),a=e&&e.callback||function(){U(l,{instance:t.instance})},u<=r?(a(),delete j[i]):(u-=r,s.timeout=setTimeout(function(){parseInt(t.getTimeRemaining(t.videoplayer),10)<=r?(a(),delete j[i]):t.trackAlmostEndOfCurrentVideo(e)},u*1e3))},updateMetadataModel:function(e){var t=this,n="",r="",s="",o="",u="",a="",f="",l="",c;e&&e.title?(s=e.clipDuration||"",f=e.genre&&'<span class="Fw-b">Genre: </span>'+e.genre,e.provider&&(r=e.provider.url,n=e.provider.name||"",r&&n&&(n='<a href="'+r+'">'+n+"</a>")),e.credits&&(o=e.credits.main_artists,o=o&&o+": "||"",a=e.credits.director&&'<span class="Fw-b">Director: </span>'+e.credits.director,l=e.credits.featured_artists&&'<span class="Fw-b">Featured Artists: </span>'+e.credits.featured_artists),u=e.title||"",u=u?o+u:o,i.setAttrs({title:u,description:e.description||"",show_name:n,duration:s&&s+" mins",attribution:e.attribution||e.copyright||"",genre:f,director:a,featured_artists:l})):(c=z(v,function(e){if(!t.validateInstance(e))return;t.updateMetadataModel(t.getCurrentPlaylistItem()),c.detach(),c=null}),t._listeners.push(c))},parseItems:function(t){var n=this,r=[],i=t&&t.mediaItems;!D&&e.VideoPlatform&&e.VideoPlatform.LegoCMS&&(D=new e.VideoPlatform.LegoCMS);try{D&&i&&i.query&&i.query.results&&i.query.results.mediaObj?e.each(i.query.results.mediaObj,function(e){e=D.parseMediaObj(e),e=n.addShareData(e),r.push(e)},this):r.push(i)}catch(s){}return r},timedListenerCallback:function(e,t){var n=this,r=t||[];P?n.cleanupListeners(r):e&&(e.details&&e.details[0]>=2||e.position&&e.position>1)&&(P=!0,U(y,{playerManager:n,instance:n.instance}),n.cleanupListeners(r))},cleanupGlobalSubscriptions:function(t){var n=this,r=t.node,i=e.one("#ym-player"),s=n.subscriptions||[];r.contains(i)&&!r.hasClass("main-view")&&(n.cleanupListeners(s),s=null)},cleanupListeners:function(t){var n=e.Lang.isArray(t)?t:[],r=n.length,i;if(r>0){for(i=0;i<r;i++)n[i]&&(n[i].detach(),n[i]=null);t=null}},fireSelectedChangeEvent:function(e){var t=this;e&&!H?U(a,{id:e,instance:t.instance}):H=!1},addShareData:function(e,t){if(!e)return;var n=this,r=e.get!==undefined,i=r?e.get("shareUrl"):e.shareUrl,s=r?e.get("embeddable"):e.embeddable,o=n.appletData.exposed_config&&n.appletData.exposed_config.modeExperience==="screen-web",u=n.appletData.exposed_config&&n.appletData.exposed_config.embedded,a;return i=i&&!t?n.rebuildUrl(i):(o||u)&&t?n.rebuildUrl(t):t,n.vpUtil&&n.vpUtil.isFeatureEnabled("useCanonicalShareUrl")&&(i=e&&e.shareUrl),i&&(a='<iframe width="640" height="360" scrolling="no" frameborder="0" src="'+i+'?format=embed" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" '+'allowtransparency="true"></iframe>',r&&s?(e.set("embedCode",a),e.set("shareUrl",i)):(e.embedCode=a,e.shareUrl=i),n.vpUtil&&n.vpUtil.fireTestEvent(V,{url:e.shareUrl||e.get("shareUrl"),embedCode:e.embedCode||e.get("embedCode")})),e},getPlayerManager:function(e){var t=this;if(!t.validateInstance(e))return;return e&&e.callback&&(e.scope?e.callback.apply(e.scope,[t]):e.callback(t)),t},getPlayerInstance:function(){var e=this;return e.videoplayer},overrideDurationForOverlayAds:function(e){var t=this;t.getPlayerInstance().overrideDurationForOverlayAds&&t.getPlayerInstance().overrideDurationForOverlayAds(e)},displayPlayerControls:function(e){var t=this;t.getPlayerInstance().controls.displayPlayerControls&&t.getPlayerInstance().controls.displayPlayerControls(e)},getFullscreen:function(){var e=this;return e.getPlayerInstance().controls.getFullscreen()},setFullscreen:function(e){var t=this;t.getPlayerInstance().controls.setFullscreen(e)},setVolume:function(e){var t=this;t.getPlayerInstance().controls.setVolume(e)},getVolume:function(){var e=this;return e.getPlayerInstance().controls.getVolume()},getPlaylistObject:function(){var e=this,t=e.getPlayerInstance(),n=t&&t.playlist?t.playlist:!1;return n},getPlaylistInstance:function(){var e=this,t=e.getPlayerInstance(),n=t&&t.playlist?t.playlist:!1,r=!1;return n&&(r=n.get()),r},getCurrentPlaylistItem:function(){var e=this,t=e.getPlaylistObject();if(t)return t.getCurrentItem()},getCurrentPlaylistItemDuration:function(){var e=this,t=e.getPlaylistObject(),n=t&&t.getCurrentItem(),r=0,i,s,o,u;return n&&(r=n.duration,i=n.clipDuration,r===0&&i&&(s=i.split(":"),s&&(o=s[0]&&s[0]*60,u=s[1]&&s[1],r=parseInt(o,10)+parseInt(u,10)))),r},getNextPlaylistItem:function(){var e=this,t=e.getPlaylistObject(),n,r;if(t)return n=t.getPosition(),r=n+1,t.getItem(r)},getCurrentPlaylistPosition:function(){var e=this,t=e.getPlaylistObject();if(t)return t.getPosition()},getPlaylistItemByPosition:function(e){var t=this,n=t.getPlaylistObject(),r=typeof e!="undefined";if(n&&r)return n.getItem(e)},clearPlaylist:function(){var e=this,t=e.getPlaylistObject();t&&t.clear()},setPlaylistPositionByIndex:function(e){var t=this,n=t.getPlaylistObject();H=!0,n&&n.setPosition(e)},getPlaylistPositionById:function(e){var t=this,n=0,r;for(n;n<t.getPlaylistObject().getSize();n++){r=t.getPlaylistItemByPosition(n);if(r.id===e)return n}return-1},setPlaylistPositionById:function(e){var t=this,n=t.getPlaylistObject(),r=t.getCurrentPlaylistPosition(),i=t.getCurrentPlaylistItem(),s=i&&i.id,o;if(n){if(s===e)return t.playerControlsPlay(),U(C,e),!0;H=!0,n.setPositionById(e),o=t.getCurrentPlaylistPosition();if(o===r)return e===s}return!0},addIdToPlaylist:function(e){var t=this,n;t.isIdInPlaylist(e)||
(n={id:e},t.addItemToPlaylist(n))},isIdInPlaylist:function(e){var t=this,n=0,r;for(n;n<t.getPlaylistObject().getSize();n++){r=t.getPlaylistItemByPosition(n);if(r.id===e)return!0}return!1},fetchItems:function(t){var n=this,r=n.getPlaylistObject(),i,s;setTimeout(function(){r.fetchMetaData(t,{success:function(t){n.appletData&&n.appletData.yvap_bootstrap&&e.Array.each(t,function(e){i||(e._getAttr("adData.content_provider_data")?(i="adData.content_provider_data.rules",s=n.appletData.yvap_bootstrap.rules):(i="adData.content_provider_data",s=n.appletData.yvap_bootstrap)),e._setAttr(i,s)}),r.updatePlayerData(t),n.addItemsToPrefetchQueue(t),n.flushPlaylistBuffer()},failure:function(){}})},1e3)},addItemsToPrefetchQueue:function(e){_=!0,R.isArray(e)&&q.each(e,function(e){var t=e&&(e.id||e.get("id"));t&&t!=="undefined"&&!M[t]&&(M[t]=e)}),_=!1},flushPlaylistBuffer:function(){var e=this,t=_?1e3:1;setTimeout(function(){R.isArray(O)&&(q.each(O,function(t){var n=t&&(t.id||t.get("id"));M&&M[n]?e.addItemToPlaylist(M[n]):e.addItemToPlaylist(t)}),O=[])},t)},addItemsToPlaylist:function(e){var t=this,n=t.getPlaylistObject(),r=[],i;n&&e&&R.isArray(e)&&(q.each(e,function(e){var t=e&&(e.id||e.get("id")),n=t&&(e.shareUrl||e.get("shareUrl"));A[t]||(A[t]=n),M[t]||r.push(e),O.push(e)}),i=function(){var e=t||this;r.length>0?e.fetchItems(r):e.flushPlaylistBuffer()},t.deferredPrefetch&&t.prefetchTrigger?(delete t.deferredPrefetch,t.addDeferredPrefetchListener(t.prefetchTrigger,i)):i())},addDeferredPrefetchListener:function(t,n){var r=this,i;switch(t){case"click":e.once("click",n,r.appContainer,r);break;case"hover":i=e.on("hover",function(){n.call(r),i.detach(),i=null},null,r.appContainer,r),r._listeners.push(i);break;case"viewport":break;default:}},addItemToPlaylist:function(e){var t=this,n=t.getPlaylistObject(),r,i,s;n&&e&&(r=e&&(e.id||e.get&&e.get("id")),i=A&&A[r]||!1,s=t.addShareData(e,i),L[r]=s,n.addItem(s))},removePlaylistItem:function(e){var t=this,n=t.getPlaylistObject(),r=typeof e!="undefined";n&&r&&n.removeItem(e)},removePlaylistItems:function(e,t){var n=this,r=t||1,i=n.getPlaylistObject(),s=typeof e!="undefined";i&&s&&i.removeItems(e,r)},removePlaylistItemById:function(e){var t=this,n=t.getPlaylistObject(),r=typeof e!="undefined";n&&r&&n.removeItem(e)},playerControlsMute:function(e){var t=this,n=t.getPlayerInstance();n&&n.controls&&n.controls.setMute(e)},playerControlsPlay:function(){var e=this,t=e.getPlayerInstance();t&&t.controls&&t.controls.play()},playerControlsPause:function(){var e=this,t=e.getPlayerInstance();t&&t.controls&&t.controls.pause()},playerControlsSeek:function(e){var t=this,n=t.getPlayerInstance();n&&n.controls&&n.controls.seek(e)},preventContinuousPlay:function(e){if(!this.validateInstance(e))return;var t=this,n=t.getPlayerInstance(),r=n&&n._model;r&&r.set("continuousPlay",!1)},allowContinuousPlay:function(e){if(!this.validateInstance(e))return;var t=this,n=t.getPlayerInstance(),r=n&&n._model,i=n&&n.playlist,s;r&&(r.set("continuousPlay",!0),i&&!1===r.get("isPlaying")&&r.get("isCompleted")===!0&&(s=i.getPosition(),i.setPosition(s+1)))},getTimeRemaining:function(e){var t=this,n=e||t.getPlayerInstance(),r=t.getCurrentPlaylistItemDuration(),i=n.controls.getCurrentTime();return r-i},getCustomControlsNode:function(){return!1},destroy:function(){var e=this,t=e.playerContainer;e.cleanupListeners(e._listeners),e.cleanupListeners(e.subscriptions),e.videoplayer.destroy(),t.detachAll()},validateInstance:function(e){var t=this,n=t.instance,r=e&&e.instance,i=!0;return n&&r&&(i=n===r),i},rebuildUrl:function(e){var t="",n,r;return e&&(n=e.split("/"),r=n[n.length-1],t=window.location.protocol+"//"+window.location.hostname+(window.location.pathname.indexOf("/video/")>=0?"/video/":"/")+r),t},_listeners:[]}},"@VERSION@",{requires:["event-base","event-custom","event-hover","io-base","json-parse","media-videoplayer-min?lang=en-US","mjata-model-store","mjata-bind-model2dom","node-event","td-videoplayer-util","videoplayer"]});
YUI.add("video-applet-nextgen-manager",function(e){"use strict";var t="AppletNextgenManager",n="#ym-player",r="#ym-player2",i=null,s="player-manager:",o=s+"initialize-complete",u=s+"continuous-play-video-changed",a=s+"player-video-change-requested",f=s+"new-video-started",l=s+"near-video-end",c=s+"video-changed",h=s+"playback-complete",p=s+"first-playback-started",d=s+"set-share-url",v=s+"new-playback-started",m=s+"ad-start",g=s+"player-interacted",y=s+"player-ready",b=s+"video-loaded",w=s+"fullscreen-change",E=s+"get-player-manager",S=s+"prevent-cont-play",x=s+"allow-cont-play",T=s+"same-video-played",N="media:remove-node",C="test:expose-sapi-data",k={},L={},A=!1,O=!1,M=!0,_=0,D=!1,P=typeof window.performance=="object"&&window.performance.timing&&window.performance.timing.navigationStart,H,B,j=e.Array,F=e.Object,I=e.Lang;e.namespace("Video")[t]=function(e){var t=this,n=e||{pageSpaceId:"",comscoreC4:"",expName:"",expType:"",env:"prod",YVAP:{timeout:""}};n.synd||(n.synd=""),t.playerConfig=n},e.Video[t].prototype={videoplayer:null,initialize:function(t){var n=this;B=e&&e.VideoPlatform&&e.VideoPlatform.API_Events,e.Global.publish(b,{broadcast:2,fireOnce:!0}),H=t&&t.VideoplayerUtil;if(!t||!t.instance)return;n.instance=t.instance,n.createPlayer(t),n.subscriptions=[],n.addListeners(),e.Video.Metadata&&!n.playerConfig.disableMjata&&n.initMetadataModel(),e.Global.fire(o,{playerManager:n,instance:n.instance}),e.Global.publish(C,{fireOnce:!0}),e.Global.fire(C,{mediaItems:t.mediaItems,instance:n.instance})},createPlayer:function(t){var i=this,s=t.mediaItems&&i.parseItems(t),o=s&&s.length>0&&s[0].id,u=i.playerConfig,a=t&&t.ymPlayerNode,f,l,h;u.playlist.mediaItems=s||[],t.chromeless&&(u.chromeless=!0),o&&s&&s.length===1&&(k[o]=s[0]),h=t.liveplayer?e.one(r):a||e.one(n),i.playerContainer=h,h.setHTML(""),P&&(u.pageLatency={pageReqToPlayerInitTime:(new Date).getTime()-P}),i.videoplayer=new e.VideoPlatform.VideoPlayer(u),i.initPlayerEvents(i.videoplayer),i.videoplayer.render(h.getDOMNode()),t.isReInit&&(f=i.getNextPlaylistItem(),l=f&&f.id||null,e.Global.fire(c,{id:o,video:i.getCurrentPlaylistItem(),nextId:l,continuousPlay:!1,instance:i.instance})),e.Global.fire(b,{id:o,instance:i.instance})},addListeners:function(){var t=this,n,r,i;t.playerConfig.continuousPlay&&t.addContPlayListeners(),n=e.Global.on(E,t.getPlayerManager,t),r=e.Global.on(d,t.setShareUrl,t),t.subscriptions.push(n,r),i=e.Global.on(N,t.cleanupGlobalSubscriptions,t),t._listeners.push(i)},addOnBeforeDestroyListener:function(e){var t=this;t._onBeforeDestroyListeners.push(e)},fireOnBeforeDestroyListeners:function(){var e=this;j.each(e._onBeforeDestroyListeners,function(t){t(e)})},addContPlayListeners:function(){var t=this,n,r;n=e.Global.on(S,t.preventContinuousPlay,t),r=e.Global.on(x,t.allowContinuousPlay,t),t.subscriptions.push(n,r)},initMetadataModel:function(){var t=new e.Video.Metadata({id:"VideoMetadata"});e.Mjata.ModelStore.add(t),e.Mjata.Bind.Model2Dom.bind(t,".vp-meta"),i=t},initPlayerEvents:function(t){var n=this,r=[],i,s,o,u,f,l,c,d=["ctrl-Seek","ctrl-Pause","videoScreen"],v,b,E;t&&t._instanceConfig&&(f=t._instanceConfig.autoplay,l=t._instanceConfig.mute),e.Global.publish(y,{broadcast:2,fireOnce:!0}),v=e.Global.on("player-manager:pause-all",n.playerControlsPause,n),n._listeners.push(v),f?(o=t.on(B.AD_PLAYBACK_PROGRESS,function(e){n.timedListenerCallback(e,r)},n),i=t.on(B.AD_NONE,function(){o.detach()}),s=t.on(B.PLAYBACK_TIME_UPDATE,function(e){n.timedListenerCallback(e,r)},n),l&&(c=t.on(B.PLAYBACK_START,function(){t.controls.setMute(!0)})),r=[o,i,s,c]):u=t.on(B.PLAYER_READY,function(){A=!0,e.Global.fire(y,{playerManager:n,instance:n.instance});if(!u)return null;u.detach(),u=null},n),t.on(e.VideoPlatform.API_Events.PLAYER_FULLSCREEN_CHANGE,function(){e.Global.fire(w,{fullscreen:t.controls.getFullscreen(),instance:n.instance})}),t.on(e.VideoPlatform.API_Events.PLAYBACK_COMPLETE,function(){e.Global.fire(h,{instance:n.instance})}),t.on(e.VideoPlatform.API_Events.UI_INTERACT,function(t){t&&t.srcElement&&d.indexOf(t.srcElement)!==-1&&(t.srcElement==="ctrl-Seek"&&(D=!0),n.trackAlmostEndOfCurrentVideo()),e.Global.fire(g,{evt:t,instance:n.instance}),t&&t.newVideo&&e.Global.fire(a,{uuid:t.newVideo,instance:n.instance})}),t.on(B.PLAYLIST_POSITION_CHANGE,n.onPlaylistPositionChanged,n),b=t.on(B.PLAYBACK_START,function(){M=!1,e.Global.fire(p,{instance:n.instance}),n.trackAlmostEndOfCurrentVideo(),b.detach()}),E=t.on(B.AD_PLAYBACK_START,function(){e.Global.fire(m,{instance:n.instance}),E.detach()})},handleReinit:function(){M=!0},onPlaylistPositionChanged:function(){var t=this,n=t.getPlaylistObject(),r=t.getCurrentPlaylistItem(),s=r&&r.id,o=t.getNextPlaylistItem(),a=!M&&!O,l,h,p,d=t.videoplayer;s||(s=n&&n.getCurrentItemId()),M=!1,O=!1,l=d.on(B.VIDEO_STARTED,function(){e.Global.fire(v,{continuousPlay:a,instance:t.instance}),l.detach()},t),p=d.on(B.AD_PLAYBACK_START,function(){e.Global.fire(m,{instance:t.instance}),p.detach()}),h=d.on(B.PLAYBACK_START,function(){e.Global.fire(f,{continuousPlay:a,instance:t.instance}),D=!1,t.trackAlmostEndOfCurrentVideo(),h.detach()}),i&&t.updateMetadataModel(r),s&&(e.Global.fire(c,{id:s,video:r,nextId:o,continuousPlay:a,instance:t.instance}),a&&e.Global.fire(u,{id:s,nextId:o,continuousPlay:a,instance:t.instance}),t.updateShareUrl(n.getCurrentItemId()))},trackAlmostEndOfCurrentVideo:function(){var t=this,n=t.getCurrentPlaylistItemDuration(),r=Math.max(Math.floor(n*.1),30),i;clearTimeout(_);if(D||n===0)return;i=parseInt(t.getTimeRemaining(t.videoplayer),10),i<=r?e.Global.fire(l,{instance:t.instance}):(i-=r,_=setTimeout(function(){e.Global.fire(l,{instance:t.instance})},i*1e3))},updateMetadataModel:function(t){var n=this,r="",s="",o="",u="",a="",f="",l="",c="",h;t&&t.title?(o=t.clipDuration||"",l=t.genre&&'<span class="Fw-b">Genre: </span>'+t.genre,t.provider&&(s=t.provider.url,r=t.provider.name||"",s&&r&&(r='<a href="'+s+'">'+r+"</a>")),t.credits&&(u=t.credits.main_artists,u=u&&u+": "||"",f=t.credits.director&&'<span class="Fw-b">Director: </span>'+
t.credits.director,c=t.credits.featured_artists&&'<span class="Fw-b">Featured Artists: </span>'+t.credits.featured_artists),a=t.title||"",a=a?u+a:u,i.setAttrs({title:a,description:t.description||"",show_name:r,duration:o&&o+" mins",attribution:t.attribution||t.copyright||"",genre:l,director:f,featured_artists:c})):(h=e.Global.on(v,function(e){var t=e&&e.instance;if(t!==n.instance)return;n.updateMetadataModel(n.getCurrentPlaylistItem()),h.detach(),h=null}),n._listeners.push(h))},parseItems:function(e){return F.getValue(e,["mediaItems","query","results","mediaObj"])||[F.getValue(e,"mediaItems")]},timedListenerCallback:function(t,n){var r=this,i=n||[];A?r.cleanupListeners(i):t&&t.details&&t.details[0]>=2&&(A=!0,e.Global.fire(y,{playerManager:r,instance:r.instance}),r.cleanupListeners(i))},cleanupGlobalSubscriptions:function(t){var n=this,r=t.node,i=e.one("#ym-player"),s=n.subscriptions||[];r.contains(i)&&(n.cleanupListeners(s),s=null)},cleanupListeners:function(t){var n=e.Lang.isArray(t)?t:[],r=n.length,i;if(r>0){for(i=0;i<r;i++)n[i]&&(n[i].detach(),n[i]=null);t=null}},fireSelectedChangeEvent:function(t){var n=this;t&&!O?e.Global.fire(u,{id:t,instance:n.instance}):O=!1},addShareData:function(e,t){if(!e)return;var n=e.get!==undefined,r=n?e.get("shareUrl"):e.shareUrl,i=n?e.get("embeddable"):e.embeddable,s,o,u;return r&&!t&&(o=r.split("/"),u=o[o.length-1],r=window.location.protocol+"//"+window.location.hostname+(window.location.pathname.indexOf("/video/")>=0?"/video/":"/")+u),r=t||r,r&&(s='<iframe width="640" height="360" scrolling="no" frameborder="0" src="'+r+'?format=embed" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" '+'allowtransparency="true"></iframe>',n&&i?(e.set("embedCode",s),e.set("shareUrl",r)):(e.embedCode=s,e.shareUrl=r)),e},getPlayerManager:function(e){var t=this;if(e){if(e.instance&&e.instance!==t.instance)return;e.callback&&(e.scope?e.callback.apply(e.scope,[t]):e.callback(t))}},getPlayerInstance:function(){var e=this;return e.videoplayer},getFullscreen:function(){var e=this;return e.getPlayerInstance().controls.getFullscreen()},setFullscreen:function(e){var t=this;t.getPlayerInstance().controls.setFullscreen(e)},setVolume:function(e){var t=this;t.getPlayerInstance().controls.setVolume(e)},getVolume:function(){var e=this;return e.getPlayerInstance().controls.getVolume()},getPlaylistObject:function(){var e=this,t=e.getPlayerInstance(),n=t&&t.playlist?t.playlist:!1;return n},getPlaylistInstance:function(){var e=this,t=e.getPlayerInstance(),n=t&&t.playlist?t.playlist:!1,r=!1;return n&&(r=n.get()),r},getCurrentPlaylistItem:function(){var e=this,t=e.getPlaylistObject(),n,r;if(t){n=t.getCurrentItemId();if(n&&H)return H.getVideo(n,"",function(e){r=e}),r}},getCurrentPlaylistItemDuration:function(){var e=this,t=e.getPlaylistObject(),n=t&&t.getCurrentItem();return n&&n.duration>0?n.duration:0},getNextPlaylistItem:function(){var e=this,t=e.getPlaylistObject(),n,r;if(t)return n=t.getPosition(),r=n+1,t.getSize()>r?t.getItemId(r):null},getCurrentPlaylistPosition:function(){var e=this,t=e.getPlaylistObject();if(t)return t.getPosition()},getPlaylistItemByPosition:function(e){var t=this,n=t.getPlaylistObject(),r=typeof e!="undefined";if(n&&r)return n.getItemId(e)},clearPlaylist:function(){var e=this,t=e.getPlaylistObject();t&&t.clear()},setPlaylistPositionByIndex:function(e){var t=this,n=t.getPlaylistObject();O=!0;if(n){try{n.setPosition(e)}catch(r){return!1}t.playerControlsPlay()}return!0},setPlaylistPositionById:function(t){var n=this,r=n.getPlaylistObject(),i=n.getCurrentPlaylistPosition(),s=n.getCurrentPlaylistItem(),o=s&&s.id,u;if(r){if(o===t)return n.playerControlsPlay(),e.Global.fire(T,t),!0;O=!0;try{r.setPositionById(t)}catch(a){return!1}n.playerControlsPlay(),u=n.getCurrentPlaylistPosition();if(u===i)return t===o}return!0},addItemsToPlaylist:function(e){var t=this,n=t.getPlaylistObject(),r=[];n&&e&&I.isArray(e)&&(j.each(e,function(e){var t=e&&e.id,n=e&&e.shareUrl;t&&(L[t]=n,r.push(t))}),n.addItems(r))},addItemToPlaylist:function(e){var t=this,n=t.getPlaylistObject(),r,i,s;n&&e&&(r=e&&(e.id||e.get&&e.get("id")),i=L&&L[r]||!1,s=t.addShareData(e,i),k[r]=s,n.addItem(r))},addIdToPlaylist:function(e){var t=this,n;t.isIdInPlaylist(e)||(n={id:e},t.addItemToPlaylist(n))},isIdInPlaylist:function(e){var t=this,n=0,r;for(n;n<t.getPlaylistObject().getSize();n++){r=t.getPlaylistItemByPosition(n);if(r.id===e)return!0}return!1},getPlaylistPositionById:function(e){var t=this,n=0,r;for(n;n<t.getPlaylistObject().getSize();n++){r=t.getPlaylistItemByPosition(n);if(r.id===e)return n}return-1},removePlaylistItem:function(e){var t=this,n=t.getPlaylistObject(),r=typeof e!="undefined";n&&r&&n.removeItem(e)},removePlaylistItems:function(e,t){var n=this,r=t||1,i=n.getPlaylistObject(),s=typeof e!="undefined";i&&s&&i.removeItems(e,r)},removePlaylistItemById:function(e){var t=this,n=t.getPlaylistObject();n&&n.removeItemById(e)},playerControlsMute:function(e){var t=this,n=t.getPlayerInstance();n&&n.controls&&n.controls.setMute(e)},playerControlsPlay:function(){var e=this,t=e.getPlayerInstance();t&&t.controls&&t.controls.play()},playerControlsPause:function(){var e=this,t=e.getPlayerInstance();t&&t.controls&&t.controls.pause()},playerControlsSeek:function(e){var t=this,n=t.getPlayerInstance();n&&n.controls&&n.controls.seek(e)},playerControlsDuration:function(){var e=this,t=e.getPlayerInstance();if(t&&t.controls&&t.controls.getDuration)return t.controls.getDuration()},preventContinuousPlay:function(e){var t=this,n=t.getPlayerInstance(),r=e&&e.instance;if(t.instance!==r)return;n&&n.controls&&n.controls.setContinuousPlay(!1)},allowContinuousPlay:function(e){var t=this,n=t.getPlayerInstance(),r=e&&e.instance;if(t.instance!==r)return;n&&n.controls&&n.controls.resumeContinuousPlay()},getTimeRemaining:function(e){return e&&e.controls&&e.controls.getTimeRemaining&&e.controls.getTimeRemaining()},getShareUrl:function(e){if(e&&L)return L[e]},getCustomControlsNode:function(){var e=this;return e.videoplayer
.getCustomControlsNode()},setShareUrl:function(e){var t=this,n=e&&e.id,r=n&&e.url,i=e&&e.instance;n&&r&&L&&i===t.instance&&(L[n]=r)},updateShareUrl:function(e){var t=this,n=t.getPlaylistObject(),r=t.getShareUrl(e),i;r&&n&&(i=n.getCurrentItem(),i&&i.setShareUrl&&i.setShareUrl(r))},destroy:function(){var e=this,t=e.playerContainer;e.fireOnBeforeDestroyListeners(),e.cleanupListeners(e._listeners),e.cleanupListeners(e.subscriptions),e.videoplayer.destroy(),t.detachAll()},overrideDurationForOverlayAds:function(e){var t=this;t.getPlayerInstance().overrideDurationForOverlayAds&&t.getPlayerInstance().overrideDurationForOverlayAds(e)},_listeners:[],_onBeforeDestroyListeners:[]}},"@VERSION@",{requires:["videoplayer","event-base","event-custom","event-hover","io-base","json-parse","mjata-model-store","mjata-bind-model2dom","node-event","td-videoplayer-util"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("plugin",function(e,t){function n(t){!this.hasImpl||!this.hasImpl(e.Plugin.Base)?n.superclass.constructor.apply(this,arguments):n.prototype.initializer.apply(this,arguments)}n.ATTRS={host:{writeOnce:!0}},n.NAME="plugin",n.NS="plugin",e.extend(n,e.Base,{_handles:null,initializer:function(e){this._handles=[]},destructor:function(){if(this._handles)for(var e=0,t=this._handles.length;e<t;e++)this._handles[e].detach()},doBefore:function(e,t,n){var r=this.get("host"),i;return e in r?i=this.beforeHostMethod(e,t,n):r.on&&(i=this.onHostEvent(e,t,n)),i},doAfter:function(e,t,n){var r=this.get("host"),i;return e in r?i=this.afterHostMethod(e,t,n):r.after&&(i=this.afterHostEvent(e,t,n)),i},onHostEvent:function(e,t,n){var r=this.get("host").on(e,t,n||this);return this._handles.push(r),r},onceHostEvent:function(e,t,n){var r=this.get("host").once(e,t,n||this);return this._handles.push(r),r},afterHostEvent:function(e,t,n){var r=this.get("host").after(e,t,n||this);return this._handles.push(r),r},onceAfterHostEvent:function(e,t,n){var r=this.get("host").onceAfter(e,t,n||this);return this._handles.push(r),r},beforeHostMethod:function(t,n,r){var i=e.Do.before(n,this.get("host"),t,r||this);return this._handles.push(i),i},afterHostMethod:function(t,n,r){var i=e.Do.after(n,this.get("host"),t,r||this);return this._handles.push(i),i},toString:function(){return this.constructor.NAME+"["+this.constructor.NS+"]"}}),e.namespace("Plugin").Base=n},"3.18.1",{requires:["base-base"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("cache-plugin",function(e,t){function n(t){var n=t&&t.cache?t.cache:e.Cache,r=e.Base.create("dataSourceCache",n,[e.Plugin.Base]),i=new r(t);return r.NS="tmpClass",i}e.mix(n,{NS:"cache",NAME:"cachePlugin"}),e.namespace("Plugin").Cache=n},"3.18.1",{requires:["plugin","cache-base"]});
YUI.add("video-applet-playlist-manager",function(e){"use strict";var t="AppletPlaylistManager";e.namespace("Video")[t]=function(){},e.Video[t].prototype={nextVideoNode:!1,initialize:function(t){var n=this,r=t&&t.evtPrefix||"player-manager:",i;n.playerManager=t.playerManager,n.vpUtil=n.playerManager&&n.playerManager.vpUtil,n.isCachePosition=t.isCachePosition,n.firstVideoId=t.firstVideoId,n.vanityPath=t.vanityPath||"",n.channelAlias=t.channelAlias,n.guid=t.guid,n.cachedStartId="",n.cachedLastId="",n.startVideoId="",n.isIE=e.UA.ie>0&&e.UA.ie<9,!n.playerManager,i=e.Global.on(r+"video-changed",function(e){if(e&&e.instance&&n.guid&&e.instance!==n.guid)return;n.isCachePosition&&n.cache&&!n.isIE&&n.cache.add("lastVideoId",e.id)}),n._listeners.push(i)},initYepPlaylist:function(e,t){var n=this,r;if(!e)return;n.isCachePosition&&!n.isIE&&n.initCache(e),r=t?n.filterYepPlaylist(e):e,r&&n.addItemsToYepPlaylist(r)},initCache:function(t){var n=this;if(!t)return;n.cache=new e.CacheOffline({sandbox:"td-applet-videoplayer-cache",expires:18e5}),n.startVideo=n.firstVideoId?t.item(1):t.item(0),n.startVideoId=n.startVideo&&n.startVideo.getData("uuid"),n.cachedStart=n.cache.retrieve("startVideoId"),n.cachedStartId=n.cachedStart?n.cachedStart.response:"",n.cachedLast=n.cache.retrieve("lastVideoId"),n.cachedLastId=n.cachedLast?n.cachedLast.response:"",n.cache.add("startVideoId",n.startVideoId)},filterYepPlaylist:function(e){var t=this,n,r,i,s,o,u,a,f;return e?(f=e&&e.size(),n=e.filter('li[data-uuid="'+t.firstVideoId+'"]'),n=n&&n.item(0),r=n&&e.indexOf(n),i=t.cachedLastId&&e.filter('li[data-uuid="'+t.cachedLastId+'"]'),i=i&&i.item(0),s=i&&e.indexOf(i),u=t.cachedStartId&&t.cachedStartId===t.startVideoId,a=s&&s>=r&&s<f-1,u&&a?(e.splice(0,s+1),t.nextVideoNode=e.item(0)):(o=r>=0?r+1:0,e.splice(0,o)),e):""},addItemsToYepPlaylist:function(e){var t=this,n=[],r,i;if(!e||e.size()<=0)return;e&&e.size()>0&&(e.each(function(e){r=e.getData("uuid"),i=t.vpUtil&&t.vpUtil.getShareUrl(e,t.vanityPath||t.channelAlias),n.push({id:r,shareUrl:i})}),t.playerManager.addItemsToPlaylist(n))},resetPlaylist:function(e,t){var n=this,r,i,s,o;if(!e&&!t)return;r=n.playerManager&&n.playerManager.getPlaylistObject(),i=e.getData("uuid"),n.playerManager.addItemToPlaylist({id:i}),n.playerManager.setPlaylistPositionByIndex(r.getSize()-1),n.playerManager.playerControlsPlay(),n.playerManager.removePlaylistItems(0,r.getSize()-1),s=n.cachedLastId&&t.filter('li[data-uuid="'+i+'"]'),s=s&&s.item(0),o=s&&t.indexOf(s),o&&o>=0&&t.splice(0,o+1),n.addItemsToYepPlaylist(t)},destroy:function(){var t=this;e.Array.forEach(t._listeners,function(e){e.detach()})},_listeners:[]}},"@VERSION@",{requires:["node-base","cache","td-videoplayer-util"]});
YUI.add("video-applet-playlist-util",function(e){"use strict";var t="AppletPlaylistUtil";e.namespace("Video")[t]=function(e){var t=this,n=e||{};t.playerWrap=n.playerWrap,t.playerContainer=n.playerContainer,t.playlistContainer=n.playlistContainer,t.channelHeader=n.channelHeader,t.mode=n.mode},e.Video[t].prototype={getPlayerWrapRegion:function(){var e=this;return e.playerWrap&&e.playerWrap.get("region")},getChannelHeaderRegion:function(){var e=this;return e.channelHeader&&e.channelHeader.get("region")},getPlayerRegion:function(){var e=this;return e.playerContainer&&e.playerContainer.get("region")},getPlaylistDomRegion:function(){var e=this;return e.playlistContainer&&e.playlistContainer.get("region")},getPlaylistHeight:function(){var e=this,t,n,r;return t=e.getPlayerWrapRegion()&&e.getPlayerWrapRegion().height,n=e.getChannelHeaderRegion()&&e.getChannelHeaderRegion().height,r=t&&n&&t-n,r},getPlaylistWidth:function(){var e=this,t,n,r;return t=e.getPlayerWrapRegion()&&e.getPlayerWrapRegion().width,n=e.getPlayerRegion()&&e.getPlayerRegion().width,r=e.getPlaylistDomRegion()&&e.getPlaylistDomRegion().width,e.mode==="videotron"?r=t&&n&&t-n:e.mode==="minitron"&&(r=n&&n*344/640),r}}},"@VERSION@",{requires:["node-base"]});
YUI.add("video-player-js",function(e){"use strict";e.namespace("Video").PlayerJS={initPlayerJS:function(e,t){var n;e&&!YMedia.config.groups.videoplayer&&(n={modules:{videoplayer:{group:"videoplayer",name:"videoplayer",type:"js",fullpath:e}},groups:{videoplayer:{name:"videoplayer",combine:!1,filter:"min"}}},YMedia.applyConfig(n)),YMedia.use("videoplayer",function(){typeof t=="function"&&t()})}}},"@VERSION@",{requires:[]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("history-base",function(e,t){function p(){this._init.apply(this,arguments)}function d(e){return n.type(e)==="object"}var n=e.Lang,r=e.Object,i=YUI.namespace("Env.History"),s=e.Array,o=e.config.doc,u=o.documentMode,a=e.config.win,f={merge:!0},l="change",c="add",h="replace";e.augment(p,e.EventTarget,null,null,{emitFacade:!0,prefix:"history",preventable:!1,queueable:!0}),i._state||(i._state={}),p.NAME="historyBase",p.SRC_ADD=c,p.SRC_REPLACE=h,p.html5=!!(a.history&&a.history.pushState&&a.history.replaceState&&("onpopstate"in a||e.UA.gecko>=2)&&(!e.UA.android||e.UA.android>=2.4)),p.nativeHashChange=("onhashchange"in a||"onhashchange"in o)&&(!u||u>7),e.mix(p.prototype,{_init:function(e){var t;e=this._config=e||{},this.force=!!e.force,t=this._initialState=this._initialState||e.initialState||null,this.publish(l,{broadcast:2,defaultFn:this._defChangeFn}),t&&this.replace(t)},add:function(){var e=s(arguments,0,!0);return e.unshift(c),this._change.apply(this,e)},addValue:function(e,t,n){var r={};return r[e]=t,this._change(c,r,n)},get:function(t){var n=i._state,s=d(n);return t?s&&r.owns(n,t)?n[t]:undefined:s?e.mix({},n,!0):n},replace:function(){var e=s(arguments,0,!0);return e.unshift(h),this._change.apply(this,e)},replaceValue:function(e,t,n){var r={};return r[e]=t,this._change(h,r,n)},_change:function(t,n,r){return r=r?e.merge(f,r):f,r.merge&&d(n)&&d(i._state)&&(n=e.merge(i._state,n)),this._resolveChanges(t,n,r),this},_fireEvents:function(e,t,n){this.fire(l,{_options:n,changed:t.changed,newVal:t.newState,prevVal:t.prevState,removed:t.removed,src:e}),r.each(t.changed,function(t,n){this._fireChangeEvent(e,n,t)},this),r.each(t.removed,function(t,n){this._fireRemoveEvent(e,n,t)},this)},_fireChangeEvent:function(e,t,n){this.fire(t+"Change",{newVal:n.newVal,prevVal:n.prevVal,src:e})},_fireRemoveEvent:function(e,t,n){this.fire(t+"Remove",{prevVal:n,src:e})},_resolveChanges:function(e,t,n){var s={},o,u=i._state,a={};t||(t={}),n||(n={}),d(t)&&d(u)?(r.each(t,function(e,t){var n=u[t];e!==n&&(s[t]={newVal:e,prevVal:n},o=!0)},this),r.each(u,function(e,n){if(!r.owns(t,n)||t[n]===null)delete t[n],a[n]=e,o=!0},this)):o=t!==u,(o||this.force)&&this._fireEvents(e,{changed:s,newState:t,prevState:u,removed:a},n)},_storeState:function(e,t){i._state=t||{}},_defChangeFn:function(e){this._storeState(e.src,e.newVal,e._options)}},!0),e.HistoryBase=p},"3.18.1",{requires:["event-custom-complex"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("history-hash",function(e,t){function p(){p.superclass.constructor.apply(this,arguments)}var n=e.HistoryBase,r=e.Lang,i=e.Array,s=e.Object,o=YUI.namespace("Env.HistoryHash"),u="hash",a,f,l,c=e.config.win,h=e.config.useHistoryHTML5;e.extend(p,n,{_init:function(t){var n=p.parseHash();t=t||{},this._initialState=t.initialState?e.merge(t.initialState,n):n,e.after("hashchange",e.bind(this._afterHashChange,this),c),p.superclass._init.apply(this,arguments)},_change:function(e,t,n){return s.each(t,function(e,n){r.isValue(e)&&(t[n]=e.toString())}),p.superclass._change.call(this,e,t,n)},_storeState:function(e,t){var r=p.decode,i=p.createHash(t);p.superclass._storeState.apply(this,arguments),e!==u&&r(p.getHash())!==r(i)&&p[e===n.SRC_REPLACE?"replaceHash":"setHash"](i)},_afterHashChange:function(e){this._resolveChanges(u,p.parseHash(e.newHash),{})}},{NAME:"historyHash",SRC_HASH:u,hashPrefix:"",_REGEX_HASH:/([^\?#&=]+)=?([^&=]*)/g,createHash:function(e){var t=p.encode,n=[];return s.each(e,function(e,i){r.isValue(e)&&n.push(t(i)+"="+t(e))}),n.join("&")},decode:function(e){return decodeURIComponent(e.replace(/\+/g," "))},encode:function(e){return encodeURIComponent(e).replace(/%20/g,"+")},getHash:e.UA.gecko?function(){var t=e.getLocation(),n=/#(.*)$/.exec(t.href),r=n&&n[1]||"",i=p.hashPrefix;return i&&r.indexOf(i)===0?r.replace(i,""):r}:function(){var t=e.getLocation(),n=t.hash.substring(1),r=p.hashPrefix;return r&&n.indexOf(r)===0?n.replace(r,""):n},getUrl:function(){return location.href},parseHash:function(e){var t=p.decode,n,i,s,o,u,a={},f=p.hashPrefix,l;e=r.isValue(e)?e:p.getHash();if(f){l=e.indexOf(f);if(l===0||l===1&&e.charAt(0)==="#")e=e.replace(f,"")}o=e.match(p._REGEX_HASH)||[];for(n=0,i=o.length;n<i;++n)s=o[n],u=s.split("="),u.length>1?a[t(u[0])]=t(u[1]):a[t(s)]="";return a},replaceHash:function(t){var n=e.getLocation(),r=n.href.replace(/#.*$/,"");t.charAt(0)==="#"&&(t=t.substring(1)),n.replace(r+"#"+(p.hashPrefix||"")+t)},setHash:function(t){var n=e.getLocation();t.charAt(0)==="#"&&(t=t.substring(1)),n.hash=(p.hashPrefix||"")+t}}),a=o._notifiers,a||(a=o._notifiers=[]),e.Event.define("hashchange",{on:function(t,n,r){(t.compareTo(c)||t.compareTo(e.config.doc.body))&&a.push(r)},detach:function(e,t,n){var r=i.indexOf(a,n);r!==-1&&a.splice(r,1)}}),f=p.getHash(),l=p.getUrl(),n.nativeHashChange?o._hashHandle||(o._hashHandle=e.Event.attach("hashchange",function(e){var t=p.getHash(),n=p.getUrl();i.each(a.concat(),function(r){r.fire({_event:e,oldHash:f,oldUrl:l,newHash:t,newUrl:n})}),f=t,l=n},c)):o._hashPoll||(o._hashPoll=e.later(50,null,function(){var e=p.getHash(),t,n;f!==e&&(n=p.getUrl(),t={oldHash:f,oldUrl:l,newHash:e,newUrl:n},f=e,l=n,i.each(a.concat(),function(e){e.fire(t)}))},null,!0)),e.HistoryHash=p;if(h===!1||!e.History&&h!==!0&&(!n.html5||!e.HistoryHTML5))e.History=p},"3.18.1",{requires:["event-synthetic","history-base","yui-later"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("history-html5",function(e,t){function a(){a.superclass.constructor.apply(this,arguments)}var n=e.HistoryBase,r=e.Lang,i=e.config.win,s=e.config.useHistoryHTML5,o="popstate",u=n.SRC_REPLACE;e.extend(a,n,{_init:function(t){var n;try{n=i.history.state}catch(s){n=null}e.Object.isEmpty(n)&&(n=null),t||(t={}),t.initialState&&r.type(t.initialState)==="object"&&r.type(n)==="object"?this._initialState=e.merge(t.initialState,n):this._initialState=n,e.on("popstate",this._onPopState,i,this),a.superclass._init.apply(this,arguments)},_storeState:function(t,n,r){t!==o&&i.history[t===u?"replaceState":"pushState"](n,r.title||e.config.doc.title||"",r.url||e.config.doc.URL),a.superclass._storeState.apply(this,arguments)},_onPopState:function(e){this._resolveChanges(o,e._event.state||null)}},{NAME:"historyhtml5",SRC_POPSTATE:o}),e.Node.DOM_EVENTS.popstate||(e.Node.DOM_EVENTS.popstate=1),e.HistoryHTML5=a;if(s===!0||s!==!1&&n.html5)e.History=a},"3.18.1",{optional:["json"],requires:["event-base","history-base","node-base"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("router",function(e,t){function c(){c.superclass.constructor.apply(this,arguments)}var n=e.HistoryHash,r=e.QueryString,i=e.Array,s=e.Lang,o=e.Object,u=e.config.win,a=[],f=[],l="ready";e.Router=e.extend(c,e.Base,{_regexURL:/^((?:[^\/#?:]+:\/\/|\/\/)[^\/]*)?([^?#]*)(\?[^#]*)?(#.*)?$/,_regexPathParam:/([:*])([\w\-]+)?/g,_regexUrlQuery:/\?([^#]*).*$/,_regexUrlOrigin:/^(?:[^\/#?:]+:\/\/|\/\/)[^\/]*/,initializer:function(t){var n=this;n._html5=n.get("html5"),n._params={},n._routes=[],n._url=n._getURL(),n._setRoutes(t&&t.routes?t.routes:n.get("routes")),n._html5?(n._history=new e.HistoryHTML5({force:!0}),n._historyEvents=e.after("history:change",n._afterHistoryChange,n)):n._historyEvents=e.on("hashchange",n._afterHistoryChange,u,n),n.publish(l,{defaultFn:n._defReadyFn,fireOnce:!0,preventable:!1}),n.once("initializedChange",function(){e.once("load",function(){setTimeout(function(){n.fire(l,{dispatched:!!n._dispatched})},20)})}),a.push(this)},destructor:function(){var e=i.indexOf(a,this);e>-1&&a.splice(e,1),this._historyEvents&&this._historyEvents.detach()},dispatch:function(){return this.once(l,function(){var e,t;this._ready=!0,this.upgrade()||(e=this._getRequest("dispatch"),t=this._getResponse(e),this._dispatch(e,t))}),this},getPath:function(){return this._getPath()},hasRoute:function(e){var t,n,r;return this._hasSameOrigin(e)?(this._html5||(e=this._upgradeURL(e)),t=this.removeQuery(e.replace(this._regexUrlOrigin,"")),r=this.match(t),r.length?(n=this.removeRoot(t),!!i.filter(r,function(e){return this._getParamValues(e,n)},this).length):!1):!1},match:function(e){var t=this.get("root");if(t){if(!this._pathHasRoot(t,e))return[];e=this.removeRoot(e)}return i.filter(this._routes,function(t){return e.search(t.regex)>-1})},param:function(e,t){return this._params[e]=t,this},removeRoot:function(e){var t=this.get("root"),n;e=e.replace(this._regexUrlOrigin,"");if(!t)return e;n=this.removeQuery(e);if(n===t||this._pathHasRoot(t,n))e=e.substring(t.length);return e.charAt(0)==="/"?e:"/"+e},removeQuery:function(e){return e.replace(/\?.*$/,"")},replace:function(e){return this._queue(e,!0)},route:function(t,n){n=i(arguments,1,!0);var r,o;return typeof t=="string"||s.isRegExp(t)?(n=i.flatten(n),r=[],o=this._getRegex(t,r),t={callbacks:n,keys:r,path:t,regex:o}):(n=i.flatten([t.callbacks||t.callback||[]].concat(n)),r=t.keys,o=t.regex||t.regexp,o||(r=[],o=this._getRegex(t.path,r)),t=e.merge(t,{callbacks:n,keys:r,path:t.path||o,regex:o})),this._routes.push(t),this},save:function(e){return this._queue(e)},upgrade:function(){if(!this._html5)return!1;var e=this._getHashPath();return e?(this.once(l,function(){this.replace(e)}),!0):!1},_decode:function(e){return decodeURIComponent(e.replace(/\+/g," "))},_dequeue:function(){var t=this,n;return YUI.Env.windowLoaded?(n=f.shift(),n?n():this):(e.once("load",function(){t._dequeue()}),this)},_dispatch:function(t,n){function a(f){var l,c,h;if(f)f==="route"?(s=[],a()):e.error(f);else if(l=s.shift())typeof l=="string"&&(c=l,l=r[c],l||e.error("Router: Callback not found: "+c,null,"router")),t.pendingCallbacks=s.length,l.call(r,t,n,a);else if(h=i.shift()){u=r._getParamValues(h,o);if(!u){a("route");return}t.params=u,t.route=h,t.pendingRoutes=i.length,s=h.callbacks.concat(),a()}}var r=this,i=r.match(t.path),s=[],o,u;return r._dispatching=r._dispatched=!0,!i||!i.length?(r._dispatching=!1,r):(o=r.removeRoot(t.path),a(),r._dispatching=!1,r._dequeue())},_getHashPath:function(e){return e||(e=n.getHash()),e&&e.charAt(0)==="/"?this._joinURL(e):""},_getOrigin:function(){var t=e.getLocation();return t.origin||t.protocol+"//"+t.host},_getParams:function(){return e.merge(this._params)},_getParamValues:function(e,t){var n,r,o;return n=i.map(e.regex.exec(t)||[],function(e){return e&&this._decode(e)||""},this),n.length-1!==e.keys.length?n:(o=i.hash(e.keys,n.slice(1)),r=i.every(e.keys,function(e){var t=this._params[e],n=o[e];return t&&n&&typeof n=="string"?(n=s.isRegExp(t)?t.exec(n):t.call(this,n,e),n!==!1&&s.isValue(n)?(o[e]=n,!0):!1):!0},this),r?o:!1)},_getPath:function(){var t=!this._html5&&this._getHashPath()||e.getLocation().pathname;return this.removeQuery(t)},_getPathRoot:function(){var t="/",n=e.getLocation().pathname,r;return n.charAt(n.length-1)===t?n:(r=n.split(t),r.pop(),r.join(t)+t)},_getQuery:function(){var t=e.getLocation(),r,i;return this._html5?t.search.substring(1):(r=n.getHash(),i=r.match(this._regexUrlQuery),r&&i?i[1]:t.search.substring(1))},_getRegex:function(e,t){return s.isRegExp(e)?e:e==="*"?/.*/:(e=e.replace(this._regexPathParam,function(e,n,r){return r?(t.push(r),n==="*"?"(.*?)":"([^/#?]+)"):n==="*"?".*":e}),new RegExp("^"+e+"$"))},_getRequest:function(e){return{path:this._getPath(),query:this._parseQuery(this._getQuery()),url:this._getURL(),router:this,src:e}},_getResponse:function(e){return{req:e}},_getRoutes:function(){return this._routes.concat()},_getURL:function(){var t=e.getLocation().toString();return this._html5||(t=this._upgradeURL(t)),t},_hasSameOrigin:function(t){var n=(t&&t.match(this._regexUrlOrigin)||[])[0];return n&&n.indexOf("//")===0&&(n=e.getLocation().protocol+n),!n||n===this._getOrigin()},_joinURL:function(e){var t=this.get("root");return e=this.removeRoot(e),e.charAt(0)==="/"&&(e=e.substring(1)),t&&t.charAt(t.length-1)==="/"?t+e:t+"/"+e},_normalizePath:function(e){var t="..",n="/",r,i,s,o,u,a;if(!e||e===n)return n;o=e.split(n),a=[];for(r=0,i=o.length;r<i;++r)u=o[r],u===t?a.pop():u&&a.push(u);return s=n+a.join(n),s!==n&&e.charAt(e.length-1)===n&&(s+=n),s},_parseQuery:r&&r.parse?r.parse:function(e){var t=this._decode,n=e.split("&"),r=0,i=n.length,s={},o;for(;r<i;++r)o=n[r].split("="),o[0]&&(s[t(o[0])]=t(o[1]||""));return s},_pathHasRoot:function(e,t){var n=e.charAt(e.length-1)==="/"?e:e+"/";return t.indexOf(n)===0},_queue:function(){var t=arguments,n=this;return f.push(function(){return n._html5?e.UA.ios&&e.UA.ios<5?n._save.apply(n,t):setTimeout(function(){n._save.apply(n,t)},1):(n._dispatching=!0,n._save.apply(n,t)),n}),this._dispatching?this:this.
_dequeue()},_resolvePath:function(t){return t?(t.charAt(0)!=="/"&&(t=this._getPathRoot()+t),this._normalizePath(t)):e.getLocation().pathname},_resolveURL:function(t){var n=t&&t.match(this._regexURL),r,i,s,o,u;return n?(r=n[1],i=n[2],s=n[3],o=n[4],r?(r.indexOf("//")===0&&(r=e.getLocation().protocol+r),r+(i||"/")+(s||"")+(o||"")):(u=this._getOrigin()+this._resolvePath(i),i||s?u+(s||"")+(o||""):(s=this._getQuery(),u+(s?"?"+s:"")+(o||"")))):e.getLocation().toString()},_save:function(t,r){var i=typeof t=="string",s,o,u;if(i&&!this._hasSameOrigin(t))return e.error("Security error: The new URL must be of the same origin as the current URL."),this;i&&(t=this._joinURL(t)),this._ready=!0;if(this._html5)this._history[r?"replace":"add"](null,{url:t});else{s=e.getLocation().pathname,o=this.get("root"),u=n.getHash(),i||(t=u);if(o===s||o===this._getPathRoot())t=this.removeRoot(t);t===u?e.Router.dispatch():n[r?"replaceHash":"setHash"](t)}return this},_setParams:function(t){return this._params={},o.each(t,function(e,t){this.param(t,e)},this),e.merge(this._params)},_setRoutes:function(e){return this._routes=[],i.each(e,function(e){this.route(e)},this),this._routes.concat()},_upgradeURL:function(t){if(!this._hasSameOrigin(t))return t;var n=(t.match(/#(.*)$/)||[])[1]||"",r=e.HistoryHash.hashPrefix,i;r&&n.indexOf(r)===0&&(n=n.replace(r,""));if(n){i=this._getHashPath(n);if(i)return this._resolveURL(i)}return t},_afterHistoryChange:function(e){var t=this,n=e.src,r=t._url,i=t._getURL(),s,o;t._url=i;if(n==="popstate"&&(!t._ready||r.replace(/#.*$/,"")===i.replace(/#.*$/,"")))return;s=t._getRequest(n),o=t._getResponse(s),t._dispatch(s,o)},_defReadyFn:function(e){this._ready=!0}},{NAME:"router",ATTRS:{html5:{valueFn:function(){return e.Router.html5},writeOnce:"initOnly"},params:{value:{},getter:"_getParams",setter:"_setParams"},root:{value:""},routes:{value:[],getter:"_getRoutes",setter:"_setRoutes"}},html5:e.HistoryBase.html5&&(!e.UA.android||e.UA.android>=3),_instances:a,dispatch:function(){var e,t,n,r,i;for(e=0,t=a.length;e<t;e+=1)n=a[e],n&&(r=n._getRequest("dispatch"),i=n._getResponse(r),n._dispatch(r,i))}}),e.Controller=e.Router},"3.18.1",{optional:["querystring-parse"],requires:["array-extras","base-build","history"]});

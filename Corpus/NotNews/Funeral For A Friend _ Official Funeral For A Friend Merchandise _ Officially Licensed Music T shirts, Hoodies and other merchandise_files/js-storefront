function ControlVersion(){var n,t,i;try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),n=t.GetVariable("$version")}catch(i){}if(!n)try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),n="WIN 6,0,21,0",t.AllowScriptAccess="always",n=t.GetVariable("$version")}catch(i){}if(!n)try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3"),n=t.GetVariable("$version")}catch(i){}if(!n)try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3"),n="WIN 3,0,18,0"}catch(i){}if(!n)try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),n="WIN 2,0,0,11"}catch(i){n=-1}return n}function GetSwfVer(){var t=-1;if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var u=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"",f=navigator.plugins["Shockwave Flash"+u].description,i=f.split(" "),r=i[2].split("."),e=r[0],o=r[1],n=i[3];n==""&&(n=i[4]),n[0]=="d"?n=n.substring(1):n[0]=="r"&&(n=n.substring(1),n.indexOf("d")>0&&(n=n.substring(0,n.indexOf("d")))),t=e+"."+o+"."+n}}else navigator.userAgent.toLowerCase().indexOf("webtv/2.6")!=-1?t=4:navigator.userAgent.toLowerCase().indexOf("webtv/2.5")!=-1?t=3:navigator.userAgent.toLowerCase().indexOf("webtv")!=-1?t=2:isIE&&isWin&&!isOpera&&(t=ControlVersion());return t}function DetectFlashVer(n,t,i){if(versionStr=GetSwfVer(),versionStr==-1)return!1;if(versionStr!=0){isIE&&isWin&&!isOpera?(tempArray=versionStr.split(" "),tempString=tempArray[1],versionArray=tempString.split(",")):versionArray=versionStr.split(".");var r=versionArray[0],u=versionArray[1],f=versionArray[2];return r>parseFloat(n)?!0:r==parseFloat(n)&&(u>parseFloat(t)||u==parseFloat(t)&&f>=parseFloat(i))?!0:!1}}function AC_AddExtension(n,t){return n.indexOf("?")!=-1?n.replace(/\?/,t+"?"):n+t}function AC_Generateobj(n,t,i){var r="",u;if(isIE&&isWin&&!isOpera){r+="<object ";for(u in n)r+=u+'="'+n[u]+'" ';r+=">";for(u in t)r+='<param name="'+u+'" value="'+t[u]+'" /> ';r+="<\/object>"}else{r+="<embed ";for(u in i)r+=u+'="'+i[u]+'" ';r+="> <\/embed>"}document.write(r)}function AC_FL_RunContent(){var n=AC_GetArgs(arguments,".swf","movie","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000","application/x-shockwave-flash");AC_Generateobj(n.objAttrs,n.params,n.embedAttrs)}function AC_SW_RunContent(){var n=AC_GetArgs(arguments,".dcr","src","clsid:166B1BCA-3F9C-11CF-8075-444553540000",null);AC_Generateobj(n.objAttrs,n.params,n.embedAttrs)}function AC_GetArgs(n,t,i,r,u){var e={},f,o;for(e.embedAttrs={},e.params={},e.objAttrs={},f=0;f<n.length;f=f+2){o=n[f].toLowerCase();switch(o){case"classid":break;case"pluginspage":e.embedAttrs[n[f]]=n[f+1];break;case"src":case"movie":n[f+1]=AC_AddExtension(n[f+1],t),e.embedAttrs.src=n[f+1],e.params[i]=n[f+1];break;case"onafterupdate":case"onbeforeupdate":case"onblur":case"oncellchange":case"onclick":case"ondblClick":case"ondrag":case"ondragend":case"ondragenter":case"ondragleave":case"ondragover":case"ondrop":case"onfinish":case"onfocus":case"onhelp":case"onmousedown":case"onmouseup":case"onmouseover":case"onmousemove":case"onmouseout":case"onkeypress":case"onkeydown":case"onkeyup":case"onload":case"onlosecapture":case"onpropertychange":case"onreadystatechange":case"onrowsdelete":case"onrowenter":case"onrowexit":case"onrowsinserted":case"onstart":case"onscroll":case"onbeforeeditfocus":case"onactivate":case"onbeforedeactivate":case"ondeactivate":case"type":case"codebase":case"id":e.objAttrs[n[f]]=n[f+1];break;case"width":case"height":case"align":case"vspace":case"hspace":case"class":case"title":case"accesskey":case"name":case"tabindex":e.embedAttrs[n[f]]=e.objAttrs[n[f]]=n[f+1];break;default:e.embedAttrs[n[f]]=e.params[n[f]]=n[f+1]}}return e.objAttrs.classid=r,u&&(e.embedAttrs.type=u),e}var siteActivity=function(){return{TrackPageView:function(){var n=+new Date,t={RequestTimeStamp:n};$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:urlPrefix+"/siteactivity/trackpageview_json",data:JSON.stringify(t),dataType:"json",success:function(){},error:function(){console.log("Uknown error tracking pageview")}})}}}(),basket=function(){function n(n){$(".BasketItemCount").html(n.ProductCount),$(".BasketTotalValue").html(n.CurrencySymbol+Globalize.format(n.BasketTotal,"n2"))}return{RefreshTotals:function(){$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:urlPrefix+"/basket/summary_json",dataType:"json",success:function(t){n(t)},error:function(){console.log("Uknown error loading basket totals")}})}}}(),currentdate=function(){return{Populate:function(){$(".CurrentYear").html((new Date).getFullYear())}}}();UniversalAnalytics=function(){function e(){t===null||u===null?$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:urlPrefix+"/basket/loadbasket_json",dataType:"json",success:function(n){u=n.currency,t=n.products,UniversalAnalytics.OnBasketDataLoaded()},error:function(){console.log("error: loadbasketdata")}}):UniversalAnalytics.OnBasketDataLoaded()}var n=!1,t=null,u=null,f=null,r=null,i=null;return{Init:function(t){n=t,n==!0&&(function(n,t,i,r,u,f,e){n.GoogleAnalyticsObject=u,n[u]=n[u]||function(){(n[u].q=n[u].q||[]).push(arguments)},n[u].l=1*new Date,f=t.createElement(i),e=t.getElementsByTagName(i)[0],f.async=1,f.src=r,e.parentNode.insertBefore(f,e)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-3559861-2","auto"),ga("require","ec"))},Active:function(){return n},OnBasketDataLoaded:function(){r!=null&&(r(),r=null)},DoCallback:function(){i!=null&&(i(),i=null)},SendEvent:function(t,r,u){n==!0&&(i===null?ga("send","event",t,r,u):ga("send","event",t,r,u,{hitCallback:function(){UniversalAnalytics.DoCallback()}}))},AddProductView:function(t){n==!0&&(ga("set","&cu",t.currency),ga("ec:addProduct",{id:t.productId,name:t.productName,category:t.categoryName,brand:t.brand,price:t.price}),ga("ec:setAction","detail"),UniversalAnalytics.SendEvent("StoreFront","Action","View Product"))},AddToBasket:function(t){n==!0&&(ga("set","&cu",t.currency),ga("ec:addProduct",{id:t.productId,name:t.productName,category:t.categoryName,brand:t.brand,variant:t.size,price:t.price,quantity:1}),ga("ec:setAction","add"),UniversalAnalytics.SendEvent("StoreFront","Action","Add to basket"))},RemoveFromBasket:function(t){n==!0&&(ga("set","&cu",t.currency),ga("ec:addProduct",{id:t.productId,name:t.productName,category:t.categoryName,brand:t.brand,variant:t.size,price:t.price,quantity:1}),ga("ec:setAction","remove"),UniversalAnalytics.SendEvent("StoreFront","Action","Remove from basket"))},Checkout_ViewBasket:function(t){active=!0,n==!0&&(i=t,r=UniversalAnalytics.DoCheckout_ViewBasket,e())},DoCheckout_ViewBasket:function(){var r,i;if(n==!0){for(ga("set","&cu",u),r=0;r<t.length;r++)i=t[r],ga("ec:addProduct",{id:i.ProductID,name:i.ItemName,category:i.CategoryName,brand:i.ArtistName,variant:i.ProductSize,price:i.UnitPrice,quantity:i.Quantity});ga("ec:setAction","checkout",{step:1}),UniversalAnalytics.SendEvent("StoreFront","Action","View Basket")}},Checkout_EnterPayment:function(t){console.log("Checkout_EnterPayment"),n==!0&&(f=null,i=t,r=UniversalAnalytics.DoCheckout_EnterPayment,e())},DoCheckout_EnterPayment:function(){var r,i;if(console.log("DoCheckout_EnterPayment"),n==!0){for(ga("set","&cu",u),r=0;r<t.length;r++)i=t[r],ga("ec:addProduct",{id:i.ProductID,name:i.ItemName,category:i.CategoryName,brand:i.ArtistName,variant:i.ProductSize,price:i.UnitPrice,quantity:i.Quantity});ga("ec:setAction","checkout",{step:2}),UniversalAnalytics.SendEvent("StoreFront","Action","Enter Payment Details")}},Checkout_Payment:function(t,u){n==!0&&(f=u,i=t,r=UniversalAnalytics.DoCheckout_Payment,e())},DoCheckout_Payment:function(){var r,i,e;if(n==!0){for(console.log(),ga("set","&cu",u),r=0;r<t.length;r++)i=t[r],ga("ec:addProduct",{id:i.ProductID,name:i.ItemName,category:i.CategoryName,brand:i.ArtistName,variant:i.ProductSize,price:i.UnitPrice,quantity:i.Quantity});ga("ec:setAction","checkout",{step:3,option:f}),e="Begin Payment: "+f,UniversalAnalytics.SendEvent("StoreFront","Action",e)}},Checkout_3DAuth:function(t){n==!0&&(i=t,r=UniversalAnalytics.DoCheckout_3DAuth,e())},DoCheckout_3DAuth:function(){var r,i;if(n==!0){for(ga("set","&cu",u),r=0;r<t.length;r++)i=t[r],ga("ec:addProduct",{id:i.ProductID,name:i.ItemName,category:i.CategoryName,brand:i.ArtistName,variant:i.ProductSize,price:i.UnitPrice,quantity:i.Quantity});ga("ec:setAction","checkout",{step:4}),UniversalAnalytics.SendEvent("StoreFront","Action","Begin 3D Auth")}},OrderComplete:function(t,i){var u,r;if(n==!0){for(ga("set","&cu",t.currency),u=0;u<i.length;u++)r=i[u],ga("ec:addProduct",{id:r.productId,name:r.productName,category:r.categoryName,brand:r.brand,variant:r.variant,price:r.price,quantity:r.quantity});ga("ec:setAction","purchase",{id:t.orderId,affiliation:t.storeAffiliateId,revenue:t.revenue,tax:t.tax,shipping:t.shipping,coupon:""}),UniversalAnalytics.SendEvent("StoreFront","Action","Order Complete")}},SendPageView:function(){n==!0&&ga("send","pageview")}}}();var isIE=navigator.appVersion.indexOf("MSIE")!=-1?!0:!1,isWin=navigator.appVersion.toLowerCase().indexOf("win")!=-1?!0:!1,isOpera=navigator.userAgent.indexOf("Opera")!=-1?!0:!1
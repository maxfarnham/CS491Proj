YUI.add("z-search-exposed-filter-control",function(c){var f="SearchExposedFilterControl",o="debug",m="click",j="value",d=" a",k="selected",n="focus",e="blur",h="key",b="",l=".",a=c.namespace("Z"),i=f+":loaded";
c.publish(i);function g(p,q,r){this.initialValue=p;if(q!==null){this.currentValue=q;}if(r!==null){this.currentValueMax=r;
}}a[f]=c.Base.create("searchExposedFilterControl",c.Plugin.Base,[c.Z.EventHandleManager],{_moreMenuFilterInfo:{},initializer:function(){c.log("initializer",o,f);
this._attachHandlers();this.setInitialFilterValues();this.initMoreMenuAppliedFilters();this.showSearchSortBar();
},destructor:function(){c.log("destructor",o,f);this.removeHandles();},_attachHandlers:function(){c.log("_attachHandlers",o,f);
var s=this.get("host"),q=this.get("menuLegendSelector"),p=this.get("priceInputSelector"),w=this.get("comboboxSelector"),v=this.get("customDropdownOptionsSelector"),u=this.get("customDropdownOptionsAnchorSelector"),t=this.get("customDropdownTargetSelector"),r=this.get("bedOptionsSelector");
this.addHandle(s.delegate(m,this._onMenuLegendClick,q,this));this.addHandle(s.delegate("mousedown",this._onMenuLegendMousedown,q,this));
this.addHandle(s.delegate("mouseup",this._onMenuLegendMouseup,q,this));this.addHandle(s.delegate(h,this._onFormEnter,"down:13",this.get("formSelector"),this));
this.addHandle(s.delegate(n,this._onMenuLegendFocus,q+" .menu-label",this));this.addHandle(s.delegate(m,this._onListingTypeCategoryChange,this.get("listingTypeCategorySelector"),this));
this.addHandle(s.delegate(h,this._onListingTypeCategoryEnter,"down:13",this.get("listingTypeSubCategorySelector"),this));
this.addHandle(s.delegate(n,this._onPriceInputFocus,p,this));this.addHandle(s.delegate(e,this._onPriceInputBlur,p,this));
this.addHandle(s.delegate("valuechange",this._onPriceInputValueChange,p,this));this.addHandle(s.delegate(h,this._onPriceInputEnter,"down:13",p,this));
this.addHandle(s.delegate(h,this._onPriceInputDownKey,"down:40",p,this));this.addHandle(s.delegate(h,this._onTabLastMinPrice,"down:9",l+this.get("priceOptionsBaseString")+" li:last-child",this));
this.addHandle(s.delegate(m,this._onComboboxClick,w,this));this.addHandle(s.delegate(n,this._onComboboxFocus,w,this));
this.addHandle(s.delegate(e,this._onComboboxBlur,w,this));this.addHandle(s.delegate(m,this._onCustomDropdownOptionsClick,v,this));
this.addHandle(s.delegate(h,this._onCustomDropdownOptionsClick,"down:13",u,this));this.addHandle(s.delegate(h,this._onCustomDropdownOptionsUp,"down:38",t,this));
this.addHandle(s.delegate(h,this._onCustomDropdownOptionsDown,"down:40",t,this));this.addHandle(s.delegate(h,this._onBedsMenuLabelDown,"down:40",this.get("bedMenuLabelSelector"),this));
this.addHandle(s.delegate(m,this._onHometypeCheckboxChange,this.get("hometypeCheckboxSelector"),this));
this.addHandle(s.delegate(m,this._onRentalOnlyCheckboxChange,this.get("rentalOnlyCheckboxSelector"),this));
this.addHandle(s.delegate(m,this._onBedOptionsClick,r,this));this.addHandle(s.delegate(h,this._onBedOptionsClick,"down:13",r+d,this));
this.addHandle(s.delegate(m,this._onApplyButtonClick,this.get("applyButtonSelector"),this));this.addHandle(s.delegate(e,this._onMoreInputFieldBlur,this.get("moreMenuInputFieldSelector"),this));
this.addHandle(c.on("FilterManager:toggleListingCheckbox",this._onListingTypeCategoryChange,this));this.addHandle(c.on("FilterManager:applyFilterState",this._onListingTypeCategoryChange,this));
this.addHandle(c.on("FilterManager:toggleRentalVisibility",this._onToggleRentalVisibility,this));this.addHandle(c.on("SearchAffordabilityFilterExposed:applyLinkClicked",this._onSearchAffordabilityFilterApplyClicked,this));
this.addHandle(c.one("window").on("resize",this._setMenuCounts,this));c.publish(f+":onMaxPriceInputEnter");
},openMenu:function(r){var q=r.one(this.get("comboboxSelector"))||r.one(this.get("hometypeCheckboxSelector"))||r.one('.search-entry:not(.hide) input[type="text"]')||r.one(".filter-pane .zf-dropdown-options li:first-child"+d),p=this.get("activeMenu");
if(p){this.closeMenu(p);}r.addClass(this.get("menuOpenClass"));this.set("activeMenu",r);if(q){q.focus();
}this.addHandle(r.on(this.get("outsideEventType"),this._onOutsideMenuEvent,this),"filter-menu");},closeMenu:function(p){if(p===null){return;
}if(p.hasClass("listings-menu")){c.fire(f+":ListingTypeDialogClosed");}this.removeHandles("filter-menu");
p.removeClass(this.get("menuOpenClass"));this.set("activeMenu",null);},setInitialFilterValues:function(){var r=this.get("linkedDropdownComboSelectors"),q=c.Z.SearchFilters.ForRent.isChecked()&&!c.Z.SearchFilters.ForSale.isChecked()&&!c.Z.SearchFilters.Premarket.isChecked()&&!c.Z.SearchFilters.RecentlySold.isChecked();
for(var p=0;p<r.length;p++){var s=c.one(r[p]);this._setInitialDropdownMenuValue(s);}this._onListingTypeCategoryChange();
this._onToggleRentalHomeTypesVisibility(q);this._onToggleRentalPriceVisibility();this._updateHometypeReadout();
},_setDefaultComboboxValue:function(s){var r=s.get("parentNode"),q="";var p=r.one(this.get("customDropdownOptionsSelector")+d);
if(r.hasClass("custom-dropdown")&&p){q=p.get("innerHTML");}else{q=this._setHometypeReadout(true);}return q;
},_getFieldInfo:function(s){var u=s.get("id"),t="",r=s.get("nodeName").toLowerCase(),x=this.get("minIdBase"),v=this.get("maxIdBase"),q=u.indexOf(x),p=u.indexOf(v),w=false;
if(r==="span"){t=s.get("innerHTML");}else{if(s.getAttribute("type")==="checkbox"){t=s.get("checked").toString();
}else{t=s.get("value");if(c.UA.ie&&(c.UA.ie<=9||c.config.doc.documentMode<=9)){if(t==="Min"||t==="Max"||t==="e.g. pool, fireplace"){t="";
}}}}if(q>1){u=u.substr(0,q);}else{if(p>1){u=u.substr(0,p);w=true;}}return{key:u,nodeName:r,isMaxField:w,currentValue:t};
},initMoreMenuAppliedFilters:function(){var p=this.get("moreMenuFields"),q=this;p.each(function(v){var s=q._getFieldInfo(v),u="",t="",w="",r=s.key;
if(s.nodeName==="span"){u=q._setDefaultComboboxValue(v);}else{if(v.getAttribute("type")==="checkbox"){u="false";
}else{u="";}}t=s.currentValue;if(!q._moreMenuFilterInfo[r]){q._moreMenuFilterInfo[r]=new g(u);}if(s.isMaxField){w=s.currentValue;
q._moreMenuFilterInfo[r].currentValueMax=w;}else{q._moreMenuFilterInfo[r].currentValue=t;}});q._setMoreFiltersAppliedCount();
},_setMoreFiltersValue:function(s){var r=this._getFieldInfo(s),q=r.key,p=this._moreMenuFilterInfo[q];
if(p){if(r.isMaxField){if(p.currentValueMax!==r.currentValue){p.currentValueMax=r.currentValue;this._setMoreFiltersAppliedCount();
}}else{if(p.currentValue!==r.currentValue){p.currentValue=r.currentValue;this._setMoreFiltersAppliedCount();
}}}},_onMoreInputFieldBlur:function(q){var p=q.currentTarget;this._setMoreFiltersValue(p);},_setMoreFiltersAppliedCount:function(){var t=this.get("host"),r=t.one("#applied-filter-count"),q=this._moreMenuFilterInfo,p=c.Object.keys(q),s=0;
c.Array.each(p,function(u){if((q[u].currentValue!==q[u].initialValue)||(q[u].currentValueMax&&(q[u].currentValueMax!==q[u].initialValue))){if((q[u].currentValue==="true")&&(t.one("#"+u).ancestor(".rent-entries.hide")!==null)){return;
}if(u==="home-type-readout"){return;}s++;}},this);if(this._homeTypeCountShown&&window.innerWidth<1200){s++;
}if(s>0){r.setContent("("+s+")");}else{r.setContent("");}},_setHometypeCount:function(){var r=this.get("host"),p=r.one("#hometype-count"),q=0,s=false;
r.all(".hometype-standalone .checkbox").each(function(t){if(!t.get("parentNode").hasClass("hide")){if(t.get("checked")===true){q++;
}else{s=true;}}},this);if(s&&q>0){p.setContent("("+q+")");this._homeTypeCountShown=true;}else{p.setContent("");
this._homeTypeCountShown=false;}this._setMoreFiltersAppliedCount();},showSearchSortBar:function(){var p=this.get("searchSortBar");
if(p!==null&&p.contains(this.get("host"))){p.show();c.fire(i);}else{if(p!==null){c.on("FilterManager:filterPanelMoved",function(){p.show();
c.fire(i);});}}},_onMenuLegendClick:function(s){var r=s.currentTarget,p=r.ancestor(this.get("menuSelector")),q=this.get("menuOpenClass");
c.fire(f+":LogFilterMenuAction",{action:"Open",label:r.getData("za-label")});if(p.hasClass(q)){this._handleOpenMenuElements();
this.closeMenu(p);}else{this.openMenu(p);}},_onFormEnter:function(p){p.preventDefault();},_onMenuLegendFocus:function(s){if(this.get("inMenuLegendClick")){return;
}var r=s.currentTarget,p=r.ancestor(this.get("menuSelector")),q=this.get("menuOpenClass");if(!p.hasClass(q)){this.openMenu(p);
}},_onMenuLegendMousedown:function(p){this.set("inMenuLegendClick",true);},_onMenuLegendMouseup:function(p){this.set("inMenuLegendClick",false);
},_onListingTypeCategoryChange:function(){var s="",r=0,q="",p;this.get("listingTypeCategoryCheckboxNodes").each(function(t){if(t.get("checked")){r+=1;
p=t.getData("icon-class");q=t.getData("menu-label");s+='<span class="'+p+'">&nbsp;</span>';}});switch(r){case 1:s+=q;
break;default:s+="Listing Type";}this.get("listingTypeLabelNode").setContent(s+this.get("dropdownArrowMarkup"));
},_onListingTypeCategoryEnter:function(p){p.currentTarget.set("checked",!p.currentTarget.get("checked"));
p.currentTarget.simulate("change");},_onToggleRentalVisibility:function(p){this._onToggleRentalHomeTypesVisibility(p.isRentalVisible);
this._onToggleRentalPriceVisibility();},_onToggleRentalHomeTypesVisibility:function(p){if(p){this._setForRentState();
}else{this._resetForSaleState();}this._onBasicRentFiltersUpdate();},_setForRentState:function(){var r=this.get("host"),q=r.all(".hometype-manufactured"),t=r.all(".hometype-manufactured input"),p=r.all(".hometype-land"),s=r.all(".hometype-land input");
if(q&&t.get("checked")){this.set("manufacturedChecked",true);q.removeClass("selected");t.set("checked",false);
}q.addClass("hide");if(p&&s.get("checked")){this.set("landChecked",true);p.removeClass("selected");s.set("checked",false);
}p.addClass("hide");},_resetForSaleState:function(){var r=this.get("host"),q=r.all(".hometype-manufactured"),t=r.all(".hometype-manufactured input"),p=r.all(".hometype-land"),s=r.all(".hometype-land input");
if(this.get("manufacturedChecked")){this.set("manufacturedChecked",false);q.addClass("selected");t.set("checked",true);
}q.removeClass("hide");if(this.get("landChecked")){this.set("landChecked",false);p.addClass("selected");
s.set("checked",true);}p.removeClass("hide");},_onToggleRentalPriceVisibility:function(){var s=this,t=c.all(s.get("visiblePriceInputSelector")),u=t.item(0),q=t.item(1),v="",r="",p=s.get("priceDefaultsSet"),w=c.all(s.get("rentalShowOnlySelector")),x;
if(u&&q){x=u.get("id").replace(/(.*)([- ])([^- ]*$)/,"$1");s.set("activePriceFieldBase",x);u.ancestor(".filter-pane").all(l+s.get("priceOptionsBaseString")).hide();
s.get("minPriceOptions").show();if(p){v=u.get("value");r=q.get("value");if(v||r){s.set("priceDefaultsSet",false);
p=false;}}if(!p){s._onPriceInputChange();}}w.each(function(y){s._setMoreFiltersValue(y);});},_onBasicRentFiltersUpdate:function(){this._updateHometypeReadout();
this._setHometypeCount();},_setPriceMenuLabel:function(q,r){var p="Any Price",s="$";q=isNaN(q)||(q===0)?b:a.Formatters.abbr(q);
r=isNaN(r)||(r===0)?b:a.Formatters.abbr(r);if(q&&!r){p=s+q+"+";}else{if(r&&!q){p="Up to "+s+r;}else{if(q&&r){p=s+q+" - "+s+r;
}}}this.get("priceLabelNode").setContent(p+this.get("dropdownArrowMarkup"));},_setMaxPriceIntervals:function(s,t){var p=100000,r=100000,u=this.get("maxPriceDropdownMenuOptions"),q=u.size()-1;
if(this.get("activePriceFieldBase")==="price"){if(s<200000){p=25000;}else{if(s<=1000000){p=50000;}else{if(s>1000000){p=250000;
}}}}else{r=1000;if(s>=2000){p=500;}else{p=250;}}if(!isNaN(s)){r=s+p;}u.some(function(v,w){if(w===q){return true;
}var x=v.get("parentNode"),y=a.Formatters.comma(r);x.removeClass(k);v.setContent(a.Formatters.dollar(r));
x.setData(j,y);if(r===t){x.addClass(k);}r+=p;});},_onPriceInputFocus:function(r){var q=r.currentTarget,t=q.ancestor(".filter-pane"),s=q.get("id").replace(/(.*-)(min|max)$/,"$2"),p=this.get("priceOptionsBaseString");
t.all(l+p).hide();c.one("#"+this.get("activePriceFieldBase")+"-"+s+"-options").show();},_onPriceInputBlur:function(q){var p=q.currentTarget,r=p.get("id").replace(/(.*-)(min|max)$/,"$2");
if(this.get("priceValueChanged")){this._firePriceInputEvent(r);this.set("priceValueChanged",false);}},_onPriceInputValueChange:function(p){this.set("priceValueChanged",true);
this._onPriceInputChange(p);},_onPriceInputChange:function(u){var t=c.all(this.get("visiblePriceInputSelector")),s=t.item(0),r=t.item(1),q=a.Formatters.fromString(s.get("value")),p=a.Formatters.fromString(r.get("value"));
this._setPriceMenuLabel(q,p);this._setMaxPriceIntervals(q,p);if(!(u&&u.currentTarget)){c.Z.FilterManager.triggerPricePaymentUpdates(this.get("activePriceFieldBase"));
}},_onPriceInputEnter:function(r){var p=r.currentTarget,s=p.get("id").replace(/(.*-)(min|max)$/,"$2"),q=this.get("maxPriceOptions");
if(s==="min"){c.one("#"+q.getData("dropdown-id")).focus();}else{document.activeElement.blur();this.closeMenu(this.get("activeMenu"));
c.fire(f+":onMaxPriceInputEnter");}},_onPriceInputDownKey:function(r){var q=r.currentTarget,s=q.get("id").replace(/(.*-)(min|max)$/,"$2"),p=this.get(s+"PriceDropdownMenuOptions").item(0);
p.focus();},_onTabLastMinPrice:function(p){c.one("#"+this.get("activePriceFieldBase")+"-max").focus();
},_firePriceInputEvent:function(p){p=p.charAt(0).toUpperCase()+p.slice(1);c.fire(f+":LogFilterMenuAction",{action:"Price",label:"Price "+p+" Enter"});
},_onBedsMenuLabelDown:function(p){var q=this.get("bedOptionsSelector")+d;c.one(q).focus();},_onComboboxClick:function(s){var r=s.target,p=s.currentTarget,q=this.get("comboboxOpenClass");
if(r.ancestor(this.get("comboboxOptionsSelector"))){this._handleClickOutsideOpenCombobox(p);return;}if(p.hasClass(q)){this._closeCombobox(p);
}else{this._openCombobox(p);this._setComboboxArrowNav(p);}},_onComboboxUpDownArrow:function(r){var q=r.currentTarget,p=this.get("comboboxOpenClass");
if(!q.hasClass(p)){this._openCombobox(q);this._setComboboxArrowNav(q);}},_setComboboxArrowNav:function(p){if(p.hasClass("custom-dropdown")){var q=p.one(this.get("selectedCustomDropdownTargetSelector"))||p.one(this.get("customDropdownTargetSelector"));
q.focus();}},_onComboboxFocus:function(s){var r=s.currentTarget,q=this.get("comboboxFocusedClass"),p=this.get("comboboxString");
r.addClass(q);this.addHandle(this.get("host").delegate(h,this._onComboboxUpDownArrow,"down:38,40",this.get("comboboxSelector"),this),p+n);
},_onComboboxBlur:function(r){var q=r.currentTarget,p=this.get("comboboxFocusedClass");this.removeHandles(this.get("comboboxString")+n);
q.removeClass(p);},_getDropdownAnchorNodes:function(q){var p=q.ancestor(".zf-dropdown-options:not(.search-entry)")||q.ancestor(this.get("customDropdownSelector")),s=p.get("id"),r;
if(p.hasClass("min-price-options")){r=this.get("minPriceDropdownMenuOptions");}else{if(p.hasClass("max-price-options")){r=this.get("maxPriceDropdownMenuOptions");
}else{if(p.hasClass("bed-options")){r=this.get("bedDropdownMenuOptions");}else{if(p.hasClass("home-type-dropdown")){r=p.all(".checkbox");
}else{r=p.all(d);}}}}return[s,r];},_onSearchAffordabilityFilterApplyClicked:function(){var q=a.Formatters.fromString(c.one("#price-min").get("value")),p=a.Formatters.fromString(c.one("#price-max").get("value"));
this._setPriceMenuLabel(q,p);this._setMaxPriceIntervals(q,p);c.fire(f+":customDropdownOptionsChanged");
},_setMenuCounts:function(){this._setMoreFiltersAppliedCount();},_onCustomDropdownOptionsClick:function(v){var w=v.currentTarget,q="option",r=(w.hasClass(q)?w.get("parentNode"):w),z=r.one(l+q)||r,x=r.get("parentNode"),A=r.ancestor(this.get("customDropdownSelector")),p=A.one(this.get("dropdownReadoutSelector")),t=A.getData("dropdown-id"),y=this.get("host").one("#"+t),u=r.getData(j);
x.all("li").removeClass(k);r.addClass(k);y.set(j,u);if(p){p.setContent(z.get("innerHTML"));this._closeCombobox(A);
A.focus();c.fire(f+":LogFilterMenuAction",{action:p.getData("za-action")});if(x.ancestor(".more-menu")){this._setMoreFiltersValue(p);
}}else{this._onPriceInputChange();var s=this.get("maxPriceOptions");if(x.get("parentNode")===s){c.fire(f+":LogFilterMenuAction",{action:"Price",label:"Price Max Select"});
this.closeMenu(this.get("activeMenu"));}else{c.one("#"+s.getData("dropdown-id")).focus();c.fire(f+":LogFilterMenuAction",{action:"Price",label:"Price Min Select"});
}}c.fire(f+":customDropdownOptionsChanged");},_onCustomDropdownOptionsUp:function(v){var u=v.currentTarget,q=this._getDropdownAnchorNodes(u),w=q[0],t=q[1],p=t.indexOf(u),r=t.size()-1,s=c.one("#"+w).getData("dropdown-id");
if(p===0){if(s){c.one("#"+s).focus();}}else{t.item(p-1).focus();}},_onCustomDropdownOptionsDown:function(v){var u=v.currentTarget,q=this._getDropdownAnchorNodes(u),w=q[0],t=q[1],p=t.indexOf(u),r=t.size()-1,s=c.one("#"+w).getData("dropdown-id");
if(p!==r){t.item(p+1).focus();}},_handleClickOutsideOpenCombobox:function(p){this.addHandle(this.get("host").on(m,function(s){var r=s.target,q=r.ancestor(this.get("comboboxOptionsSelector"))?true:false;
if(!q){this._closeCombobox(p);}},this),this.get("comboboxString"));},_openCombobox:function(p){var q=p.one(this.get("customDropdownOptionsSelector"));
this._handleOpenMenuElements();p.addClass(this.get("comboboxOpenClass"));if(q){q.focus();}this.set("openMenuElement",p);
this._handleClickOutsideOpenCombobox(p);},_closeCombobox:function(p){c.later(50,this,function(){this.removeHandles(this.get("comboboxString"));
p.removeClass(this.get("comboboxOpenClass"));this.set("openMenuElement",null);});},_handleOpenMenuElements:function(){var p=this.get("openMenuElement");
if(p){this._closeCombobox(p);}},_setInitialDropdownMenuValue:function(v){var u=this.get("customDropdownSelector"),p=v.one(u)||v.ancestor(u),r=p.one(this.get("dropdownReadoutSelector")),t=p.all(this.get("customDropdownOptionsSelector")),q=v.one("select"),s=q.get(j);
t.some(function(x){var w=x.getData(j),y=x.one("a")||x;if(w===s){x.addClass(k);r.setContent(y.get("innerHTML"));
return true;}});},_onHometypeCheckboxChange:function(p){this._updateHometypeReadout();},_onRentalOnlyCheckboxChange:function(q){var p=q.currentTarget;
this._setMoreFiltersValue(p);},_setHometypeReadout:function(s){var r=s!==null?s:false,p=[],q=0;this.get("hometypeCheckboxNodes").each(function(w){var t=w.get("id").replace(/(.*)([- ])([^- ]*$)/,"$1"),x=t+"-label",v=c.one("#"+x),u=c.one("#"+t);
if(v!==null&&u!==null&&!u.hasClass("hide")){q+=1;if((r||w.get("checked"))){p.push(v.get("innerHTML"));
}}});return !p.length||p.length===q?"Any":p.join(", ");},_updateHometypeReadout:function(){var p=this.get("hometypeReadoutNode");
p.setContent(this._setHometypeReadout());this._setMoreFiltersValue(p);this._setHometypeCount();},_onBedOptionsClick:function(p){this.closeMenu(this.get("activeMenu"));
},_onApplyButtonClick:function(p){c.Z.Analytics.trackEvent({category:"Search",action:"Apply"});this.closeMenu(this.get("activeMenu"));
},_onOutsideMenuEvent:function(s){var r=s.target,p=this.get("openMenuElement"),q=this.get("activeMenu"),t="zsg-tooltip";
if(r.hasClass(t)||r.ancestor(l+t)){return;}if(p&&!p.contains(r)){this._handleOpenMenuElements();}if(q&&!q.contains(r)){this.closeMenu(q);
}}},{NS:"searchExposedFilters",ATTRS:{activeMenu:{value:null},inMenuLegendClick:{value:false},priceDefaultsSet:{value:true},priceValueChanged:{value:false},openMenuElement:{value:null},formSelector:{value:"form#searchfilters"},menuSelector:{value:".filter-menu"},menuLegendSelector:{value:".filter-menu legend"},menuOpenClass:{value:"menu-open"},dropdownArrowMarkup:{value:'<span class="zsg-icon-arrow-menu-down"></span>'},searchSortBar:{valueFn:function(){return c.one("#search-sort-bar");
}},listingTypeLabelNode:{valueFn:function(){return this.get("host").one("#listings-menu-label");}},listingTypeCategorySelector:{value:".listing-category > .checkbox"},listingTypeSubCategorySelector:{value:"#category-entries .checkbox"},priceLabelNode:{valueFn:function(){return this.get("host").one("#price-menu-label > div");
}},listingTypeCategoryCheckboxNodes:{valueFn:function(){return this.get("host").all(this.get("listingTypeCategorySelector"));
}},activePriceFieldBase:{value:"price"},priceInputSelector:{value:".price-entries .dualboxes input"},priceOptionsBaseString:{value:"price-options"},visiblePriceInputSelector:{value:".price-entries:not(.hide) .dualboxes input"},comboboxString:{value:"combobox"},comboboxSelector:{value:".combobox"},comboboxOptionsSelector:{value:".combobox-options"},customDropdownSelector:{value:".custom-dropdown"},customDropdownOptionsSelector:{value:".zf-dropdown-options li"},customDropdownOptionsAnchorSelector:{value:".zf-dropdown-options li"+d},selectedCustomDropdownOptionsAnchorSelector:{value:".zf-dropdown-options li.selected"+d},customDropdownTargetSelector:{value:".zf-dropdown-options li"+d+", .zf-multicheck-dropdown-options li input"},selectedCustomDropdownTargetSelector:{value:".zf-dropdown-options li.selected"+d+", .zf-multicheck-dropdown-options li.selected input"},comboboxFocusedClass:{value:"focused"},comboboxOpenClass:{value:"combobox-open"},dropdownReadoutSelector:{value:".options-display"},linkedDropdownComboSelectors:{value:["#beds-entries","#baths-entries","#days-entries"]},minPriceOptions:{getter:function(){return this.get("host").one("#"+this.get("activePriceFieldBase")+"-min-options");
}},maxPriceOptions:{getter:function(){return this.get("host").one("#"+this.get("activePriceFieldBase")+"-max-options");
}},minPriceDropdownMenuOptions:{getter:function(){return this.get("minPriceOptions").all(this.get("customDropdownOptionsAnchorSelector"));
}},maxPriceDropdownMenuOptions:{getter:function(){return this.get("maxPriceOptions").all(this.get("customDropdownOptionsAnchorSelector"));
}},bedDropdownMenuOptions:{valueFn:function(){return this.get("host").all(this.get("bedOptionsSelector")+d);
}},hometypeReadoutNode:{valueFn:function(){return this.get("host").one("#home-type-readout");}},hometypeEntriesNode:{valueFn:function(){return this.get("host").one("#hometype-entries");
}},hometypeCheckboxSelector:{value:".home-type-dropdown .checkbox"},hometypeCheckboxNodes:{valueFn:function(){return this.get("host").all(this.get("comboboxSelector")+this.get("hometypeCheckboxSelector"));
}},rentalOnlyCheckboxSelector:{value:"#rental-only-entries .checkbox"},bedMenuLabelSelector:{value:"#beds-menu-label"},bedOptionsSelector:{value:"#bed-options li"},applyButtonSelector:{value:"#filterSearchButton"},moreMenuInputFieldSelector:{value:'.more-menu input[type="text"], .more-menu textarea, #rental-only-entries input[type="checkbox"]'},rentalShowOnlySelector:{value:'#rental-only-entries input[type="checkbox"]'},minIdBase:{value:"-min"},maxIdBase:{value:"-max"},moreMenuFields:{valueFn:function(){return this.get("host").all(this.get("moreMenuInputFieldSelector")+", .more-menu "+this.get("dropdownReadoutSelector"));
}},outsideEventType:{valueFn:function(){var r="focusoutside",p="mousedownoutside",q="touchstartoutside",s=[];
if(!c.UA.ie){s.push(r);}s.push(p,q);return s;}},manufacturedChecked:{value:false},landChecked:{value:false}}});
},"1.0.0",{requires:["plugin","base-build","node-pluginhost","z-event-handle-manager","zillow-filter-manager","zillow-formatters","zillow-link-tracking","zillow-node-methods"]});

YUI.add("z-search-exposed-filter-linktrack",function(b){var e="SearchExposedFilterLinktrack",i="debug",d="blur",g="click",f="key",h="SearchExposedFilterControl",c="",a=b.namespace("Z");
a[e]=b.Base.create("searchExposedFilterLinktrack",b.Base,[b.Z.EventHandleManager],{initializer:function(){b.log("initializer",i,e);
if(this.get("trackingActive")){this._attachHandlers();}},destructor:function(){b.log("destructor",i,e);
this.removeHandles();},_attachHandlers:function(){b.log("_attachHandlers",i,e);var k=this.get("filterNode"),j=this.get("moreTextInputSelector");
this.addHandle(b.on(h+":LogFilterMenuAction",this._setFilterGAEventParams,this));this.addHandle(b.on(h+":ListingTypeDialogClosed",this._onListingTypeDialogClosed,this));
this.addHandle(k.delegate(g,this._onShowOnlyChange,this.get("showOnlySelector"),this));this.addHandle(k.delegate(g,this._onShowOnlyChange,this.get("hometypeCheckboxSelector"),this));
this.addHandle(k.delegate("valuechange",this._onMoreTextInputValueChange,j,this));this.addHandle(k.delegate(d,this._moreTextInputEnter,j,this));
this.addHandle(k.delegate(f,this._moreTextInputEnter,"down:13",j,this));},_onListingTypeDialogClosed:function(k){var j=this._getListingTypeCheckboxArray();
this._logFilterGAEvent("Listing Type",j);},_getListingTypeCheckboxArray:function(){var l=c,o=0,k={"fs-listings":0,"fs-agent":1,"fs-owner":2,"fs-new":3,"fs-foreclosures":4,"fs-comingsoon":5,"pm-listings":6,"pm-foreclosed":7,"pm-pre-foreclosure":8,"pm-mmm":9,"fr-listings":10,"rs-listings":11},n=[0,0,0,0,0,0,0,0,0,0,0,0],j=c;
this.get("listingTypeCheckboxNodes").each(function(p){l=p.get("id").replace(/(.*)([- ])([^- ]*$)/,"$1");
o=p.get("checked")?1:0;n[k[l]]=o;});for(var m=0;m<n.length;m++){j=j+n[m];}return j;},_onShowOnlyChange:function(m){var l=m.currentTarget,k=l.getData("za-label")||null,j=l.get("checked")?"On":"Off";
if(k!==null){this._logFilterGAEvent(k,j);}},_onMoreTextInputValueChange:function(j){this.set("activeInputChanged",true);
},_moreTextInputEnter:function(m){var l,j,k;if(this.get("activeInputChanged")){l=m.currentTarget;j=l.ancestor(".search-entry");
k=j.getData("za-label");this._logFilterGAEvent(k);this.set("activeInputChanged",false);}},_setFilterGAEventParams:function(l){var k=l.action,j=l.label||null;
this._logFilterGAEvent(k,j);},_logFilterGAEvent:function(k,j){a.Analytics.trackEvent({category:"Search",action:"Filter "+k,label:j||c});
}},{NAME:e,ATTRS:{filterNode:{valueFn:function(){return b.one("#search-filters");}},trackingActive:{value:true},listingTypeCheckboxNodes:{valueFn:function(){return this.get("filterNode").all(".category-entries .checkbox");
}},showOnlySelector:{value:".only-entries .checkbox"},activeInputChanged:{value:false},hometypeCheckboxSelector:{value:"#home-type-dropdown .checkbox"},moreTextInputSelector:{value:'.more-menu input[type="text"], .more-menu textarea'}}});
},"1.0.0",{requires:["node-base","base-build","z-event-handle-manager","zillow-link-tracking"]});
YUI.add("z-external-api",function(b){function a(){this._init.apply(this,arguments);}b.augment(a,b.EventTarget,null,null,{broadcast:2,emitFacade:true,preventable:false,queueable:true});
a.NAME="externalApi";b.mix(a.prototype,{_eventPrefix:"externalApi",_timeout:10000,_txn:null,urls:null,load:function(d){var c=this.getEvent("ready").fired;
if(d){this.once("ready",d);}if(!c){this._getScript();}return this;},_init:function(c){this._src=this.constructor.NAME;
b.log("_init","debug",this._src);this._initConfig(c);this._initEvents();},_initConfig:function(c){c=this._config=c||{};
this.urls=(this.urls||[]);if(c.urls){this.urls=this.urls.concat(b.Array(c.urls));}if(b.Object.owns(c,"timeout")){this._timeout=c.timeout;
}if(c.prefix){this._eventPrefix=c.prefix;}},_initEvents:function(){var c=this._eventPrefix;this.publish({error:{prefix:c,defaultFn:this._defError},loaded:{prefix:c,defaultFn:this._defLoaded},ready:{prefix:c,fireOnce:true}});
},_defError:function(c){var d=c.message;switch(d){case"Aborted":b.log("transaction aborted","info",this._src);
break;case"Timeout":b.log("transaction timeout","warn",this._src);break;default:b.log("transaction: "+d,"error",this._src);
break;}this._txn=null;},_defLoaded:function(){b.log("_defLoaded","debug",this._src);this.fire("ready");
},_getErrorMessage:function(e){var d,c="";if(e&&e.length){d=e[e.length-1];}if(d&&b.Object.owns(d,"error")){c=d.error;
}return c;},_callback:function(c){if(c){this.fire("error",{message:this._getErrorMessage(c)});}else{this.fire("loaded");
}},_getScript:function(){if(this._txn===null){b.log("creating transaction","debug",this._src);this._txn=b.Z.Get.load(this.urls,{context:this,timeout:this._timeout,async:true},b.bind(this._callback,this));
}}});b.namespace("Z").ExternalApi=a;},"3.7.2",{requires:["event-custom-complex","z-get"]});
YUI.add("z-google-plus-sdk",function(d){var a="google-plus-sdk",b="googlePlusSDKCallback";function c(){c.superclass.constructor.apply(this,arguments);
}d.namespace("GooglePlus").SDK=d.extend(c,d.Z.ExternalApi,{_eventPrefix:"googlePlusSDK",urls:[{url:"https://apis.google.com/js/client:plusone.js?onload="+b}],_init:function(e){var f=d.config.win;
c.superclass._init.apply(this,arguments);if(f.gapi){this._onLoadAsync();}else{f[b]=d.bind(this._onLoadAsync,this);
}},_defLoaded:function(){},_onLoadAsync:function(){d.log("_onLoadAsync","debug",a);this.fire("ready");
}},{NAME:a,_instance:null,load:function(e,f){d.log("load","debug",a);if("function"===typeof e){f=e;e={};
}d.config.win.___gcfg={parsetags:"onload"};if(c._instance===null){c._instance=new c(e||{});}return c._instance.load(f);
}});},"3.3.0",{requires:["z-external-api"]});
YUI.add("z-user-account-google-plus-base",function(c){var b=c.namespace("Z"),h=c.config.win,a="googlePlusSignin:apiLoaded",f="googlePlusSignin:signedin",i="googlePlusSignin:signedout",j="googlePlusSignin:accessDenied",d="googlePlusSignin:authed",g="googlePlusSignin:error";
function e(k){}e.prototype={_googlePlusSigninApi:null,_googlePlusSigninRequest:null,initializer:function(){this.publish(a,{emitFacade:false});
this.publish(f,{emitFacade:true});this.publish(i,{emitFacade:true});this.publish(j,{emitFacade:true,defaultFn:this._defGooglePlusSigninAccessDeniedFn,preventable:true});
this.publish(d,{emitFacade:true,defaultFn:this._defGooglePlusSigninAuthedFn,preventable:true});this.publish(g,{emitFacade:true,defaultFn:this._defGooglePlusSigninErrorFn,preventable:true});
this.once(f,this._onceGooglePlusSignedIn,this);},loadGooglePlusSigninApi:function(l,k){this.once(a,l,k);
c.GooglePlus.SDK.load(c.bind(this._onGooglePlusApiLoad,this));},_parse:function(l){if(typeof l==="string"){try{return c.JSON.parse(l);
}catch(k){return{};}}return l;},_sendGooglePlusApiRequest:function(k){c.config.win.gapi.client.request(k);
},_sendGooglePlusSigninRequest:function(k){},_googlePlusSigninCallback:function(k){k=k||{};if(k.status&&k.status.signed_in){this.fire(f,{authResult:k});
}else{switch(k.error){case"access_denied":this.fire(j,{authResult:k});break;case"signed_out":this.fire(i,{authResult:k});
break;case"immediate_failed":break;default:this.fire(g,{error:k.error});break;}}},_onceGooglePlusSignedIn:function(k){this._sendGooglePlusApiRequest({path:this.get("googlePlusUserInfoUrl"),callback:c.bind(this._sendGooglePlusSigninRequest,this,k.authResult)});
},_onGooglePlusApiLoad:function(k){this.fire(a);},_onGooglePlusSigninRequestSuccess:function(l,k){if(k.responseText){k=this._parse(k.responseText);
}this._onGooglePlusSigninSuccess(k);},_onGooglePlusSigninSuccess:function(k){this.fire(d,k);this.fire("submitSuccess",this.get("successParams"));
},_onGooglePlusSigninRequestFailure:function(l,k){this._onGooglePlusSigninFailure(k);},_onGooglePlusSigninFailure:function(k){this.fire(g,{error:k});
},_defGooglePlusSigninAccessDeniedFn:function(k){b.Analytics.trackEvent({category:"Auth",action:"Google connect cancelled",label:this.get("authProcess")||c.config.win.location.href});
},_defGooglePlusSigninAuthedFn:function(k){b.Analytics.trackEvent(k.googleAnalyticsEvent);},_defGooglePlusSigninErrorFn:function(k){this.fire("genericError",{error:k.error||this.get("googlePlusLoginError")});
},_setGooglePlusSigninConfig:function(k){return c.merge(k,{callback:c.bind(this._googlePlusSigninCallback,this)});
}};e.ATTRS={csrfToken:{},googlePlusLoginApiUrl:{value:"https://apis.google.com/js/client:plusone.js"},googlePlusLoginError:{value:"Could not log into Google+ at this time."},googlePlusSigninAuthUrl:{value:"/user/account/services/ExternalAuthentication.htm"},googlePlusSigninConfig:{value:{apppackagename:"com.zillow.android.zillowmap"},setter:"_setGooglePlusSigninConfig"},googlePlusUserInfoUrl:{value:"/userinfo/v2/me"}};
e.NS="UserAccountGooglePlusBase";b.UserAccountGooglePlusBase=e;},"3.11.0",{requires:["base-build","z-analytics","z-google-plus-sdk"]});

YUI.add("z-user-account-google-plus-auto-signin",function(b){var a=b.namespace("Z");a.UserAccountGooglePlusAutoSignin=b.Base.create("userAccountGooglePlusAutoSignin",b.Base,[a.UserAccountGooglePlusBase],{initializer:function(){this.set("googlePlusSigninConfig.immediate",true);
},requestAutoSignin:function(){this.loadGooglePlusSigninApi(b.bind(this._onGooglePlusSigninApiLoaded,this));
},_sendGooglePlusSigninRequest:function(f,c){var d={},e=this.get("model"),g=e?e.get("authProcess"):null;
f=f||{};d={csrfToken:this.get("csrfToken"),accessToken:f.access_token,expiresIn:f.expires_in,authID:c.id,ap:g||b.config.win.location.href};
a.jsonp(this.get("googlePlusSigninAuthUrl")+"?callback={callback}&"+b.QueryString.stringify(d),{context:this,on:{failure:this._onAutoSignInFailure,success:this._onAutoSignInSuccess}});
},_onAutoSignInSuccess:function(c){this._onGooglePlusSigninSuccess(c);},_onAutoSignInFailure:function(c){this._onGooglePlusSigninFailure(c);
},_onGooglePlusSigninApiLoaded:function(d){try{b.config.win.gapi.signin.render("googleAutoSignInNode",this.get("googlePlusSigninConfig"));
}catch(c){this.fire("googlePlusSignin:error");}}},{ATTRS:{googleAutoSignInNode:{value:"googleAutoSignInNode"}}});
},"3.11.0",{requires:["z-jsonp","querystring-stringify","z-user-account-google-plus-base"]});
YUI.add("z-jsonp-page-attrs",function(b){function a(){}a.prototype={};a.ATTRS={bodyContent:{},requirements:{},bodyScript:{},bodyScriptDomReady:{},bodyScriptLoad:{},tapBody:{},tapInit:{},analytics:{},comboStylesheets:{},stylesheets:{},requestId:{}};
b.namespace("Z").JsonpPageAttrs=a;},"3.5.0");
YUI.add("z-main-nav-async-model",function(b){var a=b.namespace("Z");a.MainNavAsyncModel=b.Base.create("mainNavAsyncModel",b.Model,[a.JsonpPageAttrs],{sync:function(e,c,g){var f={newaccount:this.get("wasNewAccountCreated")},d=this.get("authToken");
if(d){f.token=d;}b.log("sync","info","MainNavAsyncModel");if(e==="read"){a.jsonp(this.get("jsonpUrl")+"&"+b.QueryString.stringify(f),{context:this,args:[g],on:{success:this._onJsonpSuccess,failure:this._onJsonpFailure}});
}else{g("Illegal action: "+e);}},_sharedApp:{},_onJsonpFailure:function(c,d){b.log("jsonp call failed","error","MainNavAsyncModel");
d(c);},_onJsonpSuccess:function(c,d){d(null,c);}},{ATTRS:{app:{valueFn:function(){return this._sharedApp;
}},jsonpUrl:{value:"/ajax/MainNavAsync.htm?jsonp={callback}"},wasNewAccountCreated:{value:false},authToken:{value:null}}});
},"1.0.0",{requires:["model","z-jsonp","z-jsonp-page-attrs","querystring-stringify"]});
YUI.add("z-server-log",function(b){var a=b.namespace("Z");a.ServerLog={log:function(h,f,c,d){if(!f){f="log";
}var e="/ui/ClientProblem.htm",g="c="+f;if(b.config.preHost){e=b.config.preHost+e;}if(c){g+="&u="+encodeURIComponent(c);
}if(d){g+="&r="+encodeURIComponent(d);}if(h){g+="&m="+encodeURIComponent(h);}(new Image()).src=e+"?"+g;
}};},"3.7.3");
YUI.add("z-base-jsonp-view",function(e){var d=e.namespace("Z"),h="BaseJsonpView",f="info",m="debug",i="warn",l="renderView",j="cssLoaded",g="htmlInserted",c="jsExecuted",b="analyticsTracked",k="renderComplete",n=["tapBody","bodyScript","bodyScriptDomReady","bodyScriptLoad","tapInit"];
function a(){}a.prototype={_modelLoad:null,_chainEvents:true,_initialRequestId:null,_yuiInstance:null,initializeJsonp:function(){e.log("initializeJsonp",f,h);
this.on("tearDown",this._baseTearDown);this._chainEvents=true;this._attachModelEvents();this.after("modelChange",this._attachModelEvents);
this.on("setUp",this._onSetUp);this.publish(l,{defaultFn:this._defRenderView});this.publish(g,{defaultFn:this._defHtmlInserted});
this.publish(c,{defaultFn:this._defJsExecuted});this.publish(b,{defaultFn:this._defAnalyticsTracked});
this.publish(k,{defaultFn:this._defRenderComplete});var o={requestId:this.get("loadingRequestId"),isSecondaryInstance:true,loggedIn:e.config.loggedIn,delegateClickSelector:this.get("delegateClickSelector"),searchAppMode:e.config.searchAppMode},p=this.get("extraYUIConfig");
if(p){o=e.merge(o,p);}this._yuiInstance=this.get("newYUISandbox")?YUI(o):e;this.set("sharedYuiInstance",this._yuiInstance);
},_baseTearDown:function(){e.log(this._initialRequestId+": _baseTearDown",m,h);this._chainEvents=false;
var o=this._yuiInstance;if(o.config.requestId!=this.get("loadingRequestId")){o.fire("managed:teardown",{requestId:this.get("loadingRequestId")});
}o.fire("managed:teardown",{requestId:o.config.requestId});},_attachModelEvents:function(p){e.log("_attachModelEvents",m,h);
this._detachModelEvents();var o=p&&p.newVal||this.get("model");if(o){this._modelLoad=o.after("load",this._afterModelLoad,this);
}},_detachModelEvents:function(){e.log("_detachModelEvents",m,h);if(this._modelLoad){this._modelLoad.detach();
}this._modelLoad=null;},_afterModelLoad:function(p){if(p&&p.parsed){var o=p.parsed;this._setGlobalRequestId(this._yuiInstance,o.requestId);
this._initialRequestId=o.requestId;this.fire(l,{data:o});}else{e.log("Failed to parse model","error",h);
}},destructor:function(){e.log(this._initialRequestId+": destructor",f,h);this._chainEvents=false;if(this._yuiInstance&&this.get("newYUISandbox")){this._setGlobalRequestId(this._yuiInstance,"hdpUnloading");
e.later(this.get("yuiSandboxDestroyDelayMS"),this,this.destroyYUISandbox,[this._yuiInstance]);}this._yuiInstance=null;
this._detachModelEvents();this._destroyModel();},destroyYUISandbox:function(o){var p=this._initialRequestId;
e.log(p+": sandbox destruction requested",f,h);if(o){o.Get.js({url:null},{data:o,timeout:-1,onEnd:function(q){setTimeout(function(){e.log(p+": destroying sandbox",f,h);
q.data.destroy();},0);}});}},_defRenderView:function(o){if(!this._chainEvents){o.halt();return;}e.log(this._initialRequestId+": "+l,f,h);
this._ensureCSS(o.data);},_defCssLoaded:function(o){if(!this._chainEvents){o.halt();return;}e.log(this._initialRequestId+": "+j,f,h);
this._render(o.data);this.fire(g,{data:o.data});},_defHtmlInserted:function(o){if(!this._chainEvents){o.halt();
return;}e.log(this._initialRequestId+": "+g,f,h);this._ensureJS(o.data);},_defJsExecuted:function(o){if(!this._chainEvents){o.halt();
return;}e.log(this._initialRequestId+": "+c,f,h);this._ensureAnalytics(o.data);},_defAnalyticsTracked:function(o){if(!this._chainEvents){o.halt();
return;}e.log(this._initialRequestId+": "+b,f,h);this.fire(k,{data:o.data});},_defRenderComplete:function(o){if(!this._chainEvents){o.halt();
return;}this._firePriorityUiReady();e.log(this._initialRequestId+": "+k,f,h);},_firePriorityUiReady:function(){if(this.get("newYUISandbox")&&this._yuiInstance){e.log(this._initialRequestId+": _firePriorityUiReady",m,h);
this._yuiInstance.fire("priorityUiReady");}},_onSetUp:function(){e.log("_onSetUp",m,h);var o=this.get("model");
if(o){e.log("loading model",m,h);o.load();}},_destroyModel:function(){e.log("_destroyModel",m,h);var o=this.get("model");
if(o){o.destroy();}},_setWindowTitle:function(o){if(o.title){e.config.doc.title=o.title;}},_setResponsivePageTitle:function(p){if(p.subtitle){var o=e.one(".responsive-page-title");
if(o){o.setHTML(p.subtitle);}}},_ensureJS:function(p){var o=this._yuiInstance;if(o){o.use(p.requirements,e.bind(this._runJS,this,p));
}},_isOnSameView:function(){var o=this._yuiInstance;if(!o||!o.config){return false;}return(!o.config.requestId&&!this._initialRequestId||this._initialRequestId===o.config.requestId);
},_callJSPromiseCallback:function(q,o,s){if(!this._isOnSameView()){this._chainEvents=false;}if(!this._chainEvents||!s){return;
}e.log(this._initialRequestId+": _callJSPromiseCallback: "+o,m,h);try{q[o](s);}catch(r){e.log(this._initialRequestId+": error occured in "+o,f,h);
var p=new Error(o+" error");p._jsCallbackInfo={bucket:o,error:r};throw p;}return s;},_runJS:function(p){if(!this._isOnSameView()){e.log(this._initialRequestId+": Aborting _runJS since we're no longer on the same view","warn",h);
return;}var o=e.when(this._yuiInstance);e.Array.each(n,function(q){o=o.then(e.bind(this._callJSPromiseCallback,this,p,q));
},this);o.then(e.bind(this._fireJSExecuted,this,{data:p}),e.bind(this._onJSError,this,p));},_fireJSExecuted:function(o){if(!o){e.log(this._initialRequestId+": _fireJSExecuted: eventFacade missing, aborting",m,h);
return;}if(this._chainEvents){e.log(this._initialRequestId+": _fireJSExecuted",m,h);this.fire(c,o);}},_onJSError:function(p,q){if(!this._yuiInstance||!this._yuiInstance.config){return;
}var o,r;if(!q){e.log("No rejection reason","error",h);o={error:new Error("No rejection reason")};}else{if(!q._jsCallbackInfo){e.log("Unexpected rejection reason","error",h);
o={error:q};}else{o=q._jsCallbackInfo;}}o.data=p;r=this.name+" JSONP JS Callback Error: "+o.bucket+": ";
if(o.error.stack){r+=o.error.stack;}else{r+=o.error;}r=this._cleanupStackTrace(r);e.log(r,"error",h);
d.ServerLog.log(r,"error",e.config.win.location);this._fireJSExecuted(o);},_cleanupStackTrace:function(p){var o=p.replace(/(\r\n|\n|\r)/gm,"");
o=o.replace(/(\s+)/gm," ");o=o.replace(new RegExp(e.config.vstatic.domain,"g"),"<vstatic>/");return o;
},_ensureAnalytics:function(p){var o=e.Z.Analytics;if(p.analytics){o.gaqPushCommand.apply(o,p.analytics);
}if(e.Lang.isArray(p.ua)){e.Array.each(p.ua,function(q){if(e.Lang.isArray(q)){e.Array.each(q,function(r){o.gaCommand.apply(o,r);
});}});}this.fire(b,{data:p});},_ensureCSS:function(o){var p=this._aggregateRequiredCSS(o),q=this.get("app");
if(this.ensureCss){this.ensureCss(p,q,o);}else{e.log(this._initialRequestId+": z-css-manager mixin missing; CSS not loaded",i,h);
this._defCssLoaded({data:o});}},_aggregateRequiredCSS:function(o){return(o.comboStylesheets||[]).concat(o.stylesheets||[]);
},_render:function(o){e.log("_render",m,h);}};a.ATTRS={loadingRequestId:{value:"loading"},delegateClickSelector:{value:"document"},extraYUIConfig:{value:null},newYUISandbox:{value:true},yuiSandboxDestroyDelayMS:{value:10000}};
a.JS_CALLBACK_ORDER=n;e.namespace("Z").BaseJsonpView=a;},"1.0.0",{requires:["promise","z-server-log","z-analytics"]});

YUI.add("z-css-manager",function(f){var b="CssManager",e="loadedCssClass",c="cssLoaded",d="debug";function a(){}a.ATTRS={loadedCssClass:{value:"loaded-css"},disableLoadedCss:{value:true}};
a.prototype={initializer:function(){this.publish(c,{defaultFn:this._defCssLoaded});},ensureCss:function(j,h,m){var p=[],o=h._loadedCSS;
this.requiredCssHash={};if(j){j=f.Array.dedupe(j);j=this._absolutizeCSS(j);}else{j=[];}if(o){var l,g;
for(var n=0,k=j.length;n<k;n+=1){g=j[n];l=o[g];if(this.requiredCssHash[g]){continue;}this.requiredCssHash[g]=true;
if(!l){p.push(g);}else{if(l.disabled){f.log("CSS re-enabled: "+g,d,b);l.disabled=false;}}}}else{p=j;}this._loadCss(h,m,p);
},_absolutizeCSS:function(g){if(!f.config.vstatic||!f.config.vstatic.base){return g;}var m=f.config.vstatic.base+"css/",j=[],k=g.length,h=0,l=/^\/static\/css\//;
for(;h<k;h+=1){j.push(g[h].replace(l,m));}return j;},_loadCss:function(i,h,g){if(g.length>0){f.Z.Get.css(g,{context:this,data:h,app:i,attributes:{"class":this.get(e)},onSuccess:this._handleCssLoad,onFailure:this._handleCssLoad});
}else{this._handleCssLoad({data:h,options:{app:i}});}},_handleCssLoad:function(h){var i=h.options.app,g;
g=i._loadedCSS=i._loadedCSS||{};this._disableCss(g);f.Array.each(h.nodes,function(k){var j=k.getAttribute("href");
f.log("CSS loaded: "+j,d,b);g[j]=k;});this.fire(c,{data:h.data});},_disableCss:function(h){var i;if(!this.get("disableLoadedCss")){return;
}for(var g in h){if(!this.requiredCssHash[g]){i=h[g];if(i&&!i.disabled){f.log("CSS disabled: "+g,d,b);
i.disabled=true;}}}},_storeRequiredCss:function(){var h=this.get("app")._loadedCSS;if(!this._requiredCss){this._requiredCss=[];
}if(h){for(var g in h){this._requiredCss.push(g);}}},_defCssLoaded:function(g){}};f.namespace("Z")[b]=a;
},"3.6.0",{requires:["base-build","z-get"]});
YUI.add("z-view-base",function(e){var a="ViewBase",b="info",d=false;function c(){}c.ATTRS={app:{}};c.prototype={containerTemplate:'<div class="active-view"/>',_events:null,initializer:function(){e.log("initializer",b,a);
this._events=[];this._initLifecycle();this._initViewEvents();},destructor:function(){e.log("destructor",b,a);
},_initViewEvents:function(){this.publish("selectView");this.publish("goto");},_initLifecycle:function(){var g=this,j=["setUp","tearDown"],f,h=0;
for(;h<j.length;h+=1){f=j[h];g.publish(f,{defaultTargetOnly:true,defaultFn:g["_"+f]});if(g[f]){g.on(f,g[f]);
}}},_setUp:function(f){e.log("_setUp",b,a);},_tearDown:function(f){e.log("_tearDown",b,a);this._tearDownEvents();
if(e.Z.ClientProfilerApp){if(d===true){e.Z.ClientProfilerApp.beaconLater();}else{d=true;}e.Z.ClientProfilerApp.reset();
e.Z.ClientProfilerApp.profile("profiler started");}},_tearDownEvents:function(){e.Array.each(this._events,function(f){f.detach();
});this._events=[];return this;},_setGlobalRequestId:function(g,h){var f=(g.config.requestId===h)?"was already ":"is now ";
g.applyConfig({requestId:h});if(g.config.isSecondaryInstance){e.log("secondary YUI instance requestId "+f+g.config.requestId,b,a);
}else{e.log("main YUI instance requestId is "+f+g.config.requestId,b,a);}}};e.namespace("Z").ViewBase=c;
},"3.5.0",{requires:["view"]});
YUI.add("z-main-nav-async-view",function(b){var a=b.namespace("Z");a.MainNavAsyncView=b.Base.create("mainNavAsyncView",b.View,[a.CssManager,a.BaseJsonpView,a.ViewBase],{initializer:function(){this.initializeJsonp();
},_render:function(d){var c=this.get("container");c.replace(b.Node.create(d.bodyContent));c.destroy(true);
b.log("replaced main nav","info","MainNavAsyncView");}},{ATTRS:{app:{getter:function(c){return c||this.get("model").get("app");
}},newYUISandbox:{value:false}}});},"1.0.0",{requires:["zillow-node-methods","z-base-jsonp-view","z-css-manager","z-view-base","view"]});
